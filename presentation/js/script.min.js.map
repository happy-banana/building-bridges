{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","node_modules/browserify/node_modules/process/browser.js","presentation/js/src/classes/MobileServerBridge.js","presentation/js/src/classes/Presentation.js","presentation/js/src/classes/SlideBridge.js","presentation/js/src/classes/childapps/ChildApp.js","presentation/js/src/classes/config/index.js","presentation/js/src/classes/slides/ContentBase.js","presentation/js/src/classes/slides/live-code/CodeElement.js","presentation/js/src/classes/slides/live-code/ConsoleElement.js","presentation/js/src/classes/slides/live-code/WebPreviewElement.js","presentation/js/src/script.js","shared/js/Constants.js","shared/js/classes/slides/ContentBase.js","shared/js/classes/MobileServerBridge.js","shared/js/classes/Presentation.js","shared/js/classes/SlideBridge.js","presentation/js/src/classes/slides/live-code/index.js","presentation/js/src/classes/slides/megapudding/index.js","presentation/js/src/classes/slides/shake-your-phones/index.js","presentation/js/src/classes/slides/video-slide/index.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACtLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"script.min.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            currentQueue[queueIndex].run();\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = (function(){\n\n\tvar MobileServerBridgeBase = require('shared/MobileServerBridge');\n\n\tvar Config = require('./config');\n\tvar Constants = require('Constants');\n\n\tfunction MobileServerBridge(presentation, url) {\n\t\tMobileServerBridgeBase.call(this, presentation, url);\n\t\tbean.on(this.presentation, Constants.SET_CURRENT_SLIDE_INDEX, this.currentSlideIndexChanged.bind(this));\n\t}\n\n\tMobileServerBridge.prototype = Object.create(MobileServerBridgeBase.prototype);\n\n\tMobileServerBridge.prototype.getLoginCredentials = function() {\n\t\treturn {\n\t\t\temail: Config.mobileServerUsername,\n\t\t\tpassword: Config.mobileServerPassword,\n\t\t};\n\t};\n\n\tMobileServerBridge.prototype.socketConnectHandler = function() {\n\t\tMobileServerBridgeBase.prototype.socketConnectHandler.call(this);\n\t\tthis.tryToSend(Constants.MESSAGE, {\n\t\t\ttarget: {\n\t\t\t\tclient: 'mobile',\n\t\t\t},\n\t\t\tcontent: {\n\t\t\t\taction: Constants.SET_CURRENT_SLIDE_INDEX,\n\t\t\t\tcurrentSlideIndex: this.presentation.currentSlideIndex\n\t\t\t}\n\t\t});\n\t};\n\n\tMobileServerBridge.prototype.currentSlideIndexChanged = function(currentSlideIndex) {\n\t\tthis.tryToSend(Constants.MESSAGE, {\n\t\t\ttarget: {\n\t\t\t\tclient: 'mobile',\n\t\t\t},\n\t\t\tcontent: {\n\t\t\t\taction: Constants.SET_CURRENT_SLIDE_INDEX,\n\t\t\t\tcurrentSlideIndex: currentSlideIndex\n\t\t\t}\n\t\t});\n\t};\n\n\treturn MobileServerBridge;\n\n})();\n","module.exports = (function(){\n\n  var path = requireNode('path');\n\n  var PresentationBase = require('shared/Presentation');\n\n  var Constants = require('Constants');\n  var Config = require('./config');\n\n  var ChildApp = require('./childapps/ChildApp');\n  var MobileServerBridge = require('./MobileServerBridge');\n\n  var SlideBridge = require('./SlideBridge');\n\n  var KEYCODE_LEFT = 37;\n  var KEYCODE_RIGHT = 39;\n\n  function Presentation(data, role, settings) {\n    if(settings) {\n      for(var key in settings) {\n        Config[key] = settings[key];\n      }\n    }\n    PresentationBase.call(this, data, 'presentation');\n\n    window.onbeforeunload = this.closeHandler.bind(this);\n\n    this.elevatorMusicPlaying = false;\n    this.elevatorMusic = false;\n\n    $('#consoleModal').on('show.bs.modal', function (e) {\n      var w = $('#consoleModal iframe')[0].contentWindow;\n      w.postMessage('consoleModalOpen', 'http://localhost:3000');\n    });\n\n    this.elevatorMusic = $('#elevatormusic')[0];\n    $('.elevator-button').on('click', $.proxy(this.toggleElevatorMusic, this));\n\n    $('.info .ip').text('bbridges.herokuapp.com');\n\n    $(window).on('keydown', $.proxy(this.keydownHandler, this));\n    bean.on(this, Constants.SET_CURRENT_SLIDE_INDEX, this.currentSlideIndexChangedHandler.bind(this));\n\n    //forward childapp messages\n    ChildApp.getInstance().on('stdout-data', this.childAppDataHandler.bind(this));\n    ChildApp.getInstance().on('stderr-data', this.childAppErrorHandler.bind(this));\n\n    $('body').on(Constants.GO_TO_PREVIOUS_SLIDE, this.goToPreviousSlide.bind(this));\n    $('body').on(Constants.GO_TO_NEXT_SLIDE, this.goToNextSlide.bind(this));\n    $('body').on(Constants.OPEN_COMMAND_LINE, this.openCommandLine.bind(this));\n    $('body').on(Constants.OPEN_CAMERA, this.openCamera.bind(this));\n  }\n\n  Presentation.prototype = Object.create(PresentationBase.prototype);\n\n  Presentation.prototype.closeHandler = function(e) {\n    if(ChildApp.getInstance().isRunning()) {\n      ChildApp.getInstance().stop(function(){\n        console.log('Presentation: childapp stopped');\n        requireNode('remote').getCurrentWindow().close();\n      });\n      return false;\n    }\n  };\n\n  Presentation.prototype.currentSlideIndexChangedHandler = function(slideIndex) {\n    console.log('Presentation: currentSlideIndexChangedHandler');\n    if(ChildApp.getInstance().isRunning()) {\n      ChildApp.getInstance().stop(function(){\n        console.log('Presentation: childapp stopped');\n      });\n    }\n  };\n\n  Presentation.prototype.createMobileServerBridge = function() {\n    return new MobileServerBridge(this, Config.mobileServerUrl);\n  };\n\n  Presentation.prototype.toggleElevatorMusic = function() {\n    this.elevatorMusicPlaying = !this.elevatorMusicPlaying;\n    if(this.elevatorMusicPlaying) {\n      this.elevatorMusic.play();\n    } else {\n      this.elevatorMusic.pause();\n    }\n  };\n\n  Presentation.prototype.createSlideHolders = function() {\n    for(var i = 0; i < this.numSlideHolders; i++) {\n      var $slideHolder = $('<div class=\"slide-frame\" />');\n      this.slideHolders.push($slideHolder);\n      $('#presentation').append($slideHolder);\n    }\n  };\n\n  //prepend urls with file:/// (faster?)\n  Presentation.prototype.processSlideSrc = function(src) {\n    src = 'file:///' + path.resolve('./presentation/' + src);\n    src = src.replace(/\\\\/g,\"/\");\n    return src;\n  };\n\n  Presentation.prototype.createSlideBridges = function(data) {\n    PresentationBase.prototype.createSlideBridges.call(this, data);\n    var that = this;\n    var $slideMenu = $('#slideMenu');\n    var numSlideBridges = this.slideBridges.length;\n    for(var i = 0; i < numSlideBridges; i++) {\n      var slideBridge = this.slideBridges[i];\n      $slideMenu.append('<li><a href=\"#\" data-slidenr=\"' + i + '\">' + (i + 1) + ' ' + slideBridge.name + '</a></li>');\n    }\n    $slideMenu.find('a').on('click', function(event){\n      event.preventDefault();\n      that.setCurrentSlideIndex(parseInt($(this).data('slidenr')));\n    });\n  };\n\n  Presentation.prototype.createSlideBridge = function(slide) {\n    //use our own bridge to webviews\n    return new SlideBridge(slide);\n  };\n\n  Presentation.prototype.attachToSlideHolder = function(slideHolder, slideBridge, src) {\n    //listen for events on this slideHolder\n    $(slideHolder).off('message-from-slide');\n    $(slideHolder).on('message-from-slide', (function(event, message) {\n      this.slideMessageHandler({data: message});\n    }).bind(this));\n    PresentationBase.prototype.attachToSlideHolder.call(this, slideHolder, slideBridge, src);\n  };\n\n  Presentation.prototype.slideMessageHandler = function(event) {\n    PresentationBase.prototype.slideMessageHandler.call(this, event);\n    if(!event.data) {\n      return;\n    }\n    switch(event.data.action) {\n      case Constants.GO_TO_PREVIOUS_SLIDE:\n        this.goToPreviousSlide();\n        break;\n      case Constants.GO_TO_NEXT_SLIDE:\n        this.goToNextSlide();\n        break;\n      case Constants.OPEN_COMMAND_LINE:\n        this.openCommandLine();\n        break;\n      case Constants.OPEN_CAMERA:\n        this.openCamera();\n        break;\n      case Constants.CHILD_APP_SAVE_CODE:\n        ChildApp.getInstance().saveCode(event.data.code, event.data.type);\n        break;\n      case Constants.CHILD_APP_RUN_CODE:\n        ChildApp.getInstance().runCode(event.data.code, event.data.type);\n        break;\n    }\n  };\n\n  Presentation.prototype.keydownHandler = function(event) {\n    var self = this;\n    //one frame delay\n    requestAnimationFrame(function(){\n      if(event.isImmediatePropagationStopped()) {\n        return;\n      }\n      switch(event.keyCode) {\n        case KEYCODE_LEFT:\n          self.goToPreviousSlide();\n          break;\n        case KEYCODE_RIGHT:\n          self.goToNextSlide();\n          break;\n      }\n    });\n  };\n\n  Presentation.prototype.childAppDataHandler = function(data) {\n    var currentSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex);\n    if(currentSlideBridge) {\n      currentSlideBridge.tryToPostMessage({\n        action: Constants.CHILD_APP_STDOUT_DATA,\n        data: data\n      });\n    }\n  };\n\n  Presentation.prototype.childAppErrorHandler = function(data) {\n    var currentSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex);\n    if(currentSlideBridge) {\n      currentSlideBridge.tryToPostMessage({\n        action: Constants.CHILD_APP_STDERR_DATA,\n        data: data\n      });\n    }\n  };\n\n  Presentation.prototype.openCommandLine = function() {\n    $('#consoleModal').modal('show');\n  };\n\n  Presentation.prototype.openCamera = function() {\n    $('#webcamModal').modal('show');\n  };\n\n  Presentation.prototype.handleMobileServerMessage = function(message) {\n    if(message.content) {\n      if(message.content.action === 'goToNextSlide') {\n        this.goToNextSlide();\n      } else if(message.content.action === 'goToPreviousSlide') {\n        this.goToPreviousSlide();\n      }\n    }\n  };\n\n  return Presentation;\n\n})();\n","module.exports = (function(){\n\n  //Extend the shared class\n  var SharedSlideBridge = require('shared/SlideBridge');\n\n  function SlideBridge(data) {\n    SharedSlideBridge.call(this, data);\n  }\n\n  SlideBridge.prototype = Object.create(SharedSlideBridge.prototype);\n\n  SlideBridge.prototype.attachToSlideHolder = function(slideHolder, src, cb) {\n    this.slideHolder = slideHolder;\n    //notify the content it is being cleared\n    this.tryToPostMessage({action: 'destroy'});\n    //clear the current content\n    this.slideHolder.innerHTML = '';\n    $(slideHolder).off('load');\n    $(slideHolder).attr('data-name', this.name);\n    $(slideHolder).addClass('loading');\n    if(src !== $(slideHolder).attr('data-src')) {\n      console.log('not loaded yet', src);\n      //create html import\n      var $importEl = $('<link rel=\"import\">');\n      var importEl = $importEl[0];\n      console.log('bind load', src);\n      $importEl.on('load', (function(){\n        console.log('loaded', src);\n        var template = importEl.import.querySelector('template');\n        if(template) {\n          var clone = document.importNode(template.content, true);\n          this.slideHolder.appendChild(clone);\n        }\n        $importEl.remove();\n        $(slideHolder).removeClass('loading');\n        this.tryToPostMessage({\n          action: 'setState',\n          state: this.state\n        });\n        cb();\n      }).bind(this));\n      $(slideHolder).html($importEl);\n      $importEl.attr('href', src);\n      $(slideHolder).attr('data-src', src);\n    }\n  };\n\n  SlideBridge.prototype.tryToPostMessage = function(message) {\n    if(!this.slideHolder)\n    {\n      return;\n    }\n    //trigger with jquery\n    $(this.slideHolder).trigger('message-to-slide', message);\n  };\n\n  return SlideBridge;\n})();\n","var Config = require('../config'),\n\tevents = requireNode('events'),\n\tfs = requireNode('fs'),\n\tchildProcess = requireNode('child_process'),\n\tutil = requireNode('util'),\n\tpath = requireNode('path');\n\n//kill entire process tree\n//http://krasimirtsonev.com/blog/article/Nodejs-managing-child-processes-starting-stopping-exec-spawn\nvar kill = function (pid, signal, callback) {\n\tsignal = signal || 'SIGKILL';\n\tcallback = callback || function () {};\n\t//var isWin = /^win/.test(process.platform);\n\tvar isWin = true;\n\tif(!isWin) {\n\t\tvar psTree = requireNode('ps-tree');\n\t\tvar killTree = true;\n\t\tif(killTree) {\n\t\t\tpsTree(pid, function (err, children) {\n\t\t\t\t[pid].concat(\n\t\t\t\t\tchildren.map(function (p) {\n\t\t\t\t\t\treturn p.PID;\n\t\t\t\t\t})\n\t\t\t\t).forEach(function (tpid) {\n\t\t\t\t\ttry { process.kill(tpid, signal); }\n\t\t\t\t\tcatch (ex) { }\n\t\t\t\t\t});\n\t\t\t\t\tcallback();\n\t\t\t});\n\t\t} else {\n\t\t\ttry { process.kill(pid, signal); }\n\t\t\tcatch (ex) { }\n\t\t\tcallback();\n\t\t}\n\t} else {\n\t\tchildProcess.exec('taskkill /PID ' + pid + ' /T /F', function (error, stdout, stderr) {\n\t\t\tcallback();\n\t\t});\n\t}\n};\n\nfunction ChildApp() {\n\tevents.EventEmitter.call(this);\n\tconsole.log(\"[ChildApp] constructor\");\n\tthis.runner = false;\n}\n\nutil.inherits(ChildApp, events.EventEmitter);\n\nChildApp.getInstance = function() {\n\tif(!ChildApp.instance) {\n\t\tChildApp.instance = new ChildApp();\n\t}\n\treturn ChildApp.instance;\n};\n\nChildApp.prototype.saveCode = function(code, type, cb) {\n\t//if code is running, stop it\n\tif(this.runner) {\n\t\tthis.stop(this.saveCode.bind(this, code, type, cb));\n\t} else {\n\t\tvar filePath = Config.childNodeAppFilePath;\n\t\tif(type === 'tessel') {\n\t\t\tfilePath = Config.childTesselAppFilePath;\n\t\t}\n\t\t//create folder / file if needed\n\t\tfs.writeFile(filePath, code, function(err) {\n\t\t\t\tif(err) {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(\"[ChildApp] The file was saved!\");\n\t\t\t\t\t\tif(cb) {\n\t\t\t\t\t\t\tcb();\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t});\n\t}\n};\n\nChildApp.prototype.runCode = function(code, type) {\n\tconsole.log(\"[ChildApp] runCode\");\n\t//write code to file & run it\n\tthis.saveCode(code, type, (function(){\n\t\t//run the code\n\t\tif(type === 'tessel') {\n      this.cwd = path.dirname(Config.childTesselAppFilePath);\n      this.numDataEventsReceived = 0;\n\t\t\tthis.runner = childProcess.spawn(\"tessel\", [\"run\", Config.childTesselAppFilePath], {cwd: this.cwd});\n\t\t} else {\n      this.cwd = path.dirname(Config.childNodeAppFilePath);\n      this.numDataEventsReceived = 0;\n\t\t\t//this.runner = process.spawn(\"node\", [Config.childNodeAppFilePath], {cwd: path.dirname(Config.childNodeAppFilePath)});\n\t\t\tthis.runner = childProcess.spawn(\"cmd\", [\"nvmw\", \"use\", \"iojs-v2.3.1\"], {cwd: this.cwd});\n\t\t\tsetTimeout((function(){\n\t\t\t\t//execute first command\n\t\t\t\tthis.runner.stdin.write(\"node \" + Config.childNodeAppFilePath + \"\\n\");\n\t\t\t}).bind(this), 500);\n\t\t}\n\t\tthis.runner.stdout.on('data', this.onRunnerData.bind(this));\n\t\tthis.runner.stderr.on('data', this.onRunnerError.bind(this));\n\t\tthis.runner.on('disconnect', this.onDisconnect.bind(this));\n\t\tthis.runner.on('close', this.onClose.bind(this));\n\t\tthis.runner.on('exit', this.onExit.bind(this));\n\t}).bind(this));\n};\n\nChildApp.prototype.isRunning = function() {\n\treturn (this.runner !== false);\n};\n\nChildApp.prototype.stop = function(cb) {\n\tif(this.runner) {\n\t\tconsole.log(\"[ChildApp] execute stop\");\n\t\tconsole.log(this.runner.pid);\n\t\tthis.runner.stdout.removeAllListeners();\n\t\tthis.runner.stderr.removeAllListeners();\n\t\tthis.runner.stdin.end();\n\t\t//listen for runner events and execute callbacks\n\t\tvar cbCalled = false;\n\t\tthis.runner.on('disconnect', function(){\n\t\t\tif(cb && !cbCalled)\n\t\t\t{\n\t\t\t\tcb();\n\t\t\t}\n\t\t});\n\t\tthis.runner.on('close', function(){\n\t\t\tif(cb && !cbCalled)\n\t\t\t{\n\t\t\t\tcb();\n\t\t\t}\n\t\t});\n\t\tthis.runner.on('exit', function(){\n\t\t\tif(cb && !cbCalled)\n\t\t\t{\n\t\t\t\tcb();\n\t\t\t}\n\t\t});\n\t\tkill(this.runner.pid);\n\t\tthis.runner = false;\n\t} else {\n\t\tif(cb) {\n\t\t\tcb();\n\t\t}\n\t}\n};\n\nChildApp.prototype.onRunnerData = function(data) {\n  this.numDataEventsReceived++;\n  if(this.numDataEventsReceived < 3) {\n    //ignore the first two messages\n    return;\n  }\n  data = data.toString().trim();\n  if(data.indexOf(this.cwd) === 0) {\n    data = data.substr(this.cwd.length);\n    if(data.length === 1) {\n      return;\n    }\n  }\n\tthis.emit('stdout-data', data);\n};\n\nChildApp.prototype.onRunnerError = function(error) {\n\tthis.emit('stderr-data', error.toString().trim());\n};\n\nChildApp.prototype.onDisconnect = function() {\n\tconsole.log('[ChildApp] runner disconnected');\n\tthis.runner = false;\n};\n\nChildApp.prototype.onClose = function() {\n\tconsole.log('[ChildApp] runner closed');\n\tthis.runner = false;\n};\n\nChildApp.prototype.onExit = function() {\n\tconsole.log('[ChildApp] runner exited');\n\tthis.runner = false;\n};\n\nmodule.exports = ChildApp;\n","module.exports = (function(){\n\n\tvar path = requireNode('path');\n\n\tif(!global.Config) {\n\t\tglobal.Config = {};\n\n\t\t// Retrieve local ip for Config\n\t\tvar ip = '127.0.0.1', ifaces = requireNode('os').networkInterfaces();\n\t\tfor (var dev in ifaces) {\n\t\t\tif(dev.indexOf('bridge') !== 0) {\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tifaces[dev].forEach(function(details) {\n\t\t\t\t\tif (details.family === 'IPv4') {\n\t\t\t\t\t\tip = details.address;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t/* jshint ignore:end */\n\t\t\t}\n\t\t}\n\n\t\tglobal.Config.childNodeAppFilePath = path.resolve('./child-app/node/app.js');\n\t\tglobal.Config.childTesselAppFilePath = path.resolve('./child-app/tessel/app.js');\n\t\tglobal.Config.ip = ip;\n\n\t\tglobal.Config.mobileServerUrl = \"\";\n\t\tglobal.Config.mobileServerUsername = \"\";\n\t\tglobal.Config.mobileServerPassword = \"\";\n\n\t}\n\n\treturn global.Config;\n\n})();\n","module.exports = (function(){\n\n\tvar SharedContentBase = require('shared/ContentBase');\n\n\tfunction ContentBase($slideHolder) {\n\t\tthis.$slideHolder = $slideHolder;\n\t\tthis.src = $slideHolder.attr('data-src');\n\t\tSharedContentBase.call(this, $slideHolder.attr('data-name'));\n\t}\n\n\tContentBase.prototype = Object.create(SharedContentBase.prototype);\n\n\tContentBase.prototype.startListeningForMessages = function() {\n\t\t//we work with jquery events to message to / from DOM nodes\n\t\tthis._slideHolderMessageToSlildeHandler = this.slideHolderMessageToSlildeHandler.bind(this);\n\t\tthis.$slideHolder.on('message-to-slide', this._slideHolderMessageToSlildeHandler);\n\t};\n\n\tContentBase.prototype.stopListeningForMessages = function() {\n\t\tthis.$slideHolder.off('message-to-slide', this._slideHolderMessageToSlildeHandler);\n\t};\n\n\tContentBase.prototype.slideHolderMessageToSlildeHandler = function(event, message) {\n\t\tthis.receiveMessage({data: message});\n\t};\n\n\tContentBase.prototype.postMessage = function(data) {\n\t\tthis.$slideHolder.trigger('message-from-slide', data);\n\t};\n\n\treturn ContentBase;\n\n})();\n","module.exports = (function(){\n\n  var self;\n\n\tfunction CodeElement(el) {\n    self = this;\n\t\tthis.el = el;\n\t\tthis.$el = $(el);\n\t\t//wrap element in a container\n\t\tthis.$wrapperEl = $(el).wrap('<div class=\"live-code-element live-code-code-element\"></div>').parent();\n\t\tthis.wrapperEl = this.$wrapperEl[0];\n\n\t\tthis.id = this.$el.attr('data-id');\n\t\tif(!this.id)\n\t\t{\n\t\t\t//generate id\n\t\t\tthis.id = 'code-' + Math.round(Math.random() * 1000 * new Date().getTime());\n\t\t\tthis.$el.attr('data-id', this.id);\n\t\t}\n\n\t\tthis.runtime = this.$el.data('runtime');\n\t\tif(!this.runtime)\n\t\t{\n\t\t\tthis.runtime = 'browser';\n\t\t}\n\n\t\tthis.console = this.$el.data('console');\n\t\tthis.processor = this.$el.data('processor');\n\n\t\t//language is programming language - used for injecting in html\n\t\tthis.language = this.$el.data('language');\n\t\tif(!this.language)\n\t\t{\n\t\t\t//default to javascript\n\t\t\tthis.language = \"javascript\";\n\t\t}\n\n\t\t//mode is mode for codemirror\n\t\tthis.mode = this.$el.data('mode');\n\t\tif(!this.mode)\n\t\t{\n\t\t\t//default to the language\n\t\t\tthis.mode = this.language;\n\t\t}\n\n\t\tthis.codeMirror = CodeMirror.fromTextArea(this.el, {\n\t\t\tlineNumbers: true,\n\t\t\tmode: this.mode,\n\t\t\textraKeys: {\"Ctrl-Space\": \"autocomplete\"}\n\t\t});\n\n\t\tthis.$el.css('width', '100%').css('height', '100%');\n\t\tthis.layout();\n\n    //disable keyboard bubbling up\n    $(window).on('keydown', this.keyDownHandler);\n\t}\n\n  CodeElement.prototype.keyDownHandler = function(e) {\n    //cancel if code mirror has focus\n    var type = \"\" + Object.prototype.toString.call(event.target);\n    if(type.toLowerCase().indexOf('textarea') > -1){\n      e.stopImmediatePropagation();\n    }\n  };\n\n\tCodeElement.prototype.destroy = function() {\n    $(window).off('keydown', this.keyDownHandler);\n\t};\n\n\tCodeElement.prototype.getValue = function() {\n\t\treturn this.codeMirror.getValue();\n\t};\n\n\tCodeElement.prototype.layout = function() {\n\t\tthis.$wrapperEl.find('.CodeMirror-scroll').css('max-height', this.$wrapperEl.css('height'));\n\t\tthis.codeMirror.refresh();\n\t};\n\n\treturn CodeElement;\n})();\n","module.exports = (function(){\n\n  function ConsoleElement(el) {\n    this.el = el;\n    this.$el = $(el);\n    //wrap element in a container\n    this.$wrapperEl = $(el).wrap('<div class=\"live-code-element live-code-console-element unreset\"></div>').parent();\n    this.wrapperEl = this.$wrapperEl[0];\n\n    this.id = this.$el.attr('data-id');\n    if(!this.id)\n    {\n      //generate id\n      this.id = 'code-' + Math.round(Math.random() * 1000 * new Date().getTime());\n      this.$el.attr('data-id', this.id);\n    }\n\n    this.$el.css('width', '100%').css('height', '100%');\n\n    this.logs = [];\n  }\n\n  ConsoleElement.prototype.destroy = function() {\n  };\n\n  function htmlEscape(str) {\n    return String(str).replace(/&/g, '&amp;')\n      .replace(/\\\"/g, '&quot;')\n      .replace(/'/g, '&#39;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;');\n  }\n\n  function needsJSONConversion(arg) {\n    if(\n      typeof arg === 'number' ||\n      typeof arg === 'string' ||\n      typeof arg === 'boolean'\n    ) {\n      return false;\n    }\n    return true;\n  }\n\n  ConsoleElement.prototype.info = function(args) {\n    var str = '';\n    args.forEach(function(arg){\n      if(str.length > 0) {\n        str += ' ';\n      }\n      //is it an object or a simple type?\n      if(needsJSONConversion(arg)) {\n        arg = JSON.stringify(arg);\n      }\n      str += htmlEscape(arg);\n    });\n    this.logs.push('<pre>' + str + '</pre>');\n    while(this.logs.length > 20) {\n      this.logs.shift();\n    }\n    var html = this.logs.join('');\n    this.el.innerHTML = html;\n    this.wrapperEl.scrollTop = this.wrapperEl.scrollHeight;\n  };\n\n  ConsoleElement.prototype.error = function(args) {\n    var str = '';\n    args.forEach(function(arg){\n      if(str.length > 0) {\n        str += ' ';\n      }\n      //is it an object or a simple type?\n      if(needsJSONConversion(arg)) {\n        arg = JSON.stringify(arg);\n      }\n      str += htmlEscape(arg);\n    });\n    this.logs.push('<pre class=\"console-error\">' + str + '</pre>');\n    while(this.logs.length > 20) {\n      this.logs.shift();\n    }\n    var html = this.logs.join('');\n    this.el.innerHTML = html;\n    this.wrapperEl.scrollTop = this.wrapperEl.scrollHeight;\n  };\n\n  return ConsoleElement;\n})();\n","module.exports = (function(){\n\n\tfunction WebPreviewElement(el) {\n\t\tthis.el = el;\n\t\tthis.$el = $(el);\n\t\t//wrap element in a container\n\t\tthis.$wrapperEl = $(el).wrap('<div class=\"live-code-element live-code-web-preview-element\"></div>').parent();\n\t\tthis.wrapperEl = this.$wrapperEl[0];\n\n\t\tthis.id = this.$el.attr('data-id');\n\t\tif(!this.id)\n\t\t{\n\t\t\t//generate id\n\t\t\tthis.id = 'code-' + Math.round(Math.random() * 1000 * new Date().getTime());\n\t\t\tthis.$el.attr('data-id', this.id);\n\t\t}\n\n\t\tthis.console = this.$el.data('console');\n\n\t\tthis.$el.css('width', '100%').css('height', '100%');\n\t}\n\n\tWebPreviewElement.prototype.destroy = function() {\n\t};\n\n  WebPreviewElement.prototype.stop = function() {\n    if(this.webview) {\n      this.webview.parentNode.removeChild(this.webview);\n      this.webview = false;\n    }\n  };\n\n\tWebPreviewElement.prototype.updateCode = function(blocks) {\n\t\t//create a webview tag\n\t\tif(this.webview) {\n\t\t\tthis.webview.parentNode.removeChild(this.webview);\n\t\t\tthis.webview = false;\n\t\t}\n\t\tthis.webview = document.createElement('webview');\n\t\tthis.webview.style.width = '100%';\n\t\tthis.webview.style.height = '100%';\n\t\tthis.el.appendChild(this.webview);\n\n\t\tvar htmlSrc = '';\n\t\t//add some extra javascript to the htmlSrc to forward console logs\n\t\thtmlSrc += \"<script>\\n\";\n\t\thtmlSrc += \"console.log = function(){\\n\";\n\t\thtmlSrc += \"args = [];\\n\";\n\t\thtmlSrc += \"[].forEach.call(arguments, function(argument){\\n\";\n\t\thtmlSrc += \"args.push(argument);\\n\";\n\t\thtmlSrc += \"});\\n\";\n\t\thtmlSrc += \"require('ipc').sendToHost('console.log', JSON.stringify({args: args}));\\n\";\n\t\thtmlSrc += \"}\\n\";\n\t\thtmlSrc += \"console.error = function(){\\n\";\n\t\thtmlSrc += \"args = [];\\n\";\n\t\thtmlSrc += \"[].forEach.call(arguments, function(argument){\\n\";\n\t\thtmlSrc += \"args.push(argument);\\n\";\n\t\thtmlSrc += \"});\\n\";\n\t\thtmlSrc += \"require('ipc').sendToHost('console.error', JSON.stringify({args: args}));\\n\";\n\t\thtmlSrc += \"}\\n\";\n\t\thtmlSrc += \"</script>\";\n\t\tfor(var i = 0; i < blocks.length; i++)\n\t\t{\n\t\t\thtmlSrc += blocks[i].code;\n\t\t}\n\n\t\tthis.webview.addEventListener(\"dom-ready\", (function(){\n      if(this.$el.attr('data-open-devtools')) {\n        this.webview.openDevTools();\n      }\n\t\t}).bind(this));\n\n\t\tthis.webview.addEventListener('ipc-message', (function(event) {\n\t\t\tif(event.channel === 'request-html')\n\t\t\t{\n\t\t\t\tthis.webview.send('receive-html', htmlSrc);\n\t\t\t}\n\t\t\telse if(event.channel === 'console.log')\n\t\t\t{\n\t\t\t\t//notify live code editor\n\t\t\t\tthis.$wrapperEl.trigger('console.log', event.args[0]);\n\t\t\t}\n\t\t\telse if(event.channel === 'console.error')\n\t\t\t{\n\t\t\t\t//notify live code editor\n\t\t\t\tthis.$wrapperEl.trigger('console.error', event.args[0]);\n\t\t\t}\n\t\t}).bind(this));\n\n\t\tthis.webview.setAttribute('nodeintegration', '');\n\t\tthis.webview.setAttribute('src', 'webpreview.html');\n\t};\n\n\treturn WebPreviewElement;\n})();\n","(function(){\n\n\tvar Presentation = require('./classes/Presentation');\n\n  function init() {\n  \tif($('#presentation').length > 0) {\n      initPresentation();\n  \t}\n  }\n\n  function initPresentation() {\n    function getSettings(cb) {\n      $.getJSON('../settings.json')\n      .done(function(result){\n        settings = result;\n        cb();\n      })\n      .error(function(err){\n        cb();\n      });\n    }\n\n    function getData(cb) {\n      $.getJSON('../data.json')\n      .done(function(result){\n        console.log(\"data result\");\n        data = result;\n        cb();\n      })\n      .error(function(err){\n        cb();\n      });\n    }\n\n    var settings = {};\n    var data = {};\n\n    getSettings(getData.bind(this, function(){\n      new Presentation(data, 'presentation', settings);\n    }));\n\n  }\n\n\tinit();\n\n})();\n","module.exports = (function(){\n\n\tvar Constants = {\n\t\tGO_TO_PREVIOUS_SLIDE : 'goToPreviousSlide',\n\t\tGO_TO_NEXT_SLIDE : 'goToNextSlide',\n\t\tSET_SLIDES : 'setSlides',\n\t\tSET_CURRENT_SLIDE_INDEX : 'setCurrentSlideIndex',\n\n\t\tMESSAGE : 'message',\n\t\tSOCKET_SEND : 'socketSend',\n\t\tSOCKET_RECEIVE : 'socketReceive',\n\t\tJOIN_SLIDE_ROOM : 'joinSlideRoom',\n\t\tLEAVE_SLIDE_ROOM : 'leaveSlideRoom',\n\n\t\tROLE_PRESENTATION : 'presentation',\n\t\tROLE_MOBILE : 'mobile',\n\n\t\tSTATE_ACTIVE : 'active',\n\t\tSTATE_INACTIVE : 'inactive',\n\n\t\tSET_SUBSTATE : 'setSubstate',\n\n\t\tCHILD_APP_SAVE_CODE : 'childAppSaveCode',\n\t\tCHILD_APP_RUN_CODE : 'childAppRunCode',\n\t\tCHILD_APP_STDOUT_DATA : 'childAppStdoutData',\n\t\tCHILD_APP_STDERR_DATA : 'childAppStderrData',\n\n\t\tOPEN_COMMAND_LINE: 'openCommandLine',\n\t\tOPEN_CAMERA: 'openCamera',\n\n    SET_TEAM : 'setTeam',\n    UPDATE_MOTION : 'updateMotion',\n\n    YOU_WIN : 'youWin',\n    YOU_LOSE : 'youLose',\n\n    SHAKE_YOUR_PHONES_INTRO : 'shakeYourPhonesIntro',\n    SHAKE_YOUR_PHONES_GAME : 'shakeYourPhonesGame',\n    SHAKE_YOUR_PHONES_FINISHED : 'shakeYourPhonesFinished',\n\n    SHAKE_YOUR_PHONES_CLIENT_ADDED : 'shakeYourPhonesClientAdded',\n    SHAKE_YOUR_PHONES_CLIENT_REMOVED : 'shakeYourPhonesClientRemoved',\n    SHAKE_YOUR_PHONES_CLIENT_LIST : 'shakeYourPhonesClientList',\n    SHAKE_YOUR_PHONES_CLIENT_UPDATE : 'shakeYourPhonesClientUpdate'\n\t};\n\n\treturn Constants;\n\n})();\n","module.exports = (function(){\n\n  var Constants = require('Constants');\n\n  function ContentBase(name) {\n    this.name = name;\n    this.fps = 60;\n    this._animationFrameId = false;\n    this._currentTime = 0;\n    this._delta = 0;\n    this._interval = false;\n    this._lastTime = new Date().getTime();\n    this.currentFrame = 0;\n\n    this.startListeningForMessages();\n\n    this.__drawLoop = this._drawLoop.bind(this);\n    this._interval = 1000 / this.fps;\n  }\n\n  ContentBase.prototype.startListeningForMessages = function() {\n    this._receiveMessage = this.receiveMessage.bind(this);\n    window.addEventListener(\"message\", this._receiveMessage, false);\n  };\n\n  ContentBase.prototype.stopListeningForMessages = function() {\n    window.removeEventListener('message', this._receiveMessage);\n  };\n\n  ContentBase.prototype.receiveMessage = function(event) {\n    if(!event.data) {\n      return;\n    }\n    switch(event.data.action) {\n      case 'setState':\n        this.setState(event.data.state);\n        break;\n      case 'destroy':\n        this.destroy();\n        break;\n      case Constants.SOCKET_RECEIVE:\n        this.receiveSocketMessage(event.data.message);\n        break;\n      default:\n        this.handleMessage(event.data);\n        break;\n    }\n  };\n\n  ContentBase.prototype.destroy = function() {\n    console.log('destroy called', this.name);\n    this.stopListeningForMessages();\n    window.cancelAnimationFrame(this._animationFrameId);\n  };\n\n  ContentBase.prototype.postMessage = function(data) {\n    parent.postMessage(data, \"*\");\n  };\n\n  ContentBase.prototype.handleMessage = function(data) {\n  };\n\n  ContentBase.prototype.postSocketMessage = function(message) {\n    this.postMessage({\n      action: Constants.SOCKET_SEND,\n      message: message\n    });\n  };\n\n  ContentBase.prototype.receiveSocketMessage = function(message) {\n    //console.log('ContentBase.prototype.receiveSocketMessage ' + this.name, message);\n  };\n\n  ContentBase.prototype.setState = function(state) {\n    if(state !== this.state) {\n      this.state = state;\n      this.onStateChanged();\n      if(this.state === Constants.STATE_ACTIVE) {\n        this.currentFrame = 0;\n        this._drawLoop();\n      } else {\n        window.cancelAnimationFrame(this._animationFrameId);\n      }\n    }\n  };\n\n  ContentBase.prototype.onStateChanged = function() {\n  };\n\n  ContentBase.prototype._drawLoop = function() {\n    this._animationFrameId = window.requestAnimationFrame(this.__drawLoop);\n    this._currentTime = (new Date()).getTime();\n      this._delta = (this._currentTime - this._lastTime);\n      if(this._delta > this._interval) {\n        this.currentFrame++;\n        this.drawLoop(this._delta);\n        this._lastTime = this._currentTime - (this._delta % this._interval);\n      }\n  };\n\n  ContentBase.prototype.drawLoop = function(delta) {\n  };\n\n  return ContentBase;\n\n})();\n","module.exports = (function(){\n\n\tvar Constants = require('Constants');\n\n\tfunction MobileServerBridge(presentation, url) {\n\t\tthis.presentation = presentation;\n\t\tthis.url = url;\n\t\tthis.connect();\n\t}\n\n\tMobileServerBridge.prototype.connect = function() {\n\t\tconsole.log('MobileServerBridge.connect');\n\t\t$.post(this.url + '/login', this.getLoginCredentials()).done(this.loginHandler.bind(this))\n\t\t.fail((function() {\n\t\t\t//retry after one second\n\t\t\tsetTimeout((function(){\n\t\t\t\tthis.connect();\n\t\t\t}).bind(this), 1000);\n\t  }).bind(this));\n\t};\n\n\tMobileServerBridge.prototype.getLoginCredentials = function() {\n\t\treturn {};\n\t};\n\n\tMobileServerBridge.prototype.loginHandler = function(result) {\n\t\tthis.token = result.token;\n\t\tthis.socket = io(this.url, {\n\t\t\tquery: 'token=' + this.token,\n\t\t\treconnection: false,\n\t\t\tforceNew: true\n\t\t});\n\t\tthis.socket.on('connect', this.socketConnectHandler.bind(this));\n\t\tthis.socket.on('disconnect', this.socketDisconnectHandler.bind(this));\n\t\tthis.socket.on('message', this.socketMessageHandler.bind(this));\n\t};\n\n\tMobileServerBridge.prototype.socketConnectHandler = function() {\n\t\tconsole.log('MobileServerBridge.socketConnectHandler');\n\t\tthis.presentation.mobileServerBridgeConnected();\n\t};\n\n\tMobileServerBridge.prototype.socketDisconnectHandler = function() {\n\t\tthis.connect();\n\t};\n\n\tMobileServerBridge.prototype.tryToSend = function() {\n\t\tif(this.socket) {\n\t\t\tthis.socket.emit.apply(this.socket, arguments);\n\t\t}\n\t};\n\n\tMobileServerBridge.prototype.socketMessageHandler = function(message) {\n\t\tthis.presentation.mobileServerMessageHandler(message);\n\t};\n\n\treturn MobileServerBridge;\n})();","module.exports = (function(){\n\n  var Constants = require('Constants');\n  var SlideBridge = require('./SlideBridge');\n\n  /*\n   * data: json object with slides array property\n   * role: mobile or presentation\n   */\n  function Presentation(data, role) {\n    this.data = data;\n    this.role = role;\n    this.currentSlideIndex = -1;\n    this.slideHolders = [];\n    this.numSlideHolders = 3;\n    this.slideBridges = [];\n    this.slideBridgesBySlideName = {};\n\n    this.createSlideHolders();\n    this.createSlideBridges(this.data);\n\n    this.mobileServerBridge = this.createMobileServerBridge();\n    this.startListeningForMessages();\n\n    this.setCurrentSlideIndex(0);\n  }\n\n  Presentation.prototype.startListeningForMessages = function() {\n    window.addEventListener(\"message\", this.slideMessageHandler.bind(this), false);\n  };\n\n  Presentation.prototype.createSlideHolders = function() {\n    for(var i = 0; i < this.numSlideHolders; i++) {\n      var $slideHolder = $('<iframe class=\"slide-frame\" />');\n      this.slideHolders.push($slideHolder);\n      $('#presentation').append($slideHolder);\n    }\n  };\n\n  Presentation.prototype.createSlideBridges = function(data) {\n    var that = this;\n    var numSlides = data.slides.length;\n    for(var i = 0; i < numSlides; i++) {\n      var slideBridge = this.createSlideBridge(data.slides[i]);\n      this.slideBridges.push(slideBridge);\n      this.slideBridgesBySlideName[slideBridge.name] = slideBridge;\n    }\n  };\n\n  Presentation.prototype.createSlideBridge = function(slide) {\n    return new SlideBridge(slide);\n  };\n\n  Presentation.prototype.slideMessageHandler = function(event) {\n    if(!event.data) {\n      return;\n    }\n    switch(event.data.action) {\n      case Constants.SOCKET_SEND:\n        if(this.mobileServerBridge) {\n          this.mobileServerBridge.tryToSend(Constants.MESSAGE, event.data.message);\n        }\n        break;\n    }\n  };\n\n  Presentation.prototype.mobileServerBridgeConnected = function() {\n    //join the rooms of the slideHolders\n    for(var i = 0; i < this.numSlideHolders; i++) {\n      this.mobileServerBridge.tryToSend(Constants.JOIN_SLIDE_ROOM, $(this.slideHolders[i]).attr('data-name'));\n    }\n  };\n\n  Presentation.prototype.mobileServerMessageHandler = function(message) {\n    if(message.target.slide) {\n      //slide has to handle the message\n      var slideBridge = this.getSlideBridgeByName(message.target.slide);\n      if(slideBridge) {\n        slideBridge.tryToPostMessage({\n          action: Constants.SOCKET_RECEIVE,\n          message: message\n        });\n      }\n    } else {\n      //presentation has to handle the message\n      this.handleMobileServerMessage(message);\n    }\n  };\n\n  Presentation.prototype.handleMobileServerMessage = function(message) {\n    console.log('[shared/Presentation] handleMobileServerMessage', message);\n  };\n\n  Presentation.prototype.getSlideBridgeByIndex = function(index) {\n    if(index >= 0 && index < this.slideBridges.length) {\n      return this.slideBridges[index];\n    }\n    return false;\n  };\n\n  Presentation.prototype.getSlideBridgeByName = function(slideName) {\n    return this.slideBridgesBySlideName[slideName];\n  };\n\n  Presentation.prototype.getSlideHolderForSlide = function(slide, slidesNotToClear) {\n    if(slide) {\n      var $slideHolder = $('.slide-frame[data-name=\"' + slide.name + '\"]');\n      if($slideHolder.length > 0) {\n        return $slideHolder[0];\n      }\n      //get a free slideHolder\n      var slideNamesNotToClear = [];\n      $(slidesNotToClear).each(function(index, obj){\n        slideNamesNotToClear.push(obj.name);\n      });\n      var $slideHolders = $('.slide-frame');\n      for (var i = $slideHolders.length - 1; i >= 0; i--) {\n        $slideHolder = $($slideHolders[i]);\n        var name = $slideHolder.attr('data-name');\n        if(!name || slideNamesNotToClear.indexOf(name) === -1) {\n          return $slideHolder[0];\n        }\n      }\n    }\n    return false;\n  };\n\n  Presentation.prototype.goToPreviousSlide = function() {\n    this.setCurrentSlideIndex(this.currentSlideIndex - 1);\n  };\n\n  Presentation.prototype.goToNextSlide = function() {\n    this.setCurrentSlideIndex(this.currentSlideIndex + 1);\n  };\n\n  Presentation.prototype.setCurrentSlideIndex = function(value) {\n    value = Math.max(0, Math.min(value, this.slideBridges.length - 1));\n    if(value !== this.currentSlideIndex) {\n      this.currentSlideIndex = value;\n\n      var currentSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex);\n      var previousSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex - 1);\n      var nextSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex + 1);\n\n      //remove \"used\" class from slide holders\n      $('.slide-frame').removeAttr('data-used', false);\n\n      var currentSlideHolder = this.getSlideHolderForSlide(currentSlideBridge, [previousSlideBridge, nextSlideBridge]);\n      this.setupSlideHolder(currentSlideHolder, currentSlideBridge, Constants.STATE_ACTIVE, 0);\n\n      var previousSlideHolder = this.getSlideHolderForSlide(previousSlideBridge, [currentSlideBridge, nextSlideBridge]);\n      this.setupSlideHolder(previousSlideHolder, previousSlideBridge, Constants.STATE_INACTIVE, '-100%');\n\n      var nextSlideHolder = this.getSlideHolderForSlide(nextSlideBridge, [previousSlideBridge, currentSlideBridge]);\n      this.setupSlideHolder(nextSlideHolder, nextSlideBridge, Constants.STATE_INACTIVE, '100%');\n\n      //clear attributes of unused slide frames\n      $('.slide-frame').each(function(index, slideHolder){\n        if(!$(slideHolder).attr('data-used')) {\n          console.log('clear slide holder');\n          $(slideHolder).removeAttr('data-used').removeAttr('data-name').removeAttr('data-src');\n        }\n      });\n\n      //all other slideHolder bridges should be unlinked from their slideHolder\n      this.slideBridges.forEach(function(slideBridge){\n        if(slideBridge === currentSlideBridge) {\n          return;\n        }\n        if(slideBridge === previousSlideBridge) {\n          return;\n        }\n        if(slideBridge === nextSlideBridge) {\n          return;\n        }\n        slideBridge.slideHolder = null;\n      });\n\n      bean.fire(this, Constants.SET_CURRENT_SLIDE_INDEX, [this.currentSlideIndex]);\n    }\n  };\n\n  Presentation.prototype.setupSlideHolder = function(slideHolder, slideBridge, state, left) {\n    if(slideHolder) {\n      var src = \"slides/\" + slideBridge.name + '.html';\n      if(slideBridge.data[this.role] && slideBridge.data[this.role].url) {\n        src = slideBridge.data[this.role].url;\n      }\n      src = this.processSlideSrc(src);\n      if(slideBridge.isAlreadyCorrectlyAttached(slideHolder, src)) {\n        //console.log(slideBridge.name + ' already attached');\n      } else {\n        this.attachToSlideHolder(slideHolder, slideBridge, src);\n      }\n      slideBridge.setState(state);\n      $(slideHolder).css('left', left);\n      $(slideHolder).attr('data-used', 1);\n    }\n  };\n\n  Presentation.prototype.attachToSlideHolder = function(slideHolder, slideBridge, src) {\n    //leave previous channel of this slideHolder\n    if(this.mobileServerBridge) {\n      this.mobileServerBridge.tryToSend(Constants.LEAVE_SLIDE_ROOM, $(slideHolder).attr('data-name'));\n    }\n    //add the join as a callback for the onload event\n    slideBridge.attachToSlideHolder(slideHolder, src, this.slideLoaded.bind(this, slideHolder, slideBridge, src));\n  };\n\n  Presentation.prototype.slideLoaded = function(slideHolder, slideBridge) {\n    //join new channel\n    if(this.mobileServerBridge) {\n      this.mobileServerBridge.tryToSend(Constants.JOIN_SLIDE_ROOM, $(slideHolder).attr('data-name'));\n    }\n  };\n\n  Presentation.prototype.processSlideSrc = function(src) {\n    return src;\n  };\n\n  Presentation.prototype.createMobileServerBridge = function() {\n    //to implement in extending classes\n  };\n\n  return Presentation;\n\n})();\n","module.exports = (function(){\n\tfunction getIframeWindow(iframe_object) {\n\t\tvar doc;\n\n\t\tif (iframe_object.contentWindow) {\n\t\t\treturn iframe_object.contentWindow;\n\t\t}\n\n\t\tif (iframe_object.window) {\n\t\t\treturn iframe_object.window;\n\t\t}\n\n\t\tif (!doc && iframe_object.contentDocument) {\n\t\t\tdoc = iframe_object.contentDocument;\n\t\t}\n\n\t\tif (!doc && iframe_object.document) {\n\t\t\tdoc = iframe_object.document;\n\t\t}\n\n\t\tif (doc && doc.defaultView) {\n\t\t return doc.defaultView;\n\t\t}\n\n\t\tif (doc && doc.parentWindow) {\n\t\t\treturn doc.parentWindow;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tfunction SlideBridge(data) {\n\t\tthis.data = data;\n\t\tthis.name = this.data.name;\n\t}\n\n\tSlideBridge.prototype.isAlreadyCorrectlyAttached = function(slideHolder, src) {\n\t\treturn (this.slideHolder === slideHolder && $(slideHolder).attr('data-name') === this.name && $(slideHolder).attr('data-src') === src);\n\t};\n\n\tSlideBridge.prototype.attachToSlideHolder = function(slideHolder, src, cb) {\n\t\t//notify the content it is being cleared\n\t\tthis.tryToPostMessage({action: 'destroy'});\n\t\tthis.slideHolder = slideHolder;\n\t\t$(slideHolder).off('load');\n\t\t$(slideHolder).attr('data-name', this.name);\n\t\t$(slideHolder).addClass('loading');\n\t\tif(src !== $(slideHolder).attr('data-src')) {\n\t\t\t$(slideHolder).on('load', (function(event){\n\t\t\t\t$(slideHolder).removeClass('loading');\n\t\t\t\tthis.tryToPostMessage({\n\t\t\t\t\taction: 'setState',\n\t\t\t\t\tstate: this.state\n\t\t\t\t});\n\t\t\t\tcb();\n\t\t\t}).bind(this));\n\t\t\t$(slideHolder).attr('data-src', src);\n\t\t\t$(slideHolder).attr('src', src);\n\t\t}\n\t};\n\n\tSlideBridge.prototype.setState = function(state) {\n\t\tthis.state = state;\n\t\tthis.tryToPostMessage({\n\t\t\taction: 'setState',\n\t\t\tstate: this.state\n\t\t});\n\t};\n\n\tSlideBridge.prototype.tryToPostMessage = function(message) {\n\t\tif(!this.slideHolder) {\n\t\t\treturn;\n\t\t}\n\t\tvar w = getIframeWindow(this.slideHolder);\n\t\tif(w) {\n\t\t\tw.postMessage(message, \"*\");\n\t\t}\n\t};\n\n\treturn SlideBridge;\n})();\n","module.exports = (function(){\n  var ContentBase = require('../ContentBase');\n  var Constants = require('Constants');\n\n  var ConsoleElement = require('./ConsoleElement');\n  var CodeElement = require('./CodeElement');\n  var WebPreviewElement = require('./WebPreviewElement');\n\n  function LiveCode($slideHolder) {\n    ContentBase.call(this, $slideHolder);\n\n    //create the consoles\n    this.consoleElements = {};\n    this.$slideHolder.find('[data-type=\"console\"]').each((function(index, consoleEl){\n      this.createConsoleElement(consoleEl);\n    }).bind(this));\n\n    //create the previews\n    this.webPreviewElements = {};\n    this.$slideHolder.find('[data-type=\"web-preview\"]').each((function(index, webPreviewEl){\n      this.createWebPreviewElement(webPreviewEl);\n    }).bind(this));\n\n    //create the code editors\n    this.codeElements = {};\n    this.$slideHolder.find('[data-type=\"code\"]').each((function(index, codeEl){\n      this.createCodeElement(codeEl);\n    }).bind(this));\n\n    //create run buttons\n    this.runButtonEls = [];\n    this.$slideHolder.find('[data-type=\"run-button\"]').each((function(index, runButtonEl){\n      this.createRunButton(runButtonEl);\n    }).bind(this));\n  }\n\n  LiveCode.prototype = Object.create(ContentBase.prototype);\n\n  LiveCode.prototype.destroy = function() {\n    ContentBase.prototype.destroy.call(this);\n    var key;\n    for(key in this.consoleElements)\n    {\n      this.destroyConsoleElement(this.consoleElements[key]);\n    }\n    for(key in this.webPreviewElements)\n    {\n      this.destroyWebPreviewElement(this.webPreviewElements[key]);\n    }\n    for(key in this.codeElements)\n    {\n      this.destroyCodeElement(this.codeElements[key]);\n    }\n    for(key = 0; key < this.runButtonEls.length; key++)\n    {\n      this.destroyRunButton(this.runButtonEls[key]);\n    }\n  };\n\n  LiveCode.prototype.onStateChanged = function() {\n    //stop running apps when not active\n    if(this.state !== Constants.STATE_ACTIVE)\n    {\n      //stop the web previews\n      for(var key in this.webPreviewElements)\n      {\n        this.webPreviewElements[key].stop();\n      }\n      //node child apps get stopped in presentation\n    }\n  };\n\n  LiveCode.prototype.layout = function() {\n    //might be triggered after split pane resize or tab switch\n    //codemirror instances need to be updated\n    for(var key in this.codeElements)\n    {\n      this.codeElements[key].layout();\n    }\n  };\n\n  LiveCode.prototype.createConsoleElement = function(consoleEl) {\n    var consoleElement = new ConsoleElement(consoleEl);\n    this.consoleElements[consoleElement.id] = consoleElement;\n  };\n\n  LiveCode.prototype.destroyConsoleElement = function(consoleElement) {\n    consoleElement.destroy();\n  };\n\n  LiveCode.prototype.createWebPreviewElement = function(webPreviewEl) {\n    var webPreviewElement = new WebPreviewElement(webPreviewEl);\n    webPreviewElement.$wrapperEl.on('console.log', this.webPreviewConsoleLogHandler.bind(this, webPreviewElement));\n    webPreviewElement.$wrapperEl.on('console.error', this.webPreviewConsoleErrorHandler.bind(this, webPreviewElement));\n    this.webPreviewElements[webPreviewElement.id] = webPreviewElement;\n  };\n\n  LiveCode.prototype.destroyWebPreviewElement = function(webPreviewElement) {\n    webPreviewElement.$wrapperEl.off('console.log');\n    webPreviewElement.$wrapperEl.off('console.error');\n    webPreviewElement.destroy();\n  };\n\n  LiveCode.prototype.createCodeElement = function(codeEl) {\n    var codeElement = new CodeElement(codeEl);\n    this.codeElements[codeElement.id] = codeElement;\n  };\n\n  LiveCode.prototype.destroyCodeElement = function(codeElement) {\n    codeElement.destroy();\n  };\n\n  LiveCode.prototype.createRunButton = function(runButtonEl) {\n    this.runButtonEls.push(runButtonEl);\n    $(runButtonEl).on('click', (function(){\n      //run code in target element\n      if(this.codeElements[$(runButtonEl).data('target')]) {\n        this.runCode(this.codeElements[$(runButtonEl).data('target')]);\n      }\n    }).bind(this));\n  };\n\n  LiveCode.prototype.destroyRunButton = function(runButtonEl) {\n    $(runButtonEl).off('click');\n  };\n\n  LiveCode.prototype.runCode = function(codeElement) {\n    var code = codeElement.getValue();\n    //where do we run this code? nodejs or in browser?\n    if(codeElement.runtime === 'node')\n    {\n      //run as child-app\n      this.postMessage({\n        action: Constants.CHILD_APP_RUN_CODE,\n        code: code\n      });\n    }\n    else\n    {\n      //get the web preview element which is handling this code\n      var webPreviewElement = this.getWebPreviewElementForCodeElement(codeElement);\n      if(webPreviewElement)\n      {\n        this.updateWebPreviewElement(webPreviewElement);\n      }\n    }\n  };\n\n  LiveCode.prototype.handleMessage = function(message) {\n    var consoleElement;\n    if(message.action === Constants.CHILD_APP_STDOUT_DATA)\n    {\n      consoleElement = this.getConsoleElementForRuntime('node');\n      if(consoleElement)\n      {\n        consoleElement.info([message.data]);\n      }\n    }\n    else if(message.action === Constants.CHILD_APP_STDERR_DATA)\n    {\n      consoleElement = this.getConsoleElementForRuntime('node');\n      if(consoleElement)\n      {\n        consoleElement.error([message.data]);\n      }\n    }\n  };\n\n  LiveCode.prototype.webPreviewConsoleLogHandler = function(webPreviewElement, event, message) {\n    //get the console element for this web preview\n    var consoleElement = this.getConsoleElementForWebPreview(webPreviewElement);\n    if(consoleElement)\n    {\n      consoleElement.info(JSON.parse(message).args);\n    }\n  };\n\n  LiveCode.prototype.webPreviewConsoleErrorHandler = function(webPreviewElement, event, message) {\n    //get the console element for this web preview\n    var consoleElement = this.getConsoleElementForWebPreview(webPreviewElement);\n    if(consoleElement)\n    {\n      consoleElement.error(JSON.parse(message).args);\n    }\n  };\n\n  LiveCode.prototype.getConsoleElementForRuntime = function(runtime) {\n    //<textarea id=\"node-code\" data-type=\"code\" data-runtime=\"node\" data-console=\"node-console\" data-language=\"javascript\">\n    for(var key in this.codeElements)\n    {\n      var codeElement = this.codeElements[key];\n      if(codeElement.runtime === runtime && this.consoleElements[codeElement.console])\n      {\n        return this.consoleElements[codeElement.console];\n      }\n    }\n    return false;\n  };\n\n  LiveCode.prototype.getConsoleElementForWebPreview = function(webPreviewElement) {\n    return this.consoleElements[webPreviewElement.console];\n  };\n\n  LiveCode.prototype.getWebPreviewElementForCodeElement = function(codeElement) {\n    return this.webPreviewElements[codeElement.processor];\n  };\n\n  LiveCode.prototype.updateWebPreviewElement = function(webPreviewElement) {\n    //gather all the code for this element\n    var blocks = [];\n    for(var key in this.codeElements)\n    {\n      var codeElement = this.codeElements[key];\n      if(codeElement.processor === webPreviewElement.id)\n      {\n        var block = {\n          language: codeElement.language,\n          code: codeElement.getValue()\n        };\n        blocks.push(block);\n      }\n    }\n    webPreviewElement.updateCode(blocks);\n  };\n\n  LiveCode.prototype.saveClickHandler = function() {\n    var code = this.codeMirror.getValue();\n    this.postMessage({\n      action: Constants.CHILD_APP_SAVE_CODE,\n      code: code,\n      type: this.type\n    });\n    this.postMessage({\n      action: Constants.OPEN_COMMAND_LINE\n    });\n  };\n\n  LiveCode.prototype.runClickHandler = function() {\n    var code = this.codeMirror.getValue();\n    this.postMessage({\n      action: Constants.CHILD_APP_RUN_CODE,\n      code: code,\n      type: this.type\n    });\n    this.postMessage({\n      action: Constants.OPEN_CAMERA\n    });\n  };\n\n  return LiveCode;\n\n})();\n","module.exports = (function(){\n  var ContentBase = require('../ContentBase');\n  var Constants = require('Constants');\n\n  function MegaPuddingSlide($slideHolder) {\n    ContentBase.call(this, $slideHolder);\n\n    this.$webview = $slideHolder.find('webview');\n    this.webview = this.$webview[0];\n\n    this.webview.addEventListener(\"dom-ready\", (function(){\n      //this.webview.openDevTools();\n    }).bind(this));\n  }\n\n  MegaPuddingSlide.prototype = Object.create(ContentBase.prototype);\n\n  MegaPuddingSlide.prototype.destroy = function() {\n    ContentBase.prototype.destroy.call(this);\n  };\n\n  MegaPuddingSlide.prototype.onStateChanged = function() {\n    if(this.state === Constants.STATE_ACTIVE) {\n      this.webview.setAttribute('src', 'slides/megapudding/index.html');\n    } else {\n      this.webview.setAttribute('src', '');\n    }\n  };\n\n  return MegaPuddingSlide;\n\n})();\n","module.exports = (function(){\n\n  var ContentBase = require('../ContentBase');\n  var Constants = require('Constants');\n\n  var teamColors = [\n    '#c6363d', //red\n    '#0684AF'  //blue\n  ];\n\n  var self;\n\n  function ShakeYourPhones($slideHolder) {\n    ContentBase.call(this, $slideHolder);\n\n    self = this;\n\n    this.gameDuration = 13; //game lasts 10 seconds\n    this.clientsMap = {};\n    this.clientsByTeam = [\n      [],\n      []\n    ];\n    this.motions = [0, 0];\n    this.music = this.$slideHolder.find('#music')[0];\n\n    this.$slideHolder.find('#ip').text('bbridges.herokuapp.com');\n\n    this.$slideHolder.find('.substate-intro .btn').on('click', this.startClickHandler.bind(this));\n\n    this.$teamBlocks = this.$slideHolder.find('.team');\n    this.$teamBlocks.css({\n      position: 'absolute',\n      height: '100%',\n      top: 0\n    });\n    $(this.$teamBlocks[0]).css('background-color', teamColors[0]);\n    $(this.$teamBlocks[1]).css('background-color', teamColors[1]);\n    this.displayMotions();\n\n    this.setSubstate(Constants.SHAKE_YOUR_PHONES_INTRO);\n  }\n\n  ShakeYourPhones.prototype = Object.create(ContentBase.prototype);\n\n  ShakeYourPhones.prototype.setSubstate = function(substate) {\n    if(this.substate !== substate) {\n      this.substate = substate;\n      //send substate to mobile clients\n      this.postSocketMessage({\n        target: {\n          client: 'mobile',\n          slide: 'shake-your-phones'\n        },\n        content: {\n          action: Constants.SET_SUBSTATE,\n          substate: this.substate\n        }\n      });\n      if(this.substate === Constants.SHAKE_YOUR_PHONES_GAME) {\n        this.resetMotion();\n      }\n      this.showCurrentState();\n    }\n  };\n\n  ShakeYourPhones.prototype.receiveSocketMessage = function(message) {\n    if(!message.content) {\n      return;\n    }\n    if(message.content.action === 'updateRoomList') {\n      //message.content.ids is an array with ids in this room\n      var clientMapIds = _.keys(this.clientsMap);\n      //which ids are new? (in message.content.ids but not in clientsMap)\n      var newClientIds = _.difference(message.content.ids, clientMapIds);\n      //which ids need to be removed? (in clientsMap but not in message.content.ids)\n      var removeClientIds = _.difference(clientMapIds, message.content.ids);\n      //update our map\n      newClientIds.forEach(function(id){\n        this.clientsMap[id] = {\n          id: id,\n          teamNr: -1,\n          motion: 0,\n          size: 10\n        };\n        //add to the smallest team\n        var teamNr = (this.clientsByTeam[0].length < this.clientsByTeam[1].length) ? 0 : 1;\n        this.clientsMap[id].teamNr = teamNr;\n        //send a message to this client\n        this.postSocketMessage({\n          target: {\n            client: id,\n            slide: 'shake-your-phones'\n          },\n          content: {\n            action: Constants.SET_TEAM,\n            team: teamNr\n          }\n        });\n       this.postSocketMessage({\n          target: {\n            client: 'mobile',\n            slide: 'shake-your-phones'\n          },\n          content: {\n            action: Constants.SET_SUBSTATE,\n            substate: this.substate\n          }\n        });\n        //update the list\n        this.updateClientsByTeam();\n      }, this);\n      removeClientIds.forEach(function(id){\n          if(this.clientsMap[id]) {\n              //this.clientsMap[id].$div.remove();\n          }\n          delete this.clientsMap[id];\n          this.updateClientsByTeam();\n      }, this);\n\n      this.numClientsChanged();\n    } else if(message.content.action === Constants.UPDATE_MOTION) {\n      if(!message.sender) {\n        return;\n      }\n      //message.sender.id contains the origin id\n      if(!this.clientsMap[message.sender.id]) {\n        return;\n      }\n      this.clientsMap[message.sender.id].motion = Math.min(130, message.content.motion); //limit max motion to 130\n    }\n  };\n\n  ShakeYourPhones.prototype.updateClientsByTeam = function() {\n    this.clientsByTeam = [\n      [],\n      []\n    ];\n    $.each(this.clientsMap, function(id, client){\n      if(client.teamNr !== -1) {\n        self.clientsByTeam[client.teamNr].push(client);\n      }\n    });\n  };\n\n  ShakeYourPhones.prototype.startClickHandler = function() {\n      this.setSubstate(Constants.SHAKE_YOUR_PHONES_GAME);\n  };\n\n  ShakeYourPhones.prototype.resetMotion = function() {\n    this.motions = [0, 0];\n    for(var id in this.clientsMap) {\n      this.clientsMap[id].motion = 0;\n    }\n  };\n\n  ShakeYourPhones.prototype.numClientsChanged = function() {\n      this.$slideHolder.find('#connections span').text(_.keys(this.clientsMap).length);\n  };\n\n  ShakeYourPhones.prototype.showCurrentState = function() {\n    this.$slideHolder.find('.substate').removeClass('active');\n    this.$slideHolder.find('.slide').css({\n      backgroundImage: 'none'\n    });\n    if(this.substate === Constants.SHAKE_YOUR_PHONES_GAME) {\n      this.music.play();\n      this.$slideHolder.find('.substate-game .countdown').html(this.gameDuration);\n      this.$slideHolder.find('.substate-game').addClass('active');\n      this.countDownTimeout = setTimeout(this.countDownHandler.bind(this, this.gameDuration - 1), 1000);\n    } else if(this.substate === Constants.SHAKE_YOUR_PHONES_FINISHED) {\n      //show winner\n      var ratio = this.calculateRatio();\n      var winningTeam = (ratio > 0.5) ? 0 : 1;\n      var winningTeamColor = (winningTeam === 0) ? \"red\" : \"blue\";\n      this.$slideHolder.find('.substate-finished h1').text('Team ' + winningTeamColor + ' wins!');\n      this.$slideHolder.find('.substate-finished').addClass('active');\n      //notify the mobile clients\n      var winningIds = [];\n      var losingIds = [];\n      $.each(this.clientsMap, function(id, client){\n        if(client.teamNr === winningTeam) {\n          winningIds.push(id);\n        }\n        else {\n          losingIds.push(id);\n        }\n      });\n      this.postSocketMessage({\n        target: {\n          client: winningIds,\n          slide: 'shake-your-phones'\n        },\n        content: {\n          action: Constants.YOU_WIN\n        }\n      });\n      this.postSocketMessage({\n        target: {\n          client: losingIds,\n          slide: 'shake-your-phones'\n        },\n        content: {\n          action: Constants.YOU_LOSE\n        }\n      });\n    } else {\n      this.$slideHolder.find('.slide').css({\n        backgroundRepeat: 'no-repeat',\n        backgroundSize: 'contain',\n        backgroundPosition: 'center center',\n        backgroundImage: 'url(slides/images/iphone-connections.png)'\n      });\n      this.$slideHolder.find('.substate-intro').addClass('active');\n    }\n  };\n\n  ShakeYourPhones.prototype.countDownHandler = function(timeLeft) {\n    this.$slideHolder.find('.substate-game .countdown').html(timeLeft);\n    if(timeLeft > 0) {\n      this.countDownTimeout = setTimeout(this.countDownHandler.bind(this, timeLeft - 1), 1000);\n    } else {\n      this.setSubstate(Constants.SHAKE_YOUR_PHONES_FINISHED);\n    }\n  };\n\n  ShakeYourPhones.prototype.drawLoop = function() {\n    if(this.substate === Constants.SHAKE_YOUR_PHONES_GAME) {\n      //calculate current motions\n      var currentMotions = [0, 0];\n      $.each(this.clientsMap, function(id, client){\n        if(client.teamNr > -1 && client.motion) {\n          currentMotions[client.teamNr] += client.motion;\n        }\n      });\n      //take average motion\n      currentMotions[0] /= this.clientsByTeam[0].length;\n      currentMotions[1] /= this.clientsByTeam[1].length;\n      //add to motion\n      this.motions[0] += currentMotions[0];\n      this.motions[1] += currentMotions[1];\n      //ease it\n      this.motions[0] *= 0.97;\n      this.motions[1] *= 0.97;\n      //visualize it\n      this.displayMotions();\n    }\n  };\n\n  ShakeYourPhones.prototype.calculateRatio = function() {\n    var totalMotion = this.motions[0] + this.motions[1];\n    var ratio = (totalMotion > 0) ? this.motions[0] / totalMotion : 0.5;\n    return ratio;\n  };\n\n  ShakeYourPhones.prototype.displayMotions = function() {\n    var ratio = this.calculateRatio();\n    //console.log(this.motions[0], this.motions[1], totalMotion, ratio);\n    $(this.$teamBlocks[0]).css({\n      left: 0,\n      width: (ratio * 100) + '%'\n    });\n    $(this.$teamBlocks[1]).css({\n      right: 0,\n      width: (100 - (ratio * 100)) + '%'\n    });\n  };\n\n  return ShakeYourPhones;\n\n})();\n","module.exports = (function(){\n\tvar ContentBase = require('../ContentBase');\n  var Constants = require('Constants');\n\n\tfunction VideoSlide($slideHolder) {\n\t\tContentBase.call(this, $slideHolder);\n\n\t\tthis.videoPlaying = false;\n\t\tvar videoUrl = getParameterByName(this.src, 'video');\n    var loop = getParameterByName(this.src, 'loop');\n    var muted = getParameterByName(this.src, 'muted');\n\n\t\tthis.video = this.$slideHolder.find('video')[0];\n    if(loop === \"1\") {\n      $(this.video).attr('loop', \"loop\");\n    }\n    if(muted === \"1\") {\n      $(this.video).attr('muted', \"muted\");\n    }\n\t\t$(this.video).attr('src', videoUrl);\n\t\tthis._clickHandler = this.clickHandler.bind(this);\n\t\t$(this.video).on('click', this._clickHandler);\n\t}\n\n\tVideoSlide.prototype = Object.create(ContentBase.prototype);\n\n\tVideoSlide.prototype.destroy = function() {\n\t\tContentBase.prototype.destroy.call(this);\n\t\t$(this.video).off('click', this._clickHandler);\n\t};\n\n  VideoSlide.prototype.onStateChanged = function() {\n    if(this.state === Constants.STATE_ACTIVE) {\n      this.setVideoPlaying(true);\n    } else {\n      this.setVideoPlaying(false);\n    }\n  };\n\n\tVideoSlide.prototype.clickHandler = function(event) {\n\t\tthis.toggleVideoPlaying();\n\t};\n\n  VideoSlide.prototype.setVideoPlaying = function(value) {\n    if(value !== this.videoPlaying) {\n      this.videoPlaying = value;\n      if(this.videoPlaying) {\n        this.video.play();\n      } else {\n        this.video.pause();\n      }\n    }\n  };\n\n  VideoSlide.prototype.toggleVideoPlaying = function() {\n    this.setVideoPlaying(!this.videoPlaying);\n  };\n\n\tfunction getParameterByName(url, name) {\n\t\tname = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n\t\tvar regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\"),\n\t\tresults = regex.exec(url);\n\t\treturn results == null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n\t}\n\n\treturn VideoSlide;\n\n})();\n"]}
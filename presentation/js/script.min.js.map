{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","node_modules/browserify/node_modules/process/browser.js","presentation/js/src/classes/IFrameBridge.js","presentation/js/src/classes/MobileServerBridge.js","presentation/js/src/classes/Presentation.js","presentation/js/src/classes/childapps/ChildApp.js","presentation/js/src/classes/config/index.js","presentation/js/src/classes/slides/ContentBase.js","presentation/js/src/classes/slides/live-code/CodeElement.js","presentation/js/src/classes/slides/live-code/ConsoleElement.js","presentation/js/src/classes/slides/live-code/WebPreviewElement.js","presentation/js/src/script.js","shared/js/Constants.js","shared/js/classes/slides/ContentBase.js","shared/js/classes/IFrameBridge.js","shared/js/classes/MobileServerBridge.js","shared/js/classes/Presentation.js","presentation/js/src/classes/slides/live-code/index.js","presentation/js/src/classes/slides/video-slide/index.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC3LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACrIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"script.min.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            currentQueue[queueIndex].run();\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = (function(){\n\n\t//Extend the shared class\n\tvar SharedIFrameBridge = require('shared/IFrameBridge');\n\n\tfunction IFrameBridge(data) {\n\t\tSharedIFrameBridge.call(this, data);\n\t}\n\n\tIFrameBridge.prototype = Object.create(SharedIFrameBridge.prototype);\n\n\tIFrameBridge.prototype.attachToIframe = function(iframe, src, cb) {\n\t\tthis.iframe = iframe;\n\t\t$(iframe).off('dom-ready');\n\t\t$(iframe).attr('name', this.name);\n\t\t$(iframe).addClass('loading');\n\t\t$(iframe).removeClass('loaded');\n\t\tif(src !== $(iframe).attr('src')) {\n\t\t\t$(iframe).on('dom-ready', (function(event){\n\t\t\t\tiframe.openDevTools();\n\t\t\t\t$(iframe).removeClass('loading');\n\t\t\t\t$(iframe).addClass('loaded');\n\t\t\t\tthis.tryToPostMessage({\n\t\t\t\t\taction: 'setState',\n\t\t\t\t\tstate: this.state\n\t\t\t\t});\n\t\t\t\tcb();\n\t\t\t}).bind(this));\n\t\t\t$(iframe).attr('src', src);\n\t\t}\n\t};\n\n\tIFrameBridge.prototype.tryToPostMessage = function(message) {\n\t\t//we use IPC instead of postmessage in electron\n\t\tif(!this.iframe || !this.iframe.send || !$(this.iframe).hasClass('loaded'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.iframe.send('message', message);\n\t};\n\n\treturn IFrameBridge;\n})();\n","module.exports = (function(){\n\n\tvar MobileServerBridgeBase = require('shared/MobileServerBridge');\n\n\tvar Config = require('./config');\n\tvar Constants = require('Constants');\n\n\tfunction MobileServerBridge(presentation, url) {\n\t\tMobileServerBridgeBase.call(this, presentation, url);\n\t\tbean.on(this.presentation, Constants.SET_CURRENT_SLIDE_INDEX, this.currentSlideIndexChanged.bind(this));\n\t}\n\n\tMobileServerBridge.prototype = Object.create(MobileServerBridgeBase.prototype);\n\n\tMobileServerBridge.prototype.getLoginCredentials = function() {\n\t\treturn {\n\t\t\temail: Config.mobileServerUsername,\n\t\t\tpassword: Config.mobileServerPassword,\n\t\t};\n\t};\n\n\tMobileServerBridge.prototype.socketConnectHandler = function() {\n\t\tMobileServerBridgeBase.prototype.socketConnectHandler.call(this);\n\t\tthis.tryToSend(Constants.MESSAGE, {\n\t\t\ttarget: {\n\t\t\t\tclient: 'mobile',\n\t\t\t},\n\t\t\tcontent: {\n\t\t\t\taction: Constants.SET_CURRENT_SLIDE_INDEX,\n\t\t\t\tcurrentSlideIndex: this.presentation.currentSlideIndex\n\t\t\t}\n\t\t});\n\t};\n\n\tMobileServerBridge.prototype.currentSlideIndexChanged = function(currentSlideIndex) {\n\t\tthis.tryToSend(Constants.MESSAGE, {\n\t\t\ttarget: {\n\t\t\t\tclient: 'mobile',\n\t\t\t},\n\t\t\tcontent: {\n\t\t\t\taction: Constants.SET_CURRENT_SLIDE_INDEX,\n\t\t\t\tcurrentSlideIndex: currentSlideIndex\n\t\t\t}\n\t\t});\n\t};\n\n\treturn MobileServerBridge;\n\n})();\n","module.exports = (function(){\n\n\tvar path = requireNode('path');\n\n\tvar PresentationBase = require('shared/Presentation');\n\n\tvar Constants = require('Constants');\n\tvar Config = require('./config');\n\n\tvar ChildApp = require('./childapps/ChildApp');\n\tvar MobileServerBridge = require('./MobileServerBridge');\n\n\tvar IFrameBridge = require('./IFrameBridge');\n\n\tvar KEYCODE_LEFT = 37;\n\tvar KEYCODE_RIGHT = 39;\n\n\tfunction Presentation(data, role, settings) {\n\t\tif(settings) {\n\t\t\tfor(var key in settings) {\n\t\t\t\tConfig[key] = settings[key];\n\t\t\t}\n\t\t}\n\t\tPresentationBase.call(this, data, 'presentation');\n\n\t\twindow.onbeforeunload = this.closeHandler.bind(this);\n\n\t\tthis.elevatorMusicPlaying = false;\n\t\tthis.elevatorMusic = false;\n\n\t\t$('#consoleModal').on('show.bs.modal', function (e) {\n\t\t\tvar w = $('#consoleModal iframe')[0].contentWindow;\n\t\t\tw.postMessage('consoleModalOpen', 'http://localhost:3000');\n\t\t});\n\n\t\tthis.elevatorMusic = $('#elevatormusic')[0];\n\t\t$('.elevator-button').on('click', $.proxy(this.toggleElevatorMusic, this));\n\n\t\t$('.info .ip').text('jsworkout.herokuapp.com');\n\n\t\t$(window).on('keydown', $.proxy(this.keydownHandler, this));\n\n\t\t//forward childapp messages\n\t\tChildApp.getInstance().on('stdout-data', this.childAppDataHandler.bind(this));\n\t\tChildApp.getInstance().on('stderr-data', this.childAppErrorHandler.bind(this));\n\n\t\t$('body').on(Constants.GO_TO_PREVIOUS_SLIDE, this.goToPreviousSlide.bind(this));\n\t\t$('body').on(Constants.GO_TO_NEXT_SLIDE, this.goToNextSlide.bind(this));\n\t\t$('body').on(Constants.OPEN_COMMAND_LINE, this.openCommandLine.bind(this));\n\t\t$('body').on(Constants.OPEN_CAMERA, this.openCamera.bind(this));\n\t}\n\n\tPresentation.prototype = Object.create(PresentationBase.prototype);\n\n\tPresentation.prototype.closeHandler = function() {\n\t\tChildApp.getInstance().stop();\n\t};\n\n\tPresentation.prototype.createMobileServerBridge = function() {\n\t\treturn new MobileServerBridge(this, Config.mobileServerUrl);\n\t};\n\n\tPresentation.prototype.toggleElevatorMusic = function() {\n\t\tthis.elevatorMusicPlaying = !this.elevatorMusicPlaying;\n\t\tif(this.elevatorMusicPlaying) {\n\t\t\tthis.elevatorMusic.play();\n\t\t} else {\n\t\t\tthis.elevatorMusic.pause();\n\t\t}\n\t};\n\n\t//create webviews instead of iframes\n\tPresentation.prototype.createIFrames = function() {\n\t\t//TODO: we cannot nest webviews, which makes dynamic code execution impossible\n\t\t//so slides will have to decide on their own if they run in a webview...\n\t\tfor(var i = 0; i < this.numIframes; i++) {\n\t\t\tvar $iframe = $('<webview class=\"slide-frame\" nodeintegration plugins disablewebsecurity />');\n\t\t\tthis.iframes.push($iframe);\n\t\t\t$('#presentation').append($iframe);\n\t\t}\n\t};\n\n\t//prepend urls with file:/// (faster?)\n\tPresentation.prototype.processIFrameSrc = function(src) {\n\t\tsrc = 'file:///' + path.resolve('./presentation/' + src);\n\t\tsrc = src.replace(/\\\\/g,\"/\");\n\t\treturn src;\n\t};\n\n\tPresentation.prototype.createIFrameBridges = function(data) {\n\t\tPresentationBase.prototype.createIFrameBridges.call(this, data);\n\t\tvar that = this;\n\t\tvar $slideMenu = $('#slideMenu');\n\t\tvar numIFrameBridges = this.iFrameBridges.length;\n\t\tfor(var i = 0; i < numIFrameBridges; i++) {\n\t\t\tvar iFrameBridge = this.iFrameBridges[i];\n\t\t\t$slideMenu.append('<li><a href=\"#\" data-slidenr=\"' + i + '\">' + (i + 1) + ' ' + iFrameBridge.name + '</a></li>');\n\t\t}\n\t\t$slideMenu.find('a').on('click', function(event){\n\t\t\tevent.preventDefault();\n\t\t\tthat.setCurrentSlideIndex(parseInt($(this).data('slidenr')));\n\t\t});\n\t};\n\n\tPresentation.prototype.createIframeBridge = function(slide) {\n\t\t//use our own bridge to webviews\n\t\treturn new IFrameBridge(slide);\n\t};\n\n\tPresentation.prototype.attachToIFrame = function(iFrame, iFrameBridge, src) {\n\t\t//listen for ipc messages on this iframe\n\t\t$(iFrame).off('ipc-message');\n\t\t$(iFrame).on('ipc-message', (function(event) {\n\t\t\tthis.iFrameMessageHandler({data: event.originalEvent.args[0]});\n\t\t}).bind(this));\n\t\tPresentationBase.prototype.attachToIFrame.call(this, iFrame, iFrameBridge, src);\n\t};\n\n\tPresentation.prototype.iFrameMessageHandler = function(event) {\n\t\tPresentationBase.prototype.iFrameMessageHandler.call(this, event);\n\t\tif(!event.data) {\n\t\t\treturn;\n\t\t}\n\t\tswitch(event.data.action) {\n\t\t\tcase Constants.GO_TO_PREVIOUS_SLIDE:\n\t\t\t\tthis.goToPreviousSlide();\n\t\t\t\tbreak;\n\t\t\tcase Constants.GO_TO_NEXT_SLIDE:\n\t\t\t\tthis.goToNextSlide();\n\t\t\t\tbreak;\n\t\t\tcase Constants.OPEN_COMMAND_LINE:\n\t\t\t\tthis.openCommandLine();\n\t\t\t\tbreak;\n\t\t\tcase Constants.OPEN_CAMERA:\n\t\t\t\tthis.openCamera();\n\t\t\t\tbreak;\n\t\t\tcase Constants.CHILD_APP_SAVE_CODE:\n\t\t\t\tChildApp.getInstance().saveCode(event.data.code, event.data.type);\n\t\t\t\tbreak;\n\t\t\tcase Constants.CHILD_APP_RUN_CODE:\n\t\t\t\tChildApp.getInstance().runCode(event.data.code, event.data.type);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tPresentation.prototype.keydownHandler = function(event) {\n\t\tswitch(event.keyCode) {\n\t\t\tcase KEYCODE_LEFT:\n\t\t\t\tthis.goToPreviousSlide();\n\t\t\t\tbreak;\n\t\t\tcase KEYCODE_RIGHT:\n\t\t\t\tthis.goToNextSlide();\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tPresentation.prototype.childAppDataHandler = function(data) {\n\t\tvar currentIFrameBridge = this.getIFrameBridgeByIndex(this.currentSlideIndex);\n\t\tif(currentIFrameBridge) {\n\t\t\tcurrentIFrameBridge.tryToPostMessage({\n\t\t\t\taction: Constants.CHILD_APP_STDOUT_DATA,\n\t\t\t\tdata: data\n\t\t\t});\n\t\t}\n\t};\n\n\tPresentation.prototype.childAppErrorHandler = function(data) {\n\t\tvar currentIFrameBridge = this.getIFrameBridgeByIndex(this.currentSlideIndex);\n\t\tif(currentIFrameBridge) {\n\t\t\tcurrentIFrameBridge.tryToPostMessage({\n\t\t\t\taction: Constants.CHILD_APP_STDERR_DATA,\n\t\t\t\tdata: data\n\t\t\t});\n\t\t}\n\t};\n\n\tPresentation.prototype.openCommandLine = function() {\n\t\t$('#consoleModal').modal('show');\n\t};\n\n\tPresentation.prototype.openCamera = function() {\n\t\t$('#webcamModal').modal('show');\n\t};\n\n\treturn Presentation;\n\n})();\n","var Config = require('../config'),\n\tevents = requireNode('events'),\n\tfs = requireNode('fs'),\n\tchildProcess = requireNode('child_process'),\n\tutil = requireNode('util'),\n\tpath = requireNode('path');\n\n//kill entire process tree\n//http://krasimirtsonev.com/blog/article/Nodejs-managing-child-processes-starting-stopping-exec-spawn\nvar kill = function (pid, signal, callback) {\n\tsignal = signal || 'SIGKILL';\n\tcallback = callback || function () {};\n\t//var isWin = /^win/.test(process.platform);\n\tvar isWin = true;\n\tif(!isWin) {\n\t\tvar psTree = requireNode('ps-tree');\n\t\tvar killTree = true;\n\t\tif(killTree) {\n\t\t\tpsTree(pid, function (err, children) {\n\t\t\t\t[pid].concat(\n\t\t\t\t\tchildren.map(function (p) {\n\t\t\t\t\t\treturn p.PID;\n\t\t\t\t\t})\n\t\t\t\t).forEach(function (tpid) {\n\t\t\t\t\ttry { process.kill(tpid, signal); }\n\t\t\t\t\tcatch (ex) { }\n\t\t\t\t\t});\n\t\t\t\t\tcallback();\n\t\t\t});\n\t\t} else {\n\t\t\ttry { process.kill(pid, signal); }\n\t\t\tcatch (ex) { }\n\t\t\tcallback();\n\t\t}\n\t} else {\n\t\tchildProcess.exec('taskkill /PID ' + pid + ' /T /F', function (error, stdout, stderr) {\n\t\t\tcallback();\n\t\t});\n\t}\n};\n\nfunction ChildApp() {\n\tevents.EventEmitter.call(this);\n\tconsole.log(\"[ChildApp] constructor\");\n}\n\nutil.inherits(ChildApp, events.EventEmitter);\n\nChildApp.getInstance = function() {\n\tif(!ChildApp.instance) {\n\t\tChildApp.instance = new ChildApp();\n\t}\n\treturn ChildApp.instance;\n};\n\nChildApp.prototype.saveCode = function(code, type, cb) {\n\t//if code is running, stop it\n\tif(this.runner) {\n\t\tthis.stop();\n\t\tconsole.log(\"[ChildApp] kill() executed\");\n\t\tsetTimeout(this.saveCode.bind(this, code, type, cb), 500);\n\t} else {\n\t\tvar filePath = Config.childNodeAppFilePath;\n\t\tif(type === 'tessel') {\n\t\t\tfilePath = Config.childTesselAppFilePath;\n\t\t}\n\t\t//create folder / file if needed\n\t\tfs.writeFile(filePath, code, function(err) {\n\t\t\t\tif(err) {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(\"[ChildApp] The file was saved!\");\n\t\t\t\t\t\tif(cb) {\n\t\t\t\t\t\t\tcb();\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t});\n\t}\n};\n\nChildApp.prototype.runCode = function(code, type) {\n\tconsole.log(\"[ChildApp] runCode\");\n\t//write code to file & run it\n\tthis.saveCode(code, type, (function(){\n\t\t//run the code\n\t\tif(type === 'tessel') {\n\t\t\tthis.runner = childProcess.spawn(\"tessel\", [\"run\", Config.childTesselAppFilePath], {cwd: path.dirname(Config.childTesselAppFilePath)});\n\t\t} else {\n\t\t\t//this.runner = process.spawn(\"node\", [Config.childNodeAppFilePath], {cwd: path.dirname(Config.childNodeAppFilePath)});\n\t\t\tthis.runner = childProcess.spawn(\"cmd\", [\"nvmw\", \"use\", \"iojs-v2.3.1\"], {cwd: path.dirname(Config.childNodeAppFilePath)});\n\t\t\tsetTimeout((function(){\n\t\t\t\t//execute first command\n\t\t\t\tthis.runner.stdin.write(\"node \" + Config.childNodeAppFilePath + \"\\n\");\n\t\t\t}).bind(this), 500);\n\t\t}\n\t\tthis.runner.stdout.on('data', this.onRunnerData.bind(this));\n\t\tthis.runner.stderr.on('data', this.onRunnerError.bind(this));\n\t\tthis.runner.on('disconnect', this.onDisconnect.bind(this));\n\t\tthis.runner.on('close', this.onClose.bind(this));\n\t}).bind(this));\n};\n\nChildApp.prototype.stop = function() {\n\tif(this.runner) {\n\t\tconsole.log(\"[ChildApp] stop\");\n\t\tconsole.log(this.runner.pid);\n\t\tthis.runner.stdout.removeAllListeners();\n\t\tthis.runner.stderr.removeAllListeners();\n\t\tthis.runner.stdin.end();\n\t\tkill(this.runner.pid);\n\t\tthis.runner = false;\n\t}\n};\n\nChildApp.prototype.onRunnerData = function(data) {\n\tthis.emit('stdout-data', data.toString().trim());\n};\n\nChildApp.prototype.onRunnerError = function(error) {\n\tthis.emit('stderr-data', error.toString().trim());\n};\n\nChildApp.prototype.onDisconnect = function() {\n\tconsole.log('[ChildApp] runner disconnected');\n\tthis.runner = false;\n};\n\nChildApp.prototype.onClose = function() {\n\tconsole.log('[ChildApp] runner closed');\n\tthis.runner = false;\n};\n\nmodule.exports = ChildApp;\n","module.exports = (function(){\n\n\tvar path = requireNode('path');\n\n\tif(!global.Config) {\n\t\tglobal.Config = {};\n\n\t\t// Retrieve local ip for Config\n\t\tvar ip = '127.0.0.1', ifaces = requireNode('os').networkInterfaces();\n\t\tfor (var dev in ifaces) {\n\t\t\tif(dev.indexOf('bridge') !== 0) {\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tifaces[dev].forEach(function(details) {\n\t\t\t\t\tif (details.family === 'IPv4') {\n\t\t\t\t\t\tip = details.address;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t/* jshint ignore:end */\n\t\t\t}\n\t\t}\n\n\t\tglobal.Config.childNodeAppFilePath = path.resolve('./child-app/node/app.js');\n\t\tglobal.Config.childTesselAppFilePath = path.resolve('./child-app/tessel/app.js');\n\t\tglobal.Config.ip = ip;\n\n\t\tglobal.Config.mobileServerUrl = \"\";\n\t\tglobal.Config.mobileServerUsername = \"\";\n\t\tglobal.Config.mobileServerPassword = \"\";\n\n\t}\n\n\treturn global.Config;\n\n})();\n","module.exports = (function(){\n\n\tvar SharedContentBase = require('shared/ContentBase');\n\tvar Constants = require('Constants');\n\tvar ipc = requireNode('ipc');\n\n\tvar KEYCODE_LEFT = 37;\n\tvar KEYCODE_RIGHT = 39;\n\n\tfunction ContentBase(name) {\n\t\tSharedContentBase.call(this, name);\n\t\tthis.slideControlEnabled = true;\n\t\t$(window).on('keydown', this.keydownHandler.bind(this));\n\t}\n\n\tContentBase.prototype = Object.create(SharedContentBase.prototype);\n\n\tContentBase.prototype.startListeningForMessages = function() {\n\t\t//electron works with ipc-channels\n\t\trequireNode('ipc').on('message', (function(message) {\n\t\t\t//wrap in object\n\t\t\tthis.receiveMessage({data: message});\n\t\t}).bind(this));\n\t};\n\n\tContentBase.prototype.postMessage = function(data) {\n\t\t//electron works with ipc-channels\n\t\tipc.sendToHost('message', data);\n\t};\n\n\tContentBase.prototype.keydownHandler = function(event) {\n\t\tif(this.slideControlEnabled) {\n\t\t\tswitch(event.keyCode) {\n\t\t\t\tcase KEYCODE_LEFT:\n\t\t\t\t\tthis.postMessage({action: Constants.GO_TO_PREVIOUS_SLIDE});\n\t\t\t\t\tbreak;\n\t\t\t\tcase KEYCODE_RIGHT:\n\t\t\t\t\tthis.postMessage({action: Constants.GO_TO_NEXT_SLIDE});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\treturn ContentBase;\n\n})();\n","module.exports = (function(){\n\n\tfunction CodeElement(el) {\n\t\tthis.el = el;\n\t\tthis.$el = $(el);\n\t\t//wrap element in a container\n\t\tthis.$wrapperEl = $(el).wrap('<div class=\"live-code-element live-code-code-element\"></div>').parent();\n\t\tthis.wrapperEl = this.$wrapperEl[0];\n\n\t\tthis.id = this.$el.attr('id');\n\t\tif(!this.id)\n\t\t{\n\t\t\t//generate id\n\t\t\tthis.id = 'code-' + Math.round(Math.random() * 1000 * new Date().getTime());\n\t\t\tthis.$el.attr('id', this.id);\n\t\t}\n\n\t\tthis.runtime = this.$el.data('runtime');\n\t\tif(!this.runtime)\n\t\t{\n\t\t\tthis.runtime = 'browser';\n\t\t}\n\n\t\tthis.console = this.$el.data('console');\n\t\tthis.processor = this.$el.data('processor');\n\n\t\t//language is programming language - used for injecting in html\n\t\tthis.language = this.$el.data('language');\n\t\tif(!this.language)\n\t\t{\n\t\t\t//default to javascript\n\t\t\tthis.language = \"javascript\";\n\t\t}\n\n\t\t//mode is mode for codemirror\n\t\tthis.mode = this.$el.data('mode');\n\t\tif(!this.mode)\n\t\t{\n\t\t\t//default to the language\n\t\t\tthis.mode = this.language;\n\t\t}\n\n\t\tthis.codeMirror = CodeMirror.fromTextArea(this.el, {\n\t\t\tlineNumbers: true,\n\t\t\tmode: this.mode,\n\t\t\textraKeys: {\"Ctrl-Space\": \"autocomplete\"}\n\t\t});\n\n\t\tthis.$el.css('width', '100%').css('height', '100%');\n\t\tthis.layout();\n\t}\n\n\tCodeElement.prototype.getValue = function() {\n\t\treturn this.codeMirror.getValue();\n\t};\n\n\tCodeElement.prototype.layout = function() {\n\t\tthis.$wrapperEl.find('.CodeMirror-scroll').css('max-height', this.$wrapperEl.css('height'));\n\t\tthis.codeMirror.refresh();\n\t};\n\n\treturn CodeElement;\n})();\n","module.exports = (function(){\n\n\tfunction ConsoleElement(el) {\n\t\tthis.el = el;\n\t\tthis.$el = $(el);\n\t\t//wrap element in a container\n\t\tthis.$wrapperEl = $(el).wrap('<div class=\"live-code-element live-code-console-element unreset\"></div>').parent();\n\t\tthis.wrapperEl = this.$wrapperEl[0];\n\n\t\tthis.id = this.$el.attr('id');\n\t\tif(!this.id)\n\t\t{\n\t\t\t//generate id\n\t\t\tthis.id = 'code-' + Math.round(Math.random() * 1000 * new Date().getTime());\n\t\t\tthis.$el.attr('id', this.id);\n\t\t}\n\n\t\tthis.$el.css('width', '100%').css('height', '100%');\n\t}\n\n\tConsoleElement.prototype.info = function(data) {\n\t\tthis.el.innerHTML += '<pre>' + data + '</pre>';\n\t\tthis.wrapperEl.scrollTop = this.wrapperEl.scrollHeight;\n\n\t};\n\n\tConsoleElement.prototype.error = function(data) {\n\t\tthis.el.innerHTML += '<pre class=\"console-error\">' + data + '</pre>';\n\t\tthis.wrapperEl.scrollTop = this.wrapperEl.scrollHeight;\n\t};\n\n\treturn ConsoleElement;\n})();\n","module.exports = (function(){\n\n\tfunction WebPreviewElement(el) {\n\t\tthis.el = el;\n\t\tthis.$el = $(el);\n\t\t//wrap element in a container\n\t\tthis.$wrapperEl = $(el).wrap('<div class=\"live-code-element live-code-web-preview-element\"></div>').parent();\n\t\tthis.wrapperEl = this.$wrapperEl[0];\n\n\t\tthis.id = this.$el.attr('id');\n\t\tif(!this.id)\n\t\t{\n\t\t\t//generate id\n\t\t\tthis.id = 'code-' + Math.round(Math.random() * 1000 * new Date().getTime());\n\t\t\tthis.$el.attr('id', this.id);\n\t\t}\n\n\t\tthis.$el.css('width', '100%').css('height', '100%');\n\t}\n\n\tWebPreviewElement.prototype.updateCode = function(blocks) {\n\t};\n\n\treturn WebPreviewElement;\n})();\n","(function(){\n\n\tvar Presentation = require('./classes/Presentation');\n\n  function init() {\n  \tif($('#presentation').length > 0) {\n      initPresentation();\n  \t}\n  }\n\n  function initPresentation() {\n    function getSettings(cb) {\n      $.getJSON('../settings.json')\n      .done(function(result){\n        settings = result;\n        cb();\n      })\n      .error(function(err){\n        cb();\n      });\n    }\n\n    function getData(cb) {\n      $.getJSON('../data.json')\n      .done(function(result){\n        console.log(\"data result\");\n        data = result;\n        cb();\n      })\n      .error(function(err){\n        cb();\n      });\n    }\n\n    var settings = {};\n    var data = {};\n\n    getSettings(getData.bind(this, function(){\n      new Presentation(data, 'presentation', settings);\n    }));\n\n  }\n\n\tinit();\n\n})();\n","module.exports = (function(){\n\n\tvar Constants = {\n\t\tGO_TO_PREVIOUS_SLIDE : 'goToPreviousSlide',\n\t\tGO_TO_NEXT_SLIDE : 'goToNextSlide',\n\t\tSET_SLIDES : 'setSlides',\n\t\tSET_CURRENT_SLIDE_INDEX : 'setCurrentSlideIndex',\n\n\t\tMESSAGE : 'message',\n\t\tSOCKET_SEND : 'socketSend',\n\t\tSOCKET_RECEIVE : 'socketReceive',\n\t\tJOIN_SLIDE_ROOM : 'joinSlideRoom',\n\t\tLEAVE_SLIDE_ROOM : 'leaveSlideRoom',\n\n\t\tROLE_PRESENTATION : 'presentation',\n\t\tROLE_MOBILE : 'mobile',\n\n\t\tSTATE_ACTIVE : 'active',\n\t\tSTATE_INACTIVE : 'inactive',\n\n\t\tSET_SUBSTATE : 'setSubstate',\n\n\t\tCHILD_APP_SAVE_CODE : 'childAppSaveCode',\n\t\tCHILD_APP_RUN_CODE : 'childAppRunCode',\n\t\tCHILD_APP_STDOUT_DATA : 'childAppStdoutData',\n\t\tCHILD_APP_STDERR_DATA : 'childAppStderrData',\n\n\t\tOPEN_COMMAND_LINE: 'openCommandLine',\n\t\tOPEN_CAMERA: 'openCamera'\n\t};\n\n\treturn Constants;\n\n})();\n","module.exports = (function(){\n\n\tvar Constants = require('Constants');\n\n\tfunction ContentBase(name) {\n\t\tthis.name = name;\n\t\tthis.fps = 60;\n\t\tthis._animationFrameId = false;\n\t\tthis._currentTime = 0;\n\t\tthis._delta = 0;\n\t\tthis._interval = false;\n\t\tthis._lastTime = new Date().getTime();\n\t\tthis.currentFrame = 0;\n\n\t\tthis.startListeningForMessages();\n\n\t\tthis.__drawLoop = this._drawLoop.bind(this);\n\t\tthis._interval = 1000 / this.fps;\n\t}\n\n\tContentBase.prototype.startListeningForMessages = function() {\n\t\twindow.addEventListener(\"message\", this.receiveMessage.bind(this), false);\n\t};\n\n\tContentBase.prototype.receiveMessage = function(event) {\n\t\tif(!event.data) {\n\t\t\treturn;\n\t\t}\n\t\tswitch(event.data.action) {\n\t\t\tcase 'setState':\n\t\t\t\tthis.setState(event.data.state);\n\t\t\t\tbreak;\n\t\t\tcase Constants.SOCKET_RECEIVE:\n\t\t\t\tthis.receiveSocketMessage(event.data.message);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.handleMessage(event.data);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tContentBase.prototype.postMessage = function(data) {\n\t\tparent.postMessage(data, \"*\");\n\t};\n\n\tContentBase.prototype.handleMessage = function(data) {\n\t};\n\n\tContentBase.prototype.postSocketMessage = function(message) {\n\t\tthis.postMessage({\n\t\t\taction: Constants.SOCKET_SEND,\n\t\t\tmessage: message\n\t\t});\n\t};\n\n\tContentBase.prototype.receiveSocketMessage = function(message) {\n\t\t//console.log('ContentBase.prototype.receiveSocketMessage ' + this.name, message);\n\t};\n\n\tContentBase.prototype.setState = function(state) {\n\t\tif(state !== this.state) {\n\t\t\tthis.state = state;\n\t\t\tthis.onStateChanged();\n\t\t\tif(this.state === Constants.STATE_ACTIVE) {\n\t\t\t\tthis.currentFrame = 0;\n\t\t\t\tthis._drawLoop();\n\t\t\t} else {\n\t\t\t\twindow.cancelAnimationFrame(this._animationFrameId);\n\t\t\t}\n\t\t}\n\t};\n\n\tContentBase.prototype.onStateChanged = function() {\n\t};\n\n\tContentBase.prototype._drawLoop = function() {\n\t\tthis._animationFrameId = window.requestAnimationFrame(this.__drawLoop);\n\t\tthis._currentTime = (new Date()).getTime();\n\t    this._delta = (this._currentTime - this._lastTime);\n\t    if(this._delta > this._interval) {\n\t    \tthis.currentFrame++;\n\t    \tthis.drawLoop(this._delta);\n\t    \tthis._lastTime = this._currentTime - (this._delta % this._interval);\n\t    }\n\t};\n\n\tContentBase.prototype.drawLoop = function(delta) {\n\t};\n\n\treturn ContentBase;\n\n})();\n","module.exports = (function(){\n\tfunction getIframeWindow(iframe_object) {\n\t\tvar doc;\n\n\t\tif (iframe_object.contentWindow) {\n\t\t\treturn iframe_object.contentWindow;\n\t\t}\n\n\t\tif (iframe_object.window) {\n\t\t\treturn iframe_object.window;\n\t\t}\n\n\t\tif (!doc && iframe_object.contentDocument) {\n\t\t\tdoc = iframe_object.contentDocument;\n\t\t}\n\n\t\tif (!doc && iframe_object.document) {\n\t\t\tdoc = iframe_object.document;\n\t\t}\n\n\t\tif (doc && doc.defaultView) {\n\t\t return doc.defaultView;\n\t\t}\n\n\t\tif (doc && doc.parentWindow) {\n\t\t\treturn doc.parentWindow;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tfunction IFrameBridge(data) {\n\t\tthis.data = data;\n\t\tthis.name = this.data.name;\n\t}\n\n\tIFrameBridge.prototype.isAlreadyCorrectlyAttached = function(iframe, src) {\n\t\treturn (this.iframe === iframe && $(iframe).attr('name') === this.name && $(iframe).attr('src') === src);\n\t};\n\n\tIFrameBridge.prototype.attachToIframe = function(iframe, src, cb) {\n\t\tthis.iframe = iframe;\n\t\t$(iframe).off('load');\n\t\t$(iframe).off('dom-ready');\n\t\t$(iframe).attr('name', this.name);\n\t\t$(iframe).addClass('loading');\n\t\tif(src !== $(iframe).attr('src')) {\n\t\t\t$(iframe).on('load', (function(event){\n\t\t\t\t$(iframe).removeClass('loading');\n\t\t\t\tthis.tryToPostMessage({\n\t\t\t\t\taction: 'setState',\n\t\t\t\t\tstate: this.state\n\t\t\t\t});\n\t\t\t\tcb();\n\t\t\t}).bind(this));\n\t\t\t$(iframe).attr('src', src);\n\t\t}\n\t};\n\n\tIFrameBridge.prototype.setState = function(state) {\n\t\tthis.state = state;\n\t\tthis.tryToPostMessage({\n\t\t\taction: 'setState',\n\t\t\tstate: this.state\n\t\t});\n\t};\n\n\tIFrameBridge.prototype.tryToPostMessage = function(message) {\n\t\tif(!this.iframe) {\n\t\t\treturn;\n\t\t}\n\t\tvar w = getIframeWindow(this.iframe);\n\t\tif(w) {\n\t\t\tw.postMessage(message, \"*\");\n\t\t}\n\t};\n\n\treturn IFrameBridge;\n})();\n","module.exports = (function(){\n\n\tvar Constants = require('Constants');\n\n\tfunction MobileServerBridge(presentation, url) {\n\t\tthis.presentation = presentation;\n\t\tthis.url = url;\n\t\tthis.connect();\n\t}\n\n\tMobileServerBridge.prototype.connect = function() {\n\t\tconsole.log('MobileServerBridge.connect');\n\t\t$.post(this.url + '/login', this.getLoginCredentials()).done(this.loginHandler.bind(this))\n\t\t.fail((function() {\n\t\t\t//retry after one second\n\t\t\tsetTimeout((function(){\n\t\t\t\tthis.connect();\n\t\t\t}).bind(this), 1000);\n\t  }).bind(this));\n\t};\n\n\tMobileServerBridge.prototype.getLoginCredentials = function() {\n\t\treturn {};\n\t};\n\n\tMobileServerBridge.prototype.loginHandler = function(result) {\n\t\tthis.token = result.token;\n\t\tthis.socket = io(this.url, {\n\t\t\tquery: 'token=' + this.token,\n\t\t\treconnection: false,\n\t\t\tforceNew: true\n\t\t});\n\t\tthis.socket.on('connect', this.socketConnectHandler.bind(this));\n\t\tthis.socket.on('disconnect', this.socketDisconnectHandler.bind(this));\n\t\tthis.socket.on('message', this.socketMessageHandler.bind(this));\n\t};\n\n\tMobileServerBridge.prototype.socketConnectHandler = function() {\n\t\tconsole.log('MobileServerBridge.socketConnectHandler');\n\t\tthis.presentation.mobileServerBridgeConnected();\n\t};\n\n\tMobileServerBridge.prototype.socketDisconnectHandler = function() {\n\t\tthis.connect();\n\t};\n\n\tMobileServerBridge.prototype.tryToSend = function() {\n\t\tif(this.socket) {\n\t\t\tthis.socket.emit.apply(this.socket, arguments);\n\t\t}\n\t};\n\n\tMobileServerBridge.prototype.socketMessageHandler = function(message) {\n\t\tthis.presentation.mobileServerMessageHandler(message);\n\t};\n\n\treturn MobileServerBridge;\n})();","module.exports = (function(){\n\n\tvar Constants = require('Constants');\n\tvar IFrameBridge = require('./IFrameBridge');\n\n\t/*\n\t * data: json object with slides array property\n\t * role: mobile or presentation\n\t */\n\tfunction Presentation(data, role) {\n\t\tthis.data = data;\n\t\tthis.role = role;\n\t\tthis.currentSlideIndex = -1;\n\t\tthis.iframes = [];\n\t\tthis.numIframes = 3;\n\t\tthis.iFrameBridges = [];\n\t\tthis.iFrameBridgesBySlideName = {};\n\n\t\tthis.createIFrames();\n\t\tthis.createIFrameBridges(this.data);\n\n\t\tthis.mobileServerBridge = this.createMobileServerBridge();\n\t\tthis.startListeningForMessages();\n\n\t\tthis.setCurrentSlideIndex(0);\n\t}\n\n\tPresentation.prototype.startListeningForMessages = function() {\n\t\twindow.addEventListener(\"message\", this.iFrameMessageHandler.bind(this), false);\n\t};\n\n\tPresentation.prototype.createIFrames = function() {\n\t\tfor(var i = 0; i < this.numIframes; i++) {\n\t\t\tvar $iframe = $('<iframe class=\"slide-frame\" />');\n\t\t\tthis.iframes.push($iframe);\n\t\t\t$('#presentation').append($iframe);\n\t\t}\n\t};\n\n\tPresentation.prototype.createIFrameBridges = function(data) {\n\t\tvar that = this;\n\t\tvar numSlides = data.slides.length;\n\t\tfor(var i = 0; i < numSlides; i++) {\n\t\t\tvar iFrameBridge = this.createIframeBridge(data.slides[i]);\n\t\t\tthis.iFrameBridges.push(iFrameBridge);\n\t\t\tthis.iFrameBridgesBySlideName[iFrameBridge.name] = iFrameBridge;\n\t\t}\n\t};\n\n\tPresentation.prototype.createIframeBridge = function(slide) {\n\t\treturn new IFrameBridge(slide);\n\t};\n\n\tPresentation.prototype.iFrameMessageHandler = function(event) {\n\t\tif(!event.data) {\n\t\t\treturn;\n\t\t}\n\t\tswitch(event.data.action) {\n\t\t\tcase Constants.SOCKET_SEND:\n\t\t\t\tif(this.mobileServerBridge) {\n\t\t\t\t\tthis.mobileServerBridge.tryToSend(Constants.MESSAGE, event.data.message);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tPresentation.prototype.mobileServerBridgeConnected = function() {\n\t\t//join the rooms of the iframes\n\t\tfor(var i = 0; i < this.numIframes; i++) {\n\t\t\tthis.mobileServerBridge.tryToSend(Constants.JOIN_SLIDE_ROOM, $(this.iframes[i]).attr('name'));\n\t\t}\n\t};\n\n\tPresentation.prototype.mobileServerMessageHandler = function(message) {\n\t\tif(message.target.slide) {\n\t\t\t//slide has to handle the message\n\t\t\tvar iFrameBridge = this.getIFrameBridgeBySlideName(message.target.slide);\n\t\t\tif(iFrameBridge) {\n\t\t\t\tiFrameBridge.tryToPostMessage({\n\t\t\t\t\taction: Constants.SOCKET_RECEIVE,\n\t\t\t\t\tmessage: message\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\t//presentation has to handle the message\n\t\t\tthis.handleMobileServerMessage(message);\n\t\t}\n\t};\n\n\tPresentation.prototype.handleMobileServerMessage = function(message) {\n\t\tconsole.log('[shared/Presentation] handleMobileServerMessage', message);\n\t};\n\n\tPresentation.prototype.getIFrameBridgeByIndex = function(index) {\n\t\tif(index >= 0 && index < this.iFrameBridges.length) {\n\t\t\treturn this.iFrameBridges[index];\n\t\t}\n\t\treturn false;\n\t};\n\n\tPresentation.prototype.getIFrameBridgeBySlideName = function(slideName) {\n\t\treturn this.iFrameBridgesBySlideName[slideName];\n\t};\n\n\tPresentation.prototype.getIFrameForSlide = function(slide, slidesNotToClear) {\n\t\tif(slide) {\n\t\t\tvar $iframe = $('.slide-frame[name=\"' + slide.name + '\"]');\n\t\t\tif($iframe.length > 0) {\n\t\t\t\treturn $iframe[0];\n\t\t\t}\n\t\t\t//get a free iframe\n\t\t\tvar slideNamesNotToClear = [];\n\t\t\t$(slidesNotToClear).each(function(index, obj){\n\t\t\t\tslideNamesNotToClear.push(obj.name);\n\t\t\t});\n\t\t\tvar $iframes = $('.slide-frame');\n\t\t\tfor (var i = $iframes.length - 1; i >= 0; i--) {\n\t\t\t\t$iframe = $($iframes[i]);\n\t\t\t\tvar name = $iframe.attr('name');\n\t\t\t\tif(!name || slideNamesNotToClear.indexOf(name) === -1) {\n\t\t\t\t\treturn $iframe[0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\tPresentation.prototype.goToPreviousSlide = function() {\n\t\tthis.setCurrentSlideIndex(this.currentSlideIndex - 1);\n\t};\n\n\tPresentation.prototype.goToNextSlide = function() {\n\t\tthis.setCurrentSlideIndex(this.currentSlideIndex + 1);\n\t};\n\n\tPresentation.prototype.setCurrentSlideIndex = function(value) {\n\t\tvalue = Math.max(0, Math.min(value, this.iFrameBridges.length - 1));\n\t\tif(value !== this.currentSlideIndex) {\n\t\t\tthis.currentSlideIndex = value;\n\n\t\t\tvar currentIFrameBridge = this.getIFrameBridgeByIndex(this.currentSlideIndex);\n\t\t\tvar previousIFrameBridge = this.getIFrameBridgeByIndex(this.currentSlideIndex - 1);\n\t\t\tvar nextIFrameBridge = this.getIFrameBridgeByIndex(this.currentSlideIndex + 1);\n\n\t\t\tvar currentIframe = this.getIFrameForSlide(currentIFrameBridge, [previousIFrameBridge, nextIFrameBridge]);\n\t\t\tthis.setupIFrame(currentIframe, currentIFrameBridge, Constants.STATE_ACTIVE, 0);\n\n\t\t\tvar previousIframe = this.getIFrameForSlide(previousIFrameBridge, [currentIFrameBridge, nextIFrameBridge]);\n\t\t\tthis.setupIFrame(previousIframe, previousIFrameBridge, Constants.STATE_INACTIVE, '-100%');\n\n\t\t\tvar nextIframe = this.getIFrameForSlide(nextIFrameBridge, [previousIFrameBridge, currentIFrameBridge]);\n\t\t\tthis.setupIFrame(nextIframe, nextIFrameBridge, Constants.STATE_INACTIVE, '100%');\n\n\t\t\t//all other iframe bridges should be unlinked from their iframe\n\t\t\tthis.iFrameBridges.forEach(function(iFrameBridge){\n\t\t\t\tif(iFrameBridge === currentIFrameBridge) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(iFrameBridge === previousIFrameBridge) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(iFrameBridge === nextIFrameBridge) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tiFrameBridge.iframe = null;\n\t\t\t});\n\n\t\t\tbean.fire(this, Constants.SET_CURRENT_SLIDE_INDEX, [this.currentSlideIndex]);\n\t\t}\n\t};\n\n\tPresentation.prototype.setupIFrame = function(iFrame, iFrameBridge, state, left) {\n\t\tif(iFrame) {\n\t\t\tvar src = \"slides/\" + iFrameBridge.name + '.html';\n\t\t\tif(iFrameBridge.data[this.role] && iFrameBridge.data[this.role].url) {\n\t\t\t\tsrc = iFrameBridge.data[this.role].url;\n\t\t\t}\n\t\t\tsrc = this.processIFrameSrc(src);\n\t\t\tif(iFrameBridge.isAlreadyCorrectlyAttached(iFrame, src)) {\n\t\t\t\t//console.log(iFrameBridge.name + ' already attached');\n\t\t\t} else {\n\t\t\t\t//leave previous channel of this iframe\n\t\t\t\tif(this.mobileServerBridge) {\n\t\t\t\t\tthis.mobileServerBridge.tryToSend(Constants.LEAVE_SLIDE_ROOM, $(iFrame).attr('name'));\n\t\t\t\t}\n\t\t\t\tthis.attachToIFrame(iFrame, iFrameBridge, src);\n\t\t\t}\n\t\t\tiFrameBridge.setState(state);\n\t\t\t$(iFrame).css('left', left);\n\t\t}\n\t};\n\n\tPresentation.prototype.attachToIFrame = function(iFrame, iFrameBridge, src) {\n\t\t//add the join as a callback for the onload event\n\t\tiFrameBridge.attachToIframe(iFrame, src, this.iFrameLoaded.bind(this, iFrame, iFrameBridge, src));\n\t};\n\n\tPresentation.prototype.iFrameLoaded = function(iFrame, iFrameBridge) {\n\t\t//join new channel\n\t\tif(this.mobileServerBridge) {\n\t\t\tthis.mobileServerBridge.tryToSend(Constants.JOIN_SLIDE_ROOM, $(iFrame).attr('name'));\n\t\t}\n\t};\n\n\tPresentation.prototype.processIFrameSrc = function(src) {\n\t\treturn src;\n\t};\n\n\tPresentation.prototype.createMobileServerBridge = function() {\n\t\t//to implement in extending classes\n\t};\n\n\treturn Presentation;\n\n})();\n","module.exports = (function(){\n\tvar ContentBase = require('../ContentBase');\n\tvar Constants = require('Constants');\n\n\tvar ConsoleElement = require('./ConsoleElement');\n\tvar CodeElement = require('./CodeElement');\n\tvar WebPreviewElement = require('./WebPreviewElement');\n\n\tfunction LiveCode(name) {\n\t\tContentBase.call(this, name);\n\n\t\tthis.slideControlEnabled = false;\n\t\tconsole.log(\"[LiveCode] init\");\n\n\t\t//create the consoles\n\t\tthis.consoleElements = {};\n\t\t$('[data-type=\"console\"]').each((function(index, consoleEl){\n\t\t\tthis.createConsoleElement(consoleEl);\n\t\t}).bind(this));\n\n\t\t//create the previews\n\t\tthis.webPreviewElements = {};\n\t\t$('[data-type=\"web-preview\"]').each((function(index, webPreviewEl){\n\t\t\tthis.createWebPreviewElement(webPreviewEl);\n\t\t}).bind(this));\n\n\t\t//create the code editors\n\t\tthis.codeElements = {};\n\t\t$('[data-type=\"code\"]').each((function(index, codeEl){\n\t\t\tthis.createCodeElement(codeEl);\n\t\t}).bind(this));\n\n\t\t//create run buttons\n\t\t$('[data-type=\"run-button\"]').each((function(index, runButtonEl){\n\t\t\tthis.createRunButton(runButtonEl);\n\t\t}).bind(this));\n\t}\n\n\tLiveCode.prototype = Object.create(ContentBase.prototype);\n\n\tLiveCode.prototype.layout = function() {\n\t\t//might be triggered after split pane resize or tab switch\n\t\t//codemirror instances need to be updated\n\t\tfor(var key in this.codeElements)\n\t\t{\n\t\t\tthis.codeElements[key].layout();\n\t\t}\n\t};\n\n\tLiveCode.prototype.createConsoleElement = function(consoleEl) {\n\t\tvar consoleElement = new ConsoleElement(consoleEl);\n\t\tthis.consoleElements[consoleElement.id] = consoleElement;\n\t};\n\n\tLiveCode.prototype.createWebPreviewElement = function(webPreviewEl) {\n\t\tvar webPreviewElement = new WebPreviewElement(webPreviewEl);\n\t\tthis.webPreviewElements[webPreviewElement.id] = webPreviewElement;\n\t};\n\n\tLiveCode.prototype.createCodeElement = function(codeEl) {\n\t\tvar codeElement = new CodeElement(codeEl);\n\t\tthis.codeElements[codeElement.id] = codeElement;\n\t};\n\n\tLiveCode.prototype.createRunButton = function(runButtonEl) {\n\t\t$(runButtonEl).on('click', (function(){\n\t\t\t//run code in target element\n\t\t\tif(this.codeElements[$(runButtonEl).data('target')]) {\n\t\t\t\tthis.runCode(this.codeElements[$(runButtonEl).data('target')]);\n\t\t\t}\n\t\t}).bind(this));\n\t};\n\n\tLiveCode.prototype.runCode = function(codeElement) {\n\t\tvar code = codeElement.getValue();\n\t\t//where do we run this code? nodejs or in browser?\n\t\tif(codeElement.runtime === 'node')\n\t\t{\n\t\t\t//run as child-app\n\t\t\tthis.postMessage({\n\t\t\t\taction: Constants.CHILD_APP_RUN_CODE,\n\t\t\t\tcode: code\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\t//get the web preview element which is handling this code\n\t\t\tvar webPreviewElement = this.getWebPreviewElementForCodeElement(codeElement);\n\t\t\tif(webPreviewElement)\n\t\t\t{\n\t\t\t\tthis.updateWebPreviewElement(webPreviewElement);\n\t\t\t}\n\t\t}\n\t};\n\n\tLiveCode.prototype.handleMessage = function(message) {\n\t\tvar consoleElement;\n\t\tif(message.action === Constants.CHILD_APP_STDOUT_DATA)\n\t\t{\n\t\t\tconsoleElement = this.getConsoleElement('node');\n\t\t\tif(consoleElement)\n\t\t\t{\n\t\t\t\tconsoleElement.info(message.data);\n\t\t\t}\n\t\t}\n\t\telse if(message.action === Constants.CHILD_APP_STDERR_DATA)\n\t\t{\n\t\t\tconsoleElement = this.getConsoleElement('node');\n\t\t\tif(consoleElement)\n\t\t\t{\n\t\t\t\tconsoleElement.error(message.data);\n\t\t\t}\n\t\t}\n\t};\n\n\tLiveCode.prototype.getConsoleElement = function(runtime) {\n\t\t//<textarea id=\"node-code\" data-type=\"code\" data-runtime=\"node\" data-console=\"node-console\" data-language=\"javascript\">\n\t\tfor(var key in this.codeElements)\n\t\t{\n\t\t\tvar codeElement = this.codeElements[key];\n\t\t\tif(codeElement.runtime === runtime && this.consoleElements[codeElement.console])\n\t\t\t{\n\t\t\t\treturn this.consoleElements[codeElement.console];\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\tLiveCode.prototype.getWebPreviewElementForCodeElement = function(codeElement) {\n\t\treturn this.webPreviewElements[codeElement.processor];\n\t};\n\n\tLiveCode.prototype.updateWebPreviewElement = function(webPreviewElement) {\n\t\t//gather all the code for this element\n\t\tvar blocks = [];\n\t\tfor(var key in this.codeElements)\n\t\t{\n\t\t\tvar codeElement = this.codeElements[key];\n\t\t\tif(codeElement.processor === webPreviewElement.id)\n\t\t\t{\n\t\t\t\tvar block = {\n\t\t\t\t\tlanguage: codeElement.language,\n\t\t\t\t\tcode: codeElement.getValue()\n\t\t\t\t};\n\t\t\t\tblocks.push(block);\n\t\t\t}\n\t\t}\n\t\twebPreviewElement.updateCode(blocks);\n\t};\n\n\tLiveCode.prototype.saveClickHandler = function() {\n\t\tvar code = this.codeMirror.getValue();\n\t\tthis.postMessage({\n\t\t\taction: Constants.CHILD_APP_SAVE_CODE,\n\t\t\tcode: code,\n\t\t\ttype: this.type\n\t\t});\n\t\tthis.postMessage({\n\t\t\taction: Constants.OPEN_COMMAND_LINE\n\t\t});\n\t};\n\n\tLiveCode.prototype.runClickHandler = function() {\n\t\tvar code = this.codeMirror.getValue();\n\t\tthis.postMessage({\n\t\t\taction: Constants.CHILD_APP_RUN_CODE,\n\t\t\tcode: code,\n\t\t\ttype: this.type\n\t\t});\n\t\tthis.postMessage({\n\t\t\taction: Constants.OPEN_CAMERA\n\t\t});\n\t};\n\n\treturn LiveCode;\n\n})();\n","module.exports = (function(){\n\tvar ContentBase = require('../ContentBase');\n\n\tfunction VideoSlide() {\n\t\tvar name = this.getParameterByName('video');\n\t\tContentBase.call(this, name);\n\n\t\tthis.videoPlaying = false;\n\n\t\tthis.video = $('video')[0];\n\t\t$(this.video).attr('src', name);\n\t\t$(this.video).on('click', this.clickHandler.bind(this));\n\t}\n\n\tVideoSlide.prototype = Object.create(ContentBase.prototype);\n\n\t/**\n\t * http://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript\n\t */\n\tVideoSlide.prototype.getParameterByName = function(name) {\n\t\tname = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n\t\tvar regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\"),\n\t\tresults = regex.exec(location.search);\n\t\treturn results == null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n\t};\n\n\tVideoSlide.prototype.clickHandler = function(event) {\n\t\tthis.videoPlaying = !this.videoPlaying;\n\t\tif(this.videoPlaying) {\n\t\t\tthis.video.play();\n\t\t} else {\n\t\t\tthis.video.pause();\n\t\t}\n\t};\n\n\treturn VideoSlide;\n\n})();\n"]}
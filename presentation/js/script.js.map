{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/isomorphic-fetch/fetch-npm-browserify.js","node_modules/process/browser.js","node_modules/whatwg-fetch/fetch.js","src/presentation/js/classes/MobileServerBridge.js","src/presentation/js/classes/NodeAppRunner.js","src/presentation/js/classes/Presentation.js","src/presentation/js/classes/SlideBridge.js","src/presentation/js/classes/live-code/CodeElement.js","src/presentation/js/classes/live-code/ConsoleElement.js","src/presentation/js/classes/live-code/TerminalElement.js","src/presentation/js/classes/live-code/WebPreviewElement.js","src/presentation/js/classes/live-code/index.js","src/presentation/js/script.js","src/server/classes/SlidesFolderParser.js","src/shared/js/Constants.js","src/shared/js/classes/ContentBase.js","src/shared/js/classes/MobileServerBridge.js","src/shared/js/classes/Presentation.js","src/shared/js/classes/SlideBridge.js","src/presentation/js/classes/live-code-slide/index.js","src/presentation/js/classes/megapudding-slide/index.js","src/presentation/js/classes/shake-your-phones-slide/index.js","src/presentation/js/classes/video-slide/index.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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","file":"script.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// the whatwg-fetch polyfill installs the fetch() function\n// on the global object (window or self)\n//\n// Return that as the export for use in Webpack, Browserify etc.\nrequire('whatwg-fetch');\nmodule.exports = self.fetch.bind(self);\n","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var list = this.map[name]\n    if (!list) {\n      list = []\n      this.map[name] = list\n    }\n    list.push(value)\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    var values = this.map[normalizeName(name)]\n    return values ? values[0] : null\n  }\n\n  Headers.prototype.getAll = function(name) {\n    return this.map[normalizeName(name)] || []\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = [normalizeValue(value)]\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n      this.map[name].forEach(function(value) {\n        callback.call(thisArg, value, name, this)\n      }, this)\n    }, this)\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    reader.readAsArrayBuffer(blob)\n    return fileReaderReady(reader)\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    reader.readAsText(blob)\n    return fileReaderReady(reader)\n  }\n\n  var support = {\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob();\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (!body) {\n        this._bodyText = ''\n      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n        // Only support ArrayBuffers for POST method.\n        // Receiving ArrayBuffers happens via Blobs, instead.\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n\n      this.text = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return readBlobAsText(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as text')\n        } else {\n          return Promise.resolve(this._bodyText)\n        }\n      }\n    } else {\n      this.text = function() {\n        var rejected = consumed(this)\n        return rejected ? rejected : Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n    if (Request.prototype.isPrototypeOf(input)) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = input\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this)\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function headers(xhr) {\n    var head = new Headers()\n    var pairs = xhr.getAllResponseHeaders().trim().split('\\n')\n    pairs.forEach(function(header) {\n      var split = header.trim().split(':')\n      var key = split.shift().trim()\n      var value = split.join(':').trim()\n      head.append(key, value)\n    })\n    return head\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = options.statusText\n    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers;\n  self.Request = Request;\n  self.Response = Response;\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request\n      if (Request.prototype.isPrototypeOf(input) && !init) {\n        request = input\n      } else {\n        request = new Request(input, init)\n      }\n\n      var xhr = new XMLHttpRequest()\n\n      function responseURL() {\n        if ('responseURL' in xhr) {\n          return xhr.responseURL\n        }\n\n        // Avoid security warnings on getResponseHeader when not allowed by CORS\n        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n          return xhr.getResponseHeader('X-Request-URL')\n        }\n\n        return;\n      }\n\n      xhr.onload = function() {\n        var status = (xhr.status === 1223) ? 204 : xhr.status\n        if (status < 100 || status > 599) {\n          reject(new TypeError('Network request failed'))\n          return\n        }\n        var options = {\n          status: status,\n          statusText: xhr.statusText,\n          headers: headers(xhr),\n          url: responseURL()\n        }\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n","import MobileServerBridgeBase from '../../../shared/js/classes/MobileServerBridge';\nimport {Constants} from '../../../shared/js/Constants';\n\nexport default class MobileServerBridge extends MobileServerBridgeBase{\n\n  constructor(presentation, settings) {\n    super(presentation, settings);\n    bean.on(this.presentation, Constants.SET_CURRENT_SLIDE_INDEX, this.currentSlideIndexChanged.bind(this));\n  }\n\n  socketConnectHandler() {\n    super.socketConnectHandler();\n    this.tryToSend(Constants.MESSAGE, {\n      target: {\n        client: 'mobile',\n      },\n      content: {\n        action: Constants.SET_CURRENT_SLIDE_INDEX,\n        currentSlideIndex: this.presentation.currentSlideIndex\n      }\n    });\n  }\n\n  currentSlideIndexChanged(currentSlideIndex) {\n    this.tryToSend(Constants.MESSAGE, {\n      target: {\n        client: 'mobile',\n      },\n      content: {\n        action: Constants.SET_CURRENT_SLIDE_INDEX,\n        currentSlideIndex: currentSlideIndex\n      }\n    });\n  }\n\n}\n","let childProcess = requireNode('child_process');\nlet EventEmitter = requireNode('events').EventEmitter;\nlet path = requireNode('path');\n\nlet platform = requireNode('remote').process.platform;\nlet isWin = /^win/.test(platform);\n\n//kill entire process tree\n//http://krasimirtsonev.com/blog/article/Nodejs-managing-child-processes-starting-stopping-exec-spawn\nconst kill = (pid, signal) => {\n  signal = signal || 'SIGKILL';\n  return new Promise((resolve, reject) => {\n    if(!isWin) {\n      let psTree = requireNode('ps-tree');\n      let killTree = true;\n      if(killTree) {\n        psTree(pid, (err, children) => {\n          [pid].concat(children.map(p => p.PID)).forEach(tpid => {\n            try { process.kill(tpid, signal); }\n            catch (ex) { }\n          });\n        });\n      } else {\n        try { process.kill(pid, signal); }\n        catch (ex) { }\n      }\n      resolve();\n    } else {\n      childProcess.exec('taskkill /PID ' + pid + ' /T /F', (error, stdout, stderr) => {\n        resolve();\n      });\n    }\n  });\n};\n\nexport default class NodeAppRunner extends EventEmitter {\n  constructor() {\n    super();\n  }\n  run(applicationPath) {\n    return this.stop()\n    .then(() => {\n      this.cwd = path.dirname(applicationPath);\n      this.numDataEventsReceived = 0;\n      this.ignoreFirstEventsAmount = 0;\n      if(isWin) {\n        this.ignoreFirstEventsAmount = 2;\n        this.runner = childProcess.spawn(\"cmd\", [\"nvmw\", \"use\", \"iojs-v2.3.1\"], {cwd: this.cwd});\n        setTimeout(() => {\n          this.runner.stdin.write(\"node \" + applicationPath + \"\\n\");\n        }, 500);\n      } else {\n        console.log('node ' + applicationPath);\n        this.runner = childProcess.spawn(\"node\", [applicationPath], {cwd: this.cwd});\n      }\n      this.runner.stdout.on('data', data => this.onRunnerData(data));\n      this.runner.stderr.on('data', error => this.onRunnerError(error));\n      this.runner.on('disconnect', () => this.onDisconnect());\n      this.runner.on('close', () => this.onClose());\n      this.runner.on('exit', () => this.onExit());\n    });\n  }\n  onRunnerData(data) {\n    this.numDataEventsReceived++;\n    if(this.numDataEventsReceived <= this.ignoreFirstEventsAmount) {\n      //ignore the first x-messages\n      return;\n    }\n    data = data.toString().trim();\n    if(data.indexOf(this.cwd) === 0) {\n      data = data.substr(this.cwd.length);\n      if(data.length === 1) {\n        return;\n      }\n    }\n    this.emit('stdout-data', data);\n  }\n\n  onRunnerError(error) {\n    this.emit('stderr-data', error.toString().trim());\n  }\n\n  onDisconnect() {\n    console.log('[ChildApp] runner disconnected');\n    this.runner = false;\n  }\n\n  onClose() {\n    console.log('[ChildApp] runner closed');\n    this.runner = false;\n  }\n\n  onExit() {\n    console.log('[ChildApp] runner exited');\n    this.runner = false;\n  }\n\n  stop() {\n    return new Promise((resolve, reject) => {\n      if(!this.runner) {\n        resolve();\n      }\n      this.runner.stdout.removeAllListeners();\n      this.runner.stderr.removeAllListeners();\n      this.runner.stdin.end();\n      //listen for runner events and resolve on the one that occurs\n      let cbCalled = false;\n      // this.runner.on('disconnect', () => {\n      //   console.log('disconnect');\n      //   if(!cbCalled) {\n      //     resolve();\n      //   }\n      // });\n      // this.runner.on('close', () => {\n      //   console.log('close');\n      //   if(!cbCalled) {\n      //     resolve();\n      //   }\n      // });\n      // this.runner.on('exit', () => {\n      //   console.log('exit');\n      //   if(!cbCalled) {\n      //     resolve();\n      //   }\n      // });\n      kill(this.runner.pid).then(() => {\n        resolve();\n      });\n      this.runner = false;\n    });\n  }\n  destroy() {\n    return this.stop()\n    .then(() => {\n    });\n  }\n}\n","import {Constants} from '../../../shared/js/Constants';\nimport PresentationBase from '../../../shared/js/classes/Presentation';\nimport SlideBridge from './SlideBridge';\nimport MobileServerBridge from './MobileServerBridge';\n\nconst path = requireNode('path');\n\nconst KEYCODE_LEFT = 37;\nconst KEYCODE_RIGHT = 39;\n\nexport default class Presentation extends PresentationBase {\n  constructor(data, role, settings) {\n    super(data, role, settings);\n\n    window.onbeforeunload = event => this.closeHandler(event);\n    $(window).on('keydown', event => this.keydownHandler(event));\n    bean.on(this, Constants.SET_CURRENT_SLIDE_INDEX, this.currentSlideIndexChangedHandler.bind(this));\n\n    //forward childapp messages\n    // ChildApp.getInstance().on('stdout-data', this.childAppDataHandler.bind(this));\n    // ChildApp.getInstance().on('stderr-data', this.childAppErrorHandler.bind(this));\n\n    $('body').on(Constants.GO_TO_PREVIOUS_SLIDE, this.goToPreviousSlide.bind(this));\n    $('body').on(Constants.GO_TO_NEXT_SLIDE, this.goToNextSlide.bind(this));\n    $('body').on(Constants.OPEN_COMMAND_LINE, this.openCommandLine.bind(this));\n    $('body').on(Constants.OPEN_CAMERA, this.openCamera.bind(this));\n  }\n\n  closeHandler(event) {\n    // if(ChildApp.getInstance().isRunning()) {\n    //   ChildApp.getInstance().stop(function(){\n    //     console.log('Presentation: childapp stopped');\n    //     requireNode('remote').getCurrentWindow().close();\n    //   });\n    //   return false;\n    // }\n  }\n\n  currentSlideIndexChangedHandler(slideIndex) {\n    console.log('Presentation: currentSlideIndexChangedHandler');\n    // if(ChildApp.getInstance().isRunning()) {\n    //   ChildApp.getInstance().stop(function(){\n    //     console.log('Presentation: childapp stopped');\n    //   });\n    // }\n  }\n\n  createMobileServerBridge() {\n    return new MobileServerBridge(this, this.settings);\n  }\n\n  toggleElevatorMusic() {\n    this.elevatorMusicPlaying = !this.elevatorMusicPlaying;\n    if(this.elevatorMusicPlaying) {\n      this.elevatorMusic.play();\n    } else {\n      this.elevatorMusic.pause();\n    }\n  }\n\n  //prepend urls with file:/// (faster?)\n  processSlideSrc(src) {\n    src = 'file:///' + path.resolve(this.settings.presentationPath, src);\n    src = src.replace(/\\\\/g,\"/\");\n    return src;\n  }\n\n  createSlideBridges(data) {\n    PresentationBase.prototype.createSlideBridges.call(this, data);\n    var that = this;\n    var $slideMenu = $('#slideMenu');\n    var numSlideBridges = this.slideBridges.length;\n    for(var i = 0; i < numSlideBridges; i++) {\n      var slideBridge = this.slideBridges[i];\n      $slideMenu.append('<button type=\"button\" data-slidenr=\"' + i + '\" class=\"dropdown-item\">' + (i + 1) + ' ' + slideBridge.name + '</button>');\n    }\n    $slideMenu.find('button').on('click', function(event){\n      event.preventDefault();\n      that.setCurrentSlideIndex(parseInt($(this).data('slidenr')));\n    });\n  }\n\n  createSlideBridge(slide) {\n    //use our own bridge which doesn't use fetch\n    return new SlideBridge(slide);\n  }\n\n  slideMessageHandler(event) {\n    PresentationBase.prototype.slideMessageHandler.call(this, event);\n    if(!event.data) {\n      return;\n    }\n    switch(event.data.action) {\n      case Constants.GO_TO_PREVIOUS_SLIDE:\n        this.goToPreviousSlide();\n        break;\n      case Constants.GO_TO_NEXT_SLIDE:\n        this.goToNextSlide();\n        break;\n      case Constants.OPEN_COMMAND_LINE:\n        this.openCommandLine();\n        break;\n      case Constants.OPEN_CAMERA:\n        this.openCamera();\n        break;\n      case Constants.CHILD_APP_SAVE_CODE:\n        ChildApp.getInstance().saveCode(event.data.code, event.data.type);\n        break;\n      case Constants.CHILD_APP_RUN_CODE:\n        ChildApp.getInstance().runCode(event.data.code, event.data.type);\n        break;\n    }\n  }\n\n  keydownHandler(event) {\n    //one frame delay\n    window.requestAnimationFrame(() => {\n      if(event.isImmediatePropagationStopped()) {\n        return;\n      }\n      switch(event.keyCode) {\n        case KEYCODE_LEFT:\n          this.goToPreviousSlide();\n          break;\n        case KEYCODE_RIGHT:\n          this.goToNextSlide();\n          break;\n      }\n    });\n  }\n\n  childAppDataHandler(data) {\n    var currentSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex);\n    if(currentSlideBridge) {\n      currentSlideBridge.tryToPostMessage({\n        action: Constants.CHILD_APP_STDOUT_DATA,\n        data: data\n      });\n    }\n  }\n\n  childAppErrorHandler(data) {\n    var currentSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex);\n    if(currentSlideBridge) {\n      currentSlideBridge.tryToPostMessage({\n        action: Constants.CHILD_APP_STDERR_DATA,\n        data: data\n      });\n    }\n  }\n\n  openCommandLine() {\n    $('#consoleModal').modal('show');\n  }\n\n  openCamera() {\n    $('#webcamModal').modal('show');\n  }\n\n  handleMobileServerMessage(message) {\n    if(message.content) {\n      if(message.content.action === 'goToNextSlide') {\n        this.goToNextSlide();\n      } else if(message.content.action === 'goToPreviousSlide') {\n        this.goToPreviousSlide();\n      }\n    }\n  }\n}\n","import SlideBridgeBase from '../../../shared/js/classes/SlideBridge';\n\nexport default class SlideBridge extends SlideBridgeBase {\n\n  attachToSlideHolder(slideHolder, src, cb) {\n    this.slideHolder = slideHolder;\n    //notify the content it is being cleared\n    this.tryToPostMessage({action: 'destroy'});\n    //clear the current content\n    this.slideHolder.innerHTML = '';\n    $(slideHolder).attr('data-name', this.name);\n    $(slideHolder).addClass('loading');\n\n    $(slideHolder).on('load', () => {\n      this.tryToPostMessage({\n        action: 'setState',\n        state: this.state\n      });\n      $(slideHolder).off('load');\n    });\n\n    if(src !== $(slideHolder).attr('data-src')) {\n      //create html import\n      var $importEl = $('<link rel=\"import\">');\n      var importEl = $importEl[0];\n      $importEl.on('load', (function(){\n        var template = importEl.import.querySelector('template');\n        if(template) {\n          var clone = document.importNode(template.content, true);\n          this.slideHolder.appendChild(clone);\n        }\n        $importEl.remove();\n        $(slideHolder).removeClass('loading');\n        cb();\n      }).bind(this));\n      $(slideHolder).html($importEl);\n      $importEl.attr('href', src);\n      $(slideHolder).attr('data-src', src);\n    }\n  };\n}\n","const fs = requireNode('fs-promise');\n\nexport default class CodeElement {\n  constructor(el, options) {\n    this.el = el;\n    this.$el = $(el);\n    //options\n    if(!options)\n    {\n      options = {};\n    }\n\n    let width = $(el).parent()[0].style.width ||'100%';\n    let height = $(el).parent()[0].style.height ||'100%';\n\n    //wrap element in a container\n    this.$wrapperEl = $(el).wrap('<div class=\"live-code-element live-code-code-element\"></div>').parent();\n    this.wrapperEl = this.$wrapperEl[0];\n\n    this.id = this.$el.attr('data-id');\n    this.file = this.$el.data('file');\n\n    if(!this.id && this.file)\n    {\n      this.id = this.file;\n    }\n    if(!this.id)\n    {\n      this.id = 'code-' + Math.round(Math.random() * 1000 * new Date().getTime());\n    }\n    this.$el.attr('data-id', this.id);\n\n    this.runtime = this.$el.data('runtime');\n    if(!this.runtime)\n    {\n      this.runtime = 'browser';\n    }\n\n    this.console = this.$el.data('console');\n    this.processor = this.$el.data('processor');\n\n    //language is programming language - used for injecting in html\n    this.language = this.$el.data('language');\n    if(!this.language)\n    {\n      //default to javascript\n      this.language = \"javascript\";\n    }\n\n    //mode is mode for codemirror\n    this.mode = this.$el.data('mode');\n    if(!this.mode)\n    {\n      //default to the language\n      this.mode = this.language;\n    }\n\n    this.codeMirror = CodeMirror.fromTextArea(this.el, {\n      lineNumbers: true,\n      mode: this.mode,\n      extraKeys: {\"Ctrl-Space\": \"autocomplete\"}\n    });\n\n    this.codeMirror.setSize(width, height);\n\n    //this.$el.css('width', '100%').css('height', '100%');\n    this.layout();\n  }\n\n  stop() {\n  }\n\n  destroy() {\n    stop();\n  }\n\n  getValue() {\n    return this.codeMirror.getValue();\n  }\n\n  setValue(value) {\n    this.codeMirror.setValue(value);\n  }\n\n  saveToFile(filePath) {\n    return fs.writeFile(filePath, this.getValue());\n  }\n\n  readFromFile(filePath) {\n    return fs.readFile(filePath, 'utf8')\n      .then(data => {\n        this.setValue(data);\n        return data;\n      });\n  }\n\n  layout() {\n    // this.$wrapperEl.find('.CodeMirror-scroll').css('max-height', this.$wrapperEl.css('height'));\n    this.codeMirror.refresh();\n  }\n}\n","import NodeAppRunner from '../NodeAppRunner';\n\nconst htmlEscape = (str) => {\n  return String(str).replace(/&/g, '&amp;')\n    .replace(/\\\"/g, '&quot;')\n    .replace(/'/g, '&#39;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;');\n};\n\nconst needsJSONConversion = (arg) => {\n  if(\n    typeof arg === 'number' ||\n    typeof arg === 'string' ||\n    typeof arg === 'boolean'\n  ) {\n    return false;\n  }\n  return true;\n};\n\nexport default class ConsoleElement {\n\n  constructor(el, options) {\n    this.el = el;\n    this.$el = $(el);\n\n    this.nodeAppRunner = new NodeAppRunner();\n    this.nodeAppRunner.on('stdout-data', data => this.info([data]));\n    this.nodeAppRunner.on('stderr-data', error => this.error([error]));\n\n    //options\n    if(!options) {\n      options = {};\n    }\n    //wrap element in a container\n    this.$wrapperEl = $(el).wrap('<div class=\"live-code-element live-code-console-element unreset\"></div>').parent();\n    this.wrapperEl = this.$wrapperEl[0];\n\n    this.id = this.$el.attr('data-id');\n    if(!this.id)\n    {\n      //generate id\n      this.id = 'code-' + Math.round(Math.random() * 1000 * new Date().getTime());\n      this.$el.attr('data-id', this.id);\n    }\n\n    this.file = this.$el.data('file');\n\n    this.$el.css('width', '100%').css('height', '100%');\n\n    this.logs = [];\n  }\n\n  stop() {\n    this.nodeAppRunner.stop();\n  }\n\n  destroy() {\n    stop();\n  }\n\n  runNodeApp(applicationPath) {\n    this.nodeAppRunner.run(applicationPath);\n  }\n\n  info(args) {\n    var str = '';\n    args.forEach(function(arg){\n      if(str.length > 0) {\n        str += ' ';\n      }\n      //is it an object or a simple type?\n      if(needsJSONConversion(arg)) {\n        arg = JSON.stringify(arg);\n      }\n      str += htmlEscape(arg);\n    });\n    this.logs.push('<pre>' + str + '</pre>');\n    while(this.logs.length > 20) {\n      this.logs.shift();\n    }\n    var html = this.logs.join('');\n    this.el.innerHTML = html;\n    this.wrapperEl.scrollTop = this.wrapperEl.scrollHeight;\n  }\n\n  error(args) {\n    var str = '';\n    args.forEach(function(arg){\n      if(str.length > 0) {\n        str += ' ';\n      }\n      //is it an object or a simple type?\n      if(needsJSONConversion(arg)) {\n        arg = JSON.stringify(arg);\n      }\n      str += htmlEscape(arg);\n    });\n    this.logs.push('<pre class=\"console-error\">' + str + '</pre>');\n    while(this.logs.length > 20) {\n      this.logs.shift();\n    }\n    var html = this.logs.join('');\n    this.el.innerHTML = html;\n    this.wrapperEl.scrollTop = this.wrapperEl.scrollHeight;\n  }\n}\n","export default class TerminalElement {\n\n  constructor(el, options) {\n    this.el = el;\n    this.$el = $(el);\n\n    //options\n    if(!options) {\n      options = {};\n    }\n    //wrap element in a container\n    this.$wrapperEl = $(el).wrap('<div class=\"live-code-element live-code-terminal-element\"></div>').parent();\n    this.wrapperEl = this.$wrapperEl[0];\n\n    this.id = this.$el.attr('data-id');\n    if(!this.id)\n    {\n      //generate id\n      this.id = 'code-' + Math.round(Math.random() * 1000 * new Date().getTime());\n      this.$el.attr('data-id', this.id);\n    }\n\n    this.dir = this.$el.data('dir');\n\n    this.$el.css('width', '100%').css('height', '100%');\n\n    //create a webview tag\n    if(this.webview) {\n      this.webview.parentNode.removeChild(this.webview);\n      this.webview = false;\n    }\n    this.webview = document.createElement('webview');\n    this.webview.style.width = '100%';\n    this.webview.style.height = '100%';\n    this.el.appendChild(this.webview);\n    this.webview.setAttribute('src', 'http://localhost:3000?dir=' + this.dir);\n  }\n\n  stop() {\n    if(this.webview) {\n      this.webview.parentNode.removeChild(this.webview);\n      this.webview = false;\n    }\n  }\n\n  destroy() {\n    stop();\n  }\n}\n","export default class WebPreviewElement {\n\n\tconstructor(el, options) {\n    this.el = el;\n    this.$el = $(el);\n    //options\n    if(!options) {\n      options = {};\n    }\n\t\t//wrap element in a container\n\t\tthis.$wrapperEl = $(el).wrap('<div class=\"live-code-element live-code-web-preview-element\"></div>').parent();\n\t\tthis.wrapperEl = this.$wrapperEl[0];\n\n\t\tthis.id = this.$el.attr('data-id');\n\t\tif(!this.id)\n\t\t{\n\t\t\t//generate id\n\t\t\tthis.id = 'code-' + Math.round(Math.random() * 1000 * new Date().getTime());\n\t\t\tthis.$el.attr('data-id', this.id);\n\t\t}\n\n    this.file = this.$el.data('file');\n\n\t\tthis.console = this.$el.data('console');\n\n\t\tthis.$el.css('width', '100%').css('height', '100%');\n\t}\n\n\tdestroy() {\n    stop();\n\t}\n\n  stop() {\n    if(this.webview) {\n      this.webview.parentNode.removeChild(this.webview);\n      this.webview = false;\n    }\n  }\n\n  _createWebview() {\n    //create a webview tag\n    if(this.webview) {\n      this.webview.parentNode.removeChild(this.webview);\n      this.webview = false;\n    }\n    this.webview = document.createElement('webview');\n    this.webview.style.width = '100%';\n    this.webview.style.height = '100%';\n    this.webview.preload = 'js/webpreview.js';\n    this.el.appendChild(this.webview);\n  }\n\n  updateUrl(url) {\n    this._createWebview();\n    this.webview.addEventListener(\"dom-ready\", (function(){\n      //inject console logging code\n      console.log('dom-ready');\n    }).bind(this));\n\n    this.webview.addEventListener('ipc-message', (function(event) {\n      if(event.channel === 'console.log')\n      {\n        //notify live code editor\n        this.$wrapperEl.trigger('console.log', event.args[0]);\n      }\n      else if(event.channel === 'console.error')\n      {\n        //notify live code editor\n        this.$wrapperEl.trigger('console.error', event.args[0]);\n      }\n    }).bind(this));\n\n    this.webview.setAttribute('nodeintegration', '');\n    this.webview.setAttribute('src', url);\n  }\n\n\tupdateCode(blocks) {\n\t\tthis._createWebview();\n\n\t\tvar htmlSrc = '';\n\t\tfor(var i = 0; i < blocks.length; i++)\n\t\t{\n\t\t\thtmlSrc += blocks[i].code;\n\t\t}\n\n\t\tthis.webview.addEventListener(\"dom-ready\", (function(){\n      if(this.$el.attr('data-open-devtools')) {\n        this.webview.openDevTools();\n      }\n\t\t}).bind(this));\n\n\t\tthis.webview.addEventListener('ipc-message', (function(event) {\n      if(event.channel === 'request-html')\n      {\n        this.webview.send('receive-html', htmlSrc);\n      }\n      else if(event.channel === 'console.log')\n      {\n        //notify live code editor\n        this.$wrapperEl.trigger('console.log', event.args[0]);\n      }\n      else if(event.channel === 'console.error')\n      {\n        //notify live code editor\n        this.$wrapperEl.trigger('console.error', event.args[0]);\n      }\n    }).bind(this));\n\n\t\tthis.webview.setAttribute('nodeintegration', '');\n\t\tthis.webview.setAttribute('src', 'webpreview.html');\n\t}\n}\n","import ConsoleElement from './ConsoleElement';\nimport TerminalElement from './TerminalElement';\nimport CodeElement from './CodeElement';\nimport WebPreviewElement from './WebPreviewElement';\n\nconst path = requireNode('path');\nconst fs = requireNode('fs-promise');\n\nexport default class LiveCode {\n\n  constructor($el, config, readyCallback) {\n    this.$el = $el;\n    this.el = this.$el[0];\n\n    if(this.$el.attr('data-entry-path')) {\n      this.entryPath = path.join(config.presentationPath, this.$el.attr('data-entry-path'));\n    }\n    if(this.$el.attr('data-output-path')) {\n      this.outputPath = path.join(config.presentationPath, this.$el.attr('data-output-path'));\n    } else {\n      if(this.entryPath) {\n        this.outputPath = this.entryPath;\n      }\n    }\n\n    let p = Promise.resolve();\n    p.then(() =>{\n      if(this.entryPath && this.entryPath !== this.outputPath) {\n        return fs.copy(this.entryPath, this.outputPath);\n      }\n    })\n    .then(() => {\n      //create the consoles\n      this.consoleElements = {};\n      this.$el.find('[data-type=\"console\"]').each(((index, consoleEl) => this.createConsoleElement(consoleEl)));\n\n      //create the terminals\n      this.terminalElements = {};\n      this.$el.find('[data-type=\"terminal\"]').each(((index, terminalEl) => this.createTerminalElement(terminalEl)));\n\n      //create the previews\n      this.webPreviewElements = {};\n      this.$el.find('[data-type=\"web-preview\"]').each(((index, webPreviewEl) => this.createWebPreviewElement(webPreviewEl)));\n\n      //create the code editors\n      this.codeElements = {};\n      this.$el.find('[data-type=\"code\"]').each(((index, codeEl) => this.createCodeElement(codeEl)));\n\n      //create run buttons\n      this.runButtonEls = [];\n      this.$el.find('[data-type=\"run-button\"]').each(((index, runButtonEl) => this.createRunButton(runButtonEl)));\n\n      //create save buttons\n      this.saveButtonEls = [];\n      this.$el.find('[data-type=\"save-button\"]').each(((index, saveButtonEl) => this.createSaveButton(saveButtonEl)));\n\n      //create reload buttons\n      this.reloadButtonEls = [];\n      this.$el.find('[data-type=\"reload-button\"]').each(((index, reloadButtonEl) => this.createReloadButton(reloadButtonEl)));\n\n    })\n    .then(() => this.setCodeElementValuesFromFiles())\n    .then(readyCallback).catch(err => console.log(err));\n\n    //disable keyboard bubbling up\n    $(window).on('keydown', event => this.keyDownHandler(event));\n  }\n\n  keyDownHandler(e) {\n    if(this.el.contains(document.activeElement)) {\n      e.stopImmediatePropagation();\n    }\n  }\n\n  /**\n   * return a previously created code element, based on the input\n   * input can be:\n   *  - html dom element\n   *  - id of code element\n   *\n   * returns the code element if found, otherwise returns false\n   */\n  getCodeElement(input) {\n    let propertyToCheck = 'id';\n    if(input.nodeName) {\n      propertyToCheck = 'el';\n    }\n    for(let key in this.codeElements)\n    {\n      if(this.codeElements[key][propertyToCheck] === input) {\n        return this.codeElements[key];\n      }\n    }\n    return false;\n  }\n\n  setCodeElementValueFromFile(codeElement, filePath) {\n    return codeElement.readFromFile(filePath);\n  }\n\n  saveCodeElementToFile(codeElement, filePath) {\n    return codeElement.saveToFile(filePath);\n  }\n\n  getFilePath(file) {\n    if(!file) {\n      return false;\n    }\n    if(this.outputPath) {\n      return path.join(this.outputPath, file);\n    }\n    return file;\n  }\n\n  getFilePathForCodeElement(codeElement) {\n    if(!codeElement.file) {\n      return false;\n    }\n    return this.getFilePath(codeElement.file);\n  }\n\n  setCodeElementValuesFromFiles() {\n    let tasks = [];\n    let key;\n    let codeElement;\n    let filePath;\n    for(key in this.codeElements)\n    {\n      codeElement = this.codeElements[key];\n      filePath = this.getFilePathForCodeElement(codeElement);\n      if(filePath)\n      {\n        tasks.push(this.setCodeElementValueFromFile(codeElement, filePath));\n      }\n    }\n    return Promise.all(tasks);\n  }\n\n  saveCodeElementsToFiles() {\n    let tasks = [];\n    let key;\n    let codeElement;\n    let filePath;\n    for(key in this.codeElements)\n    {\n      codeElement = this.codeElements[key];\n      filePath = this.getFilePathForCodeElement(codeElement);\n      if(filePath)\n      {\n        tasks.push(this.saveCodeElementToFile(codeElement, filePath));\n      }\n    }\n    return Promise.all(tasks);\n  }\n\n  destroy() {\n    let key;\n    for(key in this.consoleElements)\n    {\n      this.destroyConsoleElement(this.consoleElements[key]);\n    }\n    for(key in this.terminalElements)\n    {\n      this.destroyTerminalElement(this.terminalElements[key]);\n    }\n    for(key in this.webPreviewElements)\n    {\n      this.destroyWebPreviewElement(this.webPreviewElements[key]);\n    }\n    for(key in this.codeElements)\n    {\n      this.destroyCodeElement(this.codeElements[key]);\n    }\n    this.runButtonEls.forEach(el => this.destroyRunButton(el));\n    this.saveButtonEls.forEach(el => this.destroySaveButton(el));\n    this.reloadButtonEls.forEach(el => this.destroyReloadButton(el));\n    //TODO: destroy the tmp directory for this instance\n  }\n\n  stop() {\n    let key;\n    for(key in this.consoleElements)\n    {\n      this.consoleElements[key].stop();\n    }\n    for(key in this.terminalElements)\n    {\n      this.terminalElements[key].stop();\n    }\n    for(key in this.webPreviewElements)\n    {\n      this.webPreviewElements[key].stop();\n    }\n    for(key in this.codeElements)\n    {\n      this.codeElements[key].stop();\n    }\n  }\n\n  layout() {\n    //might be triggered after split pane resize or tab switch\n    //codemirror instances need to be updated\n    for(let key in this.codeElements)\n    {\n      this.codeElements[key].layout();\n    }\n  }\n\n  createConsoleElement(consoleEl) {\n    let consoleElement = new ConsoleElement(consoleEl);\n    this.consoleElements[consoleElement.id] = consoleElement;\n  }\n\n  destroyConsoleElement(consoleElement) {\n    consoleElement.destroy();\n  }\n\n  createTerminalElement(terminalEl) {\n    let terminalElement = new TerminalElement(terminalEl);\n    this.terminalElements[terminalElement.id] = terminalElement;\n  }\n\n  destroyTerminalElement(terminalElement) {\n    terminalElement.destroy();\n  }\n\n  createWebPreviewElement(webPreviewEl) {\n    let webPreviewElement = new WebPreviewElement(webPreviewEl);\n    webPreviewElement.$wrapperEl.on('console.log', this.webPreviewConsoleLogHandler.bind(this, webPreviewElement));\n    webPreviewElement.$wrapperEl.on('console.error', this.webPreviewConsoleErrorHandler.bind(this, webPreviewElement));\n    this.webPreviewElements[webPreviewElement.id] = webPreviewElement;\n  }\n\n  destroyWebPreviewElement(webPreviewElement) {\n    webPreviewElement.$wrapperEl.off('console.log');\n    webPreviewElement.$wrapperEl.off('console.error');\n    webPreviewElement.destroy();\n  }\n\n  createCodeElement(codeEl) {\n    let codeElement = new CodeElement(codeEl);\n    this.codeElements[codeElement.id] = codeElement;\n  }\n\n  destroyCodeElement(codeElement) {\n    codeElement.destroy();\n  }\n\n  createRunButton(runButtonEl) {\n    this.runButtonEls.push(runButtonEl);\n    $(runButtonEl).on('click', (event => {\n      if(this.webPreviewElements[$(runButtonEl).data('target')]) {\n        //save the files first\n        this.saveCodeElementsToFiles()\n          .catch(err =>console.log(err))\n          .then(() => {\n            //update the web preview\n            this.updateWebPreviewElement(this.webPreviewElements[$(runButtonEl).data('target')]);\n          });\n      } else if(this.consoleElements[$(runButtonEl).data('target')]) {\n        let applicationPath = this.getFilePath(this.consoleElements[$(runButtonEl).data('target')].file);\n        this.consoleElements[$(runButtonEl).data('target')].runNodeApp(applicationPath);\n      }\n    }));\n  }\n\n  destroyRunButton(runButtonEl) {\n    $(runButtonEl).off('click');\n  }\n\n  createSaveButton(saveButtonEl) {\n    var self = this;\n    this.saveButtonEls.push(saveButtonEl);\n    $(saveButtonEl).on('click', (function(){\n      //get the code element for this reload button\n      var codeElement = self.getCodeElement($(saveButtonEl).data('target'));\n      if(!codeElement) {\n        return;\n      }\n      var filePath = self.getFilePathForCodeElement(codeElement);\n      if(!filePath) {\n        return;\n      }\n      codeElement.saveToFile(filePath).catch(function(err) { console.log(err); });\n    }).bind(this));\n  }\n\n  destroySaveButton(saveButtonEl) {\n    $(saveButtonEl).off('click');\n  }\n\n  createReloadButton(reloadButtonEl) {\n    var self = this;\n    this.reloadButtonEls.push(reloadButtonEl);\n    $(reloadButtonEl).on('click', (function(){\n      //get the code element for this reload button\n      var codeElement = self.getCodeElement($(reloadButtonEl).data('target'));\n      if(!codeElement) {\n        return;\n      }\n      var filePath = self.getFilePathForCodeElement(codeElement);\n      if(!filePath) {\n        return;\n      }\n      codeElement.readFromFile(filePath).catch(function(err) { console.log(err); });\n    }).bind(this));\n  }\n\n  destroyReloadButton(reloadButtonEl) {\n    $(reloadButtonEl).off('click');\n  }\n\n  webPreviewConsoleLogHandler(webPreviewElement, event, message) {\n    //get the console element for this web preview\n    var consoleElement = this.getConsoleElementForWebPreview(webPreviewElement);\n    if(consoleElement)\n    {\n      consoleElement.info(JSON.parse(message).args);\n    }\n  }\n\n  webPreviewConsoleErrorHandler(webPreviewElement, event, message) {\n    //get the console element for this web preview\n    var consoleElement = this.getConsoleElementForWebPreview(webPreviewElement);\n    if(consoleElement)\n    {\n      consoleElement.error(JSON.parse(message).args);\n    }\n  }\n\n  getConsoleElementForWebPreview(webPreviewElement) {\n    return this.consoleElements[webPreviewElement.console];\n  }\n\n  getWebPreviewElementForCodeElement(codeElement) {\n    return this.webPreviewElements[codeElement.processor];\n  }\n\n  updateWebPreviewElement(webPreviewElement) {\n    //load a file or code blocks?\n    if(webPreviewElement.file) {\n      if(this.outputPath) {\n        webPreviewElement.updateUrl(path.join(this.outputPath, webPreviewElement.file));\n      } else {\n        webPreviewElement.updateUrl(webPreviewElement.file);\n      }\n      return;\n    }\n\n    //gather all the code for this element\n    var blocks = [];\n    for(var key in this.codeElements)\n    {\n      var codeElement = this.codeElements[key];\n      if(codeElement.processor === webPreviewElement.id)\n      {\n        var block = {\n          language: codeElement.language,\n          code: codeElement.getValue()\n        };\n        blocks.push(block);\n      }\n    }\n    webPreviewElement.updateCode(blocks);\n  }\n\n}\n","import Presentation from './classes/Presentation';\nimport SlidesFolderParser from '../../server/classes/SlidesFolderParser';\n\n(() => {\n\n  const remote = requireNode('electron').remote;\n  const presentationPath = remote.getGlobal('__dirname');\n  const path = requireNode('path');\n\n  const init = () => {\n    let settings = {\n      presentationPath: presentationPath,\n      mobileServerUrl: 'http://localhost:5000',\n      mobileServerUsername: 'wouter.verweirder@gmail.com',\n      mobileServerPassword: 'geheim'\n    };\n    let slidesFolderParser = new SlidesFolderParser();\n    slidesFolderParser.parse(presentationPath, path.resolve(presentationPath, 'slides'))\n      .then(data => {\n        new Presentation(data, 'presentation', settings);\n      });\n  };\n\n  init();\n})();\n","if(!(typeof window !== 'undefined' && window)) {\n  var requireNode = require;\n} else {\n  var requireNode = window.requireNode;\n}\n\nconst fs = requireNode('fs-promise');\nconst path = requireNode('path');\n\nconst getFileProperties = filePath => {\n  let _fd, _o;\n  return fs.open(filePath, 'r')\n    .then(fd => {\n      _fd = fd;\n      return fd;\n    })\n    .then(fd => fs.fstat(fd))\n    .then(o => {\n      _o = o;\n      return _o;\n    })\n    .then(o => fs.close(_fd))\n    .then(() => {\n      return {\n        path: filePath,\n        isDirectory: _o.isDirectory(),\n        isFile: _o.isFile()\n      };\n    });\n};\nexport default class SlidesFolderParser {\n  constructor() {\n  }\n  parse(presentationPath, slidesFolderPath) {\n    //read the contents of the slides directory\n    return fs.readdir(slidesFolderPath)\n      .then(result => result.filter(name => name.indexOf('.') > 0))\n      .then(result => result.map(name => path.resolve(slidesFolderPath, name)))\n      .then(result => Promise.all(result.map(filePath => getFileProperties(filePath))))\n      .then(result => {\n        let data = {\n          slides: []\n        };\n        let slidesByName = {};\n        result.forEach(props => {\n          let slide = this.createSlideObjectBasedOnFileProperties(props, presentationPath, slidesByName);\n          if(!slidesByName[slide.name]) {\n            data.slides.push(slide);\n          }\n          slidesByName[slide.name] = slide;\n        });\n        console.log(data.slides);\n        return data;\n      })\n      .catch(e => {\n        console.error(e);\n      });\n  }\n\n  parseSlideBaseName(slideBaseName) {\n    let parsed = {};\n    parsed.ext = path.extname(slideBaseName);\n    parsed.name = slideBaseName.substr(0, slideBaseName.length - parsed.ext.length);\n    let splitted = parsed.name.split('.');\n    let keywords = ['mobile', 'desktop', 'muted', 'loop'];\n    keywords.forEach(keyword => {\n      let index = splitted.indexOf(keyword);\n      if(index > -1) {\n        parsed[keyword] = true;\n        splitted.splice(index, 1);\n      }\n    });\n    parsed.name = splitted.join('.');\n    return parsed;\n  }\n\n  createSlideObjectBasedOnFileProperties(fileProperties, presentationPath, slidesByName) {\n\n    let parsed = this.parseSlideBaseName(path.basename(fileProperties.path));\n    let url = path.relative(presentationPath, fileProperties.path);\n    if(parsed.ext === '.jpg' || parsed.ext === '.jpeg' || parsed.ext === '.gif' || parsed.ext === '.png') {\n      url = 'slides-builtin/image.html?image=' + url;\n    }\n    if(parsed.ext === '.mp4') {\n      url = 'slides-builtin/video.html?video=' + url;\n    }\n    if(slidesByName[parsed.name]) {\n      if(parsed.mobile) {\n        slidesByName[parsed.name].mobile.url = url;\n        slidesByName[parsed.name].mobile.explicit = true;\n      } else if(parsed.desktop) {\n        slidesByName[parsed.name].presentation.url = url;\n        slidesByName[parsed.name].presentation.explicit = true;\n      } else {\n        //set the one which is not set explicitly\n        if(slidesByName[parsed.name].mobile.explicit) {\n          slidesByName[parsed.name].presentation.url = url;\n        } else {\n          slidesByName[parsed.name].mobile.url = url;\n        }\n        return slidesByName[parsed.name];\n      }\n    }\n\n    return {\n      name: parsed.name,\n      presentation: {\n        url: url,\n        explicit: false\n      },\n      mobile: {\n        url: url,\n        explicit: false\n      }\n    };\n  }\n}\n","export const Constants = {\n  GO_TO_PREVIOUS_SLIDE : 'goToPreviousSlide',\n  GO_TO_NEXT_SLIDE : 'goToNextSlide',\n  SET_SLIDES : 'setSlides',\n  SET_CURRENT_SLIDE_INDEX : 'setCurrentSlideIndex',\n\n  MESSAGE : 'message',\n  SOCKET_SEND : 'socketSend',\n  SOCKET_RECEIVE : 'socketReceive',\n  JOIN_SLIDE_ROOM : 'joinSlideRoom',\n  LEAVE_SLIDE_ROOM : 'leaveSlideRoom',\n\n  ROLE_PRESENTATION : 'presentation',\n  ROLE_MOBILE : 'mobile',\n\n  STATE_ACTIVE : 'active',\n  STATE_INACTIVE : 'inactive',\n\n  SET_SUBSTATE : 'setSubstate',\n\n  CHILD_APP_SAVE_CODE : 'childAppSaveCode',\n  CHILD_APP_RUN_CODE : 'childAppRunCode',\n  CHILD_APP_STDOUT_DATA : 'childAppStdoutData',\n  CHILD_APP_STDERR_DATA : 'childAppStderrData',\n\n  OPEN_COMMAND_LINE: 'openCommandLine',\n  OPEN_CAMERA: 'openCamera',\n\n  SET_TEAM : 'setTeam',\n  UPDATE_MOTION : 'updateMotion',\n\n  YOU_WIN : 'youWin',\n  YOU_LOSE : 'youLose',\n\n  SHAKE_YOUR_PHONES_INTRO : 'shakeYourPhonesIntro',\n  SHAKE_YOUR_PHONES_GAME : 'shakeYourPhonesGame',\n  SHAKE_YOUR_PHONES_FINISHED : 'shakeYourPhonesFinished',\n\n  SHAKE_YOUR_PHONES_CLIENT_ADDED : 'shakeYourPhonesClientAdded',\n  SHAKE_YOUR_PHONES_CLIENT_REMOVED : 'shakeYourPhonesClientRemoved',\n  SHAKE_YOUR_PHONES_CLIENT_LIST : 'shakeYourPhonesClientList',\n  SHAKE_YOUR_PHONES_CLIENT_UPDATE : 'shakeYourPhonesClientUpdate'\n};\n","import {Constants} from '../Constants';\n\nexport default class ContentBase{\n\n  constructor($slideHolder) {\n    this.$slideHolder = $slideHolder;\n    this.src = $slideHolder.attr('data-src');\n    this.name = $slideHolder.attr('data-name');\n    this.fps = 60;\n    this._animationFrameId = false;\n    this._currentTime = 0;\n    this._delta = 0;\n    this._interval = false;\n    this._lastTime = new Date().getTime();\n    this.currentFrame = 0;\n\n    this.startListeningForMessages();\n\n    this.__drawLoop = this._drawLoop.bind(this);\n    this._interval = 1000 / this.fps;\n\n    window.requestAnimationFrame(() => {\n      $slideHolder.trigger('load');\n    });\n  }\n\n  startListeningForMessages() {\n    this._slideHolderMessageToSlideHandler = this.slideHolderMessageToSlideHandler.bind(this);\n    this.$slideHolder.on('message-to-slide', this._slideHolderMessageToSlideHandler);\n  }\n\n  stopListeningForMessages() {\n    this.$slideHolder.off('message-to-slide', this._slideHolderMessageToSlideHandler);\n  }\n\n  slideHolderMessageToSlideHandler(event, message) {\n    this.receiveMessage({data: message});\n  }\n\n  receiveMessage(event) {\n    if(!event.data) {\n      return;\n    }\n    switch(event.data.action) {\n      case 'setState':\n        this.setState(event.data.state);\n        break;\n      case 'destroy':\n        this.destroy();\n        break;\n      case Constants.SOCKET_RECEIVE:\n        this.receiveSocketMessage(event.data.message);\n        break;\n      default:\n        this.handleMessage(event.data);\n        break;\n    }\n  }\n\n  destroy() {\n    this.stopListeningForMessages();\n    window.cancelAnimationFrame(this._animationFrameId);\n  }\n\n  postMessage(data) {\n    this.$slideHolder.trigger('message-from-slide', data);\n  }\n\n  handleMessage(data) {\n  }\n\n  postSocketMessage(message) {\n    this.postMessage({\n      action: Constants.SOCKET_SEND,\n      message: message\n    });\n  }\n\n  receiveSocketMessage(message) {\n    //console.log('receiveSocketMessageame, message);\n  }\n\n  setState(state) {\n    if(state !== this.state) {\n      this.state = state;\n      this.onStateChanged();\n      if(this.state === Constants.STATE_ACTIVE) {\n        this.currentFrame = 0;\n        this._drawLoop();\n      } else {\n        window.cancelAnimationFrame(this._animationFrameId);\n      }\n    }\n  }\n\n  onStateChanged() {\n  }\n\n  _drawLoop() {\n    this._animationFrameId = window.requestAnimationFrame(this.__drawLoop);\n    this._currentTime = (new Date()).getTime();\n      this._delta = (this._currentTime - this._lastTime);\n      if(this._delta > this._interval) {\n        this.currentFrame++;\n        this.drawLoop(this._delta);\n        this._lastTime = this._currentTime - (this._delta % this._interval);\n      }\n  }\n\n  drawLoop(delta) {\n  }\n\n}\n","export default class MobileServerBridge {\n\n  constructor(presentation, settings) {\n    this.presentation = presentation;\n    this.settings = settings;\n    this.connect();\n  }\n\n  connect() {\n    console.log('MobileServerBridge.connect');\n    $.post(this.settings.mobileServerUrl + '/login', this.getLoginCredentials()).done(this.loginHandler.bind(this))\n    .fail((function() {\n      //retry after one second\n      setTimeout((function(){\n        this.connect();\n      }).bind(this), 1000);\n    }).bind(this));\n  }\n\n  getLoginCredentials() {\n    return {\n      email: this.settings.mobileServerUsername,\n      password: this.settings.mobileServerPassword,\n    };\n  }\n\n  loginHandler(result) {\n    this.token = result.token;\n    this.socket = io(this.settings.mobileServerUrl, {\n      query: 'token=' + this.token,\n      reconnection: false,\n      forceNew: true\n    });\n    this.socket.on('connect', this.socketConnectHandler.bind(this));\n    this.socket.on('disconnect', this.socketDisconnectHandler.bind(this));\n    this.socket.on('message', this.socketMessageHandler.bind(this));\n  }\n\n  socketConnectHandler() {\n    console.log('MobileServerBridge.socketConnectHandler');\n    this.presentation.mobileServerBridgeConnected();\n  }\n\n  socketDisconnectHandler() {\n    this.connect();\n  }\n\n  tryToSend() {\n    if(this.socket) {\n      this.socket.emit.apply(this.socket, arguments);\n    }\n  }\n\n  socketMessageHandler(message) {\n    this.presentation.mobileServerMessageHandler(message);\n  }\n}\n","import {Constants} from '../Constants';\nimport SlideBridge from './SlideBridge';\n\nexport default class Presentation {\n  /*\n   * data: json object with slides array property\n   * role: mobile or presentation\n   */\n  constructor(data, role, settings) {\n    this.data = data;\n    this.role = role;\n    this.settings = settings;\n    this.currentSlideIndex = -1;\n    this.slideHolders = [];\n    this.numSlideHolders = 3;\n    this.slideBridges = [];\n    this.slideBridgesBySlideName = {};\n\n    this.createSlideHolders();\n    this.createSlideBridges(this.data);\n\n    this.mobileServerBridge = this.createMobileServerBridge();\n    this.startListeningForMessages();\n\n    this.setCurrentSlideIndex(0);\n  }\n\n  startListeningForMessages() {\n    window.addEventListener(\"message\", this.slideMessageHandler.bind(this), false);\n  };\n\n  createSlideHolders() {\n    for(var i = 0; i < this.numSlideHolders; i++) {\n      var $slideHolder = $('<div class=\"slide-frame\" />');\n      this.slideHolders.push($slideHolder);\n      $('#presentation').append($slideHolder);\n    }\n  };\n\n  createSlideBridges(data) {\n    var that = this;\n    var numSlides = data.slides.length;\n    for(var i = 0; i < numSlides; i++) {\n      var slideBridge = this.createSlideBridge(data.slides[i]);\n      this.slideBridges.push(slideBridge);\n      this.slideBridgesBySlideName[slideBridge.name] = slideBridge;\n    }\n  };\n\n  createSlideBridge(slide) {\n    return new SlideBridge(slide);\n  };\n\n  slideMessageHandler(event) {\n    if(!event.data) {\n      return;\n    }\n    switch(event.data.action) {\n      case Constants.SOCKET_SEND:\n        if(this.mobileServerBridge) {\n          this.mobileServerBridge.tryToSend(Constants.MESSAGE, event.data.message);\n        }\n        break;\n    }\n  };\n\n  mobileServerBridgeConnected() {\n    //join the rooms of the slideHolders\n    for(var i = 0; i < this.numSlideHolders; i++) {\n      this.mobileServerBridge.tryToSend(Constants.JOIN_SLIDE_ROOM, $(this.slideHolders[i]).attr('data-name'));\n    }\n  };\n\n  mobileServerMessageHandler(message) {\n    if(message.target.slide) {\n      //slide has to handle the message\n      var slideBridge = this.getSlideBridgeByName(message.target.slide);\n      if(slideBridge) {\n        slideBridge.tryToPostMessage({\n          action: Constants.SOCKET_RECEIVE,\n          message: message\n        });\n      }\n    } else {\n      //presentation has to handle the message\n      this.handleMobileServerMessage(message);\n    }\n  };\n\n  handleMobileServerMessage(message) {\n    console.log('[shared/Presentation] handleMobileServerMessage', message);\n  };\n\n  getSlideBridgeByIndex(index) {\n    if(index >= 0 && index < this.slideBridges.length) {\n      return this.slideBridges[index];\n    }\n    return false;\n  };\n\n  getSlideBridgeByName(slideName) {\n    return this.slideBridgesBySlideName[slideName];\n  };\n\n  getSlideHolderForSlide(slide, slidesNotToClear) {\n    if(slide) {\n      var $slideHolder = $('.slide-frame[data-name=\"' + slide.name + '\"]');\n      if($slideHolder.length > 0) {\n        return $slideHolder[0];\n      }\n      //get a free slideHolder\n      var slideNamesNotToClear = [];\n      $(slidesNotToClear).each(function(index, obj){\n        slideNamesNotToClear.push(obj.name);\n      });\n      var $slideHolders = $('.slide-frame');\n      for (var i = $slideHolders.length - 1; i >= 0; i--) {\n        $slideHolder = $($slideHolders[i]);\n        var name = $slideHolder.attr('data-name');\n        if(!name || slideNamesNotToClear.indexOf(name) === -1) {\n          return $slideHolder[0];\n        }\n      }\n    }\n    return false;\n  };\n\n  goToPreviousSlide() {\n    this.setCurrentSlideIndex(this.currentSlideIndex - 1);\n  };\n\n  goToNextSlide() {\n    this.setCurrentSlideIndex(this.currentSlideIndex + 1);\n  };\n\n  setCurrentSlideIndex(value) {\n    value = Math.max(0, Math.min(value, this.slideBridges.length - 1));\n    if(value !== this.currentSlideIndex) {\n      this.currentSlideIndex = value;\n\n      var currentSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex);\n      var previousSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex - 1);\n      var nextSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex + 1);\n\n      //remove \"used\" class from slide holders\n      $('.slide-frame').removeAttr('data-used', false);\n\n      var currentSlideHolder = this.getSlideHolderForSlide(currentSlideBridge, [previousSlideBridge, nextSlideBridge]);\n      this.setupSlideHolder(currentSlideHolder, currentSlideBridge, Constants.STATE_ACTIVE, 0);\n\n      var previousSlideHolder = this.getSlideHolderForSlide(previousSlideBridge, [currentSlideBridge, nextSlideBridge]);\n      this.setupSlideHolder(previousSlideHolder, previousSlideBridge, Constants.STATE_INACTIVE, '-100%');\n\n      var nextSlideHolder = this.getSlideHolderForSlide(nextSlideBridge, [previousSlideBridge, currentSlideBridge]);\n      this.setupSlideHolder(nextSlideHolder, nextSlideBridge, Constants.STATE_INACTIVE, '100%');\n\n      //clear attributes of unused slide frames\n      $('.slide-frame').each(function(index, slideHolder){\n        if(!$(slideHolder).attr('data-used')) {\n          $(slideHolder).removeAttr('data-used').removeAttr('data-name').removeAttr('data-src');\n        }\n      });\n\n      //all other slideHolder bridges should be unlinked from their slideHolder\n      this.slideBridges.forEach(function(slideBridge){\n        if(slideBridge === currentSlideBridge) {\n          return;\n        }\n        if(slideBridge === previousSlideBridge) {\n          return;\n        }\n        if(slideBridge === nextSlideBridge) {\n          return;\n        }\n        slideBridge.slideHolder = null;\n      });\n\n      bean.fire(this, Constants.SET_CURRENT_SLIDE_INDEX, [this.currentSlideIndex]);\n    }\n  };\n\n  setupSlideHolder(slideHolder, slideBridge, state, left) {\n    if(slideHolder) {\n      var src = \"slides/\" + slideBridge.name + '.html';\n      if(slideBridge.data[this.role] && slideBridge.data[this.role].url) {\n        src = slideBridge.data[this.role].url;\n      }\n      src = this.processSlideSrc(src);\n      if(slideBridge.isAlreadyCorrectlyAttached(slideHolder, src)) {\n        //console.log(slideBridge.name + ' already attached');\n      } else {\n        this.attachToSlideHolder(slideHolder, slideBridge, src);\n      }\n      slideBridge.setState(state);\n      $(slideHolder).css('left', left);\n      $(slideHolder).attr('data-used', 1);\n    }\n  };\n\n  attachToSlideHolder(slideHolder, slideBridge, src) {\n    //listen for events on this slideHolder\n    $(slideHolder).off('message-from-slide');\n    $(slideHolder).on('message-from-slide', (function(event, message) {\n      this.slideMessageHandler({data: message});\n    }).bind(this));\n    //leave previous channel of this slideHolder\n    if(this.mobileServerBridge) {\n      this.mobileServerBridge.tryToSend(Constants.LEAVE_SLIDE_ROOM, $(slideHolder).attr('data-name'));\n    }\n    //add the join as a callback for the onload event\n    slideBridge.attachToSlideHolder(slideHolder, src, this.slideLoaded.bind(this, slideHolder, slideBridge, src));\n  };\n\n  slideLoaded(slideHolder, slideBridge) {\n    //join new channel\n    if(this.mobileServerBridge) {\n      this.mobileServerBridge.tryToSend(Constants.JOIN_SLIDE_ROOM, $(slideHolder).attr('data-name'));\n    }\n  };\n\n  processSlideSrc(src) {\n    return src;\n  };\n\n  createMobileServerBridge() {\n    //to implement in extending classes\n  };\n}\n","import fetch from 'isomorphic-fetch';\n\nexport default class SlideBridge {\n  constructor(data) {\n    this.data = data;\n    this.name = this.data.name;\n  }\n\n  isAlreadyCorrectlyAttached(slideHolder, src) {\n    return (this.slideHolder === slideHolder && $(slideHolder).attr('data-name') === this.name && $(slideHolder).attr('data-src') === src);\n  };\n\n  attachToSlideHolder(slideHolder, src, cb) {\n    this.slideHolder = slideHolder;\n    //notify the content it is being cleared\n    this.tryToPostMessage({action: 'destroy'});\n    //clear the current content\n    this.slideHolder.innerHTML = '';\n    $(slideHolder).attr('data-name', this.name);\n    $(slideHolder).addClass('loading');\n\n    $(slideHolder).on('load', () => {\n      this.tryToPostMessage({\n        action: 'setState',\n        state: this.state\n      });\n      $(slideHolder).off('load');\n    });\n\n    if(src !== $(slideHolder).attr('data-src')) {\n      //fetch the html\n      fetch(src)\n        .then(result => result.text())\n        .then(result => $(result))\n        .then($result => {\n          $(slideHolder).html($result.html());\n          $(slideHolder).removeClass('loading');\n          cb();\n        })\n        .catch(err => {\n          console.error(err);\n          $(slideHolder).removeClass('loading');\n          cb();\n        });\n      $(slideHolder).attr('data-src', src);\n    }\n  };\n\n  tryToPostMessage(message) {\n    if(!this.slideHolder)\n    {\n      return;\n    }\n    //trigger with jquery\n    $(this.slideHolder).trigger('message-to-slide', message);\n  };\n\n  setState(state) {\n    this.state = state;\n    this.tryToPostMessage({\n      action: 'setState',\n      state: this.state\n    });\n  };\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nimport LiveCode from '../live-code';\n\nexport default class LiveCodeSlide extends ContentBase {\n\n  constructor($slideHolder) {\n    super($slideHolder);\n\n    var remote = requireNode('electron').remote;\n    var config = {\n      presentationPath: remote.getGlobal('__dirname')\n    };\n\n    //find live code element\n    this.liveCode = new LiveCode(this.$slideHolder.find('.live-code'), config);\n  }\n\n  layout() {\n    this.liveCode.layout();\n  }\n\n  destroy() {\n    super.destroy();\n    this.liveCode.destroy();\n  }\n\n  onStateChanged() {\n    if(this.state === Constants.STATE_ACTIVE) {\n    } else {\n      //stop\n      this.liveCode.stop();\n    }\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nexport default class MegaPuddingSlide extends ContentBase {\n\n  constructor($slideHolder) {\n    super($slideHolder);\n\n    this.$webview = $slideHolder.find('webview');\n    this.webview = this.$webview[0];\n\n    this.webview.addEventListener(\"dom-ready\", (function(){\n      this.webview.openDevTools();\n    }).bind(this));\n  }\n\n  onStateChanged() {\n    if(this.state === Constants.STATE_ACTIVE) {\n      this.webview.setAttribute('src', 'demos/megapudding/index.html');\n    } else {\n      this.webview.setAttribute('src', '');\n    }\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nlet teamColors = [\n  '#c6363d', //red\n  '#0684AF'  //blue\n];\n\nexport default class ShakeYourPhonesSlide extends ContentBase {\n\n  constructor($slideHolder) {\n    super($slideHolder);\n\n    this.gameDuration = 13; //game lasts 10 seconds\n    this.clientsMap = {};\n    this.clientsByTeam = [\n      [],\n      []\n    ];\n    this.motions = [0, 0];\n    this.music = this.$slideHolder.find('#music')[0];\n\n    this.$slideHolder.find('#ip').text('bbridges.herokuapp.com');\n\n    this.$slideHolder.find('.substate-intro .btn').on('click', this.startClickHandler.bind(this));\n\n    this.$teamBlocks = this.$slideHolder.find('.team');\n    this.$teamBlocks.css({\n      position: 'absolute',\n      height: '100%',\n      top: 0\n    });\n    $(this.$teamBlocks[0]).css('background-color', teamColors[0]);\n    $(this.$teamBlocks[1]).css('background-color', teamColors[1]);\n    this.displayMotions();\n\n    this.setSubstate(Constants.SHAKE_YOUR_PHONES_INTRO);\n  }\n\n  setSubstate(substate) {\n    if(this.substate !== substate) {\n      this.substate = substate;\n      //send substate to mobile clients\n      this.postSocketMessage({\n        target: {\n          client: 'mobile',\n          slide: this.name\n        },\n        content: {\n          action: Constants.SET_SUBSTATE,\n          substate: this.substate\n        }\n      });\n      if(this.substate === Constants.SHAKE_YOUR_PHONES_GAME) {\n        this.resetMotion();\n      }\n      this.showCurrentState();\n    }\n  }\n\n  receiveSocketMessage(message) {\n    if(!message.content) {\n      return;\n    }\n    if(message.content.action === 'updateRoomList') {\n      //message.content.ids is an array with ids in this room\n      var clientMapIds = _.keys(this.clientsMap);\n      //which ids are new? (in message.content.ids but not in clientsMap)\n      var newClientIds = _.difference(message.content.ids, clientMapIds);\n      //which ids need to be removed? (in clientsMap but not in message.content.ids)\n      var removeClientIds = _.difference(clientMapIds, message.content.ids);\n      //update our map\n      newClientIds.forEach(function(id){\n        this.clientsMap[id] = {\n          id: id,\n          teamNr: -1,\n          motion: 0,\n          size: 10\n        }\n        //add to the smallest team\n        var teamNr = (this.clientsByTeam[0].length < this.clientsByTeam[1].length) ? 0 : 1;\n        this.clientsMap[id].teamNr = teamNr;\n        //send a message to this client\n        this.postSocketMessage({\n          target: {\n            client: id,\n            slide: this.name\n          },\n          content: {\n            action: Constants.SET_TEAM,\n            team: teamNr\n          }\n        });\n       this.postSocketMessage({\n          target: {\n            client: 'mobile',\n            slide: this.name\n          },\n          content: {\n            action: Constants.SET_SUBSTATE,\n            substate: this.substate\n          }\n        });\n        //update the list\n        this.updateClientsByTeam();\n      }, this);\n      removeClientIds.forEach(function(id){\n          if(this.clientsMap[id]) {\n              //this.clientsMap[id].$div.remove();\n          }\n          delete this.clientsMap[id];\n          this.updateClientsByTeam();\n      }, this);\n\n      this.numClientsChanged();\n    } else if(message.content.action === Constants.UPDATE_MOTION) {\n      if(!message.sender) {\n        return;\n      }\n      //message.sender.id contains the origin id\n      if(!this.clientsMap[message.sender.id]) {\n        return;\n      }\n      this.clientsMap[message.sender.id].motion = Math.min(130, message.content.motion); //limit max motion to 130\n    }\n  }\n\n  updateClientsByTeam() {\n    this.clientsByTeam = [\n      [],\n      []\n    ];\n    let self = this;\n    $.each(this.clientsMap, function(id, client){\n      if(client.teamNr !== -1) {\n        self.clientsByTeam[client.teamNr].push(client);\n      }\n    });\n  }\n\n  startClickHandler() {\n      this.setSubstate(Constants.SHAKE_YOUR_PHONES_GAME);\n  }\n\n  resetMotion() {\n    this.motions = [0, 0];\n    for(var id in this.clientsMap) {\n      this.clientsMap[id].motion = 0;\n    }\n  }\n\n  numClientsChanged() {\n      this.$slideHolder.find('#connections span').text(_.keys(this.clientsMap).length);\n  }\n\n  showCurrentState() {\n    this.$slideHolder.find('.substate').removeClass('active');\n    this.$slideHolder.find('.slide').css({\n      backgroundImage: 'none'\n    });\n    if(this.substate === Constants.SHAKE_YOUR_PHONES_GAME) {\n      this.music.play();\n      this.$slideHolder.find('.substate-game .countdown').html(this.gameDuration);\n      this.$slideHolder.find('.substate-game').addClass('active');\n      this.countDownTimeout = setTimeout(this.countDownHandler.bind(this, this.gameDuration - 1), 1000);\n    } else if(this.substate === Constants.SHAKE_YOUR_PHONES_FINISHED) {\n      //show winner\n      var ratio = this.calculateRatio();\n      var winningTeam = (ratio > 0.5) ? 0 : 1;\n      var winningTeamColor = (winningTeam === 0) ? \"red\" : \"blue\";\n      this.$slideHolder.find('.substate-finished h1').text('Team ' + winningTeamColor + ' wins!');\n      this.$slideHolder.find('.substate-finished').addClass('active');\n      //notify the mobile clients\n      var winningIds = [];\n      var losingIds = [];\n      $.each(this.clientsMap, function(id, client){\n        if(client.teamNr === winningTeam) {\n          winningIds.push(id);\n        }\n        else {\n          losingIds.push(id);\n        }\n      });\n      this.postSocketMessage({\n        target: {\n          client: winningIds,\n          slide: this.name\n        },\n        content: {\n          action: Constants.YOU_WIN\n        }\n      });\n      this.postSocketMessage({\n        target: {\n          client: losingIds,\n          slide: this.name\n        },\n        content: {\n          action: Constants.YOU_LOSE\n        }\n      });\n    } else {\n      this.$slideHolder.find('.slide').css({\n        backgroundRepeat: 'no-repeat',\n        backgroundSize: 'contain',\n        backgroundPosition: 'center center',\n        backgroundImage: 'url(assets/images/iphone-connections.png)'\n      });\n      this.$slideHolder.find('.substate-intro').addClass('active');\n    }\n  }\n\n  countDownHandler(timeLeft) {\n    this.$slideHolder.find('.substate-game .countdown').html(timeLeft);\n    if(timeLeft > 0) {\n      this.countDownTimeout = setTimeout(this.countDownHandler.bind(this, timeLeft - 1), 1000);\n    } else {\n      this.setSubstate(Constants.SHAKE_YOUR_PHONES_FINISHED);\n    }\n  }\n\n  drawLoop() {\n    if(this.substate === Constants.SHAKE_YOUR_PHONES_GAME) {\n      //calculate current motions\n      var currentMotions = [0, 0];\n      $.each(this.clientsMap, function(id, client){\n        if(client.teamNr > -1 && client.motion) {\n          currentMotions[client.teamNr] += client.motion;\n        }\n      });\n      //take average motion\n      currentMotions[0] = (this.clientsByTeam[0].length === 0) ? 0 : currentMotions[0] / this.clientsByTeam[0].length;\n      currentMotions[1] = (this.clientsByTeam[1].length === 0) ? 0 : currentMotions[1] / this.clientsByTeam[1].length;\n      //add to motion\n      this.motions[0] += currentMotions[0];\n      this.motions[1] += currentMotions[1];\n      //ease it\n      this.motions[0] *= 0.97;\n      this.motions[1] *= 0.97;\n      //visualize it\n      this.displayMotions();\n    }\n  }\n\n  calculateRatio() {\n    var totalMotion = this.motions[0] + this.motions[1];\n    var ratio = (totalMotion > 0) ? this.motions[0] / totalMotion : 0.5;\n    return ratio;\n  }\n\n  displayMotions() {\n    var ratio = this.calculateRatio();\n    //console.log(this.motions[0], this.motions[1], totalMotion, ratio);\n    $(this.$teamBlocks[0]).css({\n      left: 0,\n      width: (ratio * 100) + '%'\n    });\n    $(this.$teamBlocks[1]).css({\n      right: 0,\n      width: (100 - (ratio * 100)) + '%'\n    });\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nconst getParameterByName = (url, name) => {\n  name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n  let regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\"),\n  results = regex.exec(url);\n  return results == null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n};\n\nexport default class VideoSlide extends ContentBase {\n\n  constructor($slideHolder) {\n    super($slideHolder);\n\n    this.videoPlaying = false;\n    let videoUrl = getParameterByName(this.src, 'video');\n\n    //check for extra config in the filename\n    let loop = false;\n    let muted = false;\n    let videoUrlSplitted = videoUrl.split('.');\n    videoUrlSplitted.forEach(part => {\n      if(part === 'loop') {\n        loop = true;\n      }\n      if(part === 'muted') {\n        muted = true;\n      }\n    });\n\n    this.video = this.$slideHolder.find('video')[0];\n    if(loop) {\n      $(this.video).attr('loop', \"loop\");\n    }\n    if(muted) {\n      $(this.video).attr('muted', \"muted\");\n    }\n    $(this.video).attr('src', videoUrl);\n    this._clickHandler = this.clickHandler.bind(this);\n    $(this.video).on('click', this._clickHandler);\n  }\n\n  destroy() {\n    super.destroy();\n    $(this.video).off('click', this._clickHandler);\n  }\n\n  onStateChanged() {\n    if(this.state === Constants.STATE_ACTIVE) {\n      this.setVideoPlaying(true);\n    } else {\n      this.setVideoPlaying(false);\n    }\n  }\n\n  clickHandler(event) {\n    this.toggleVideoPlaying();\n  }\n\n  setVideoPlaying(value) {\n    if(value !== this.videoPlaying) {\n      this.videoPlaying = value;\n      if(this.videoPlaying) {\n        this.video.play();\n      } else {\n        this.video.pause();\n      }\n    }\n  }\n\n  toggleVideoPlaying() {\n    this.setVideoPlaying(!this.videoPlaying);\n  }\n\n}\n"]}
<template>
  <div style="width: 100%; height: 100%">
    <div class="split-pane fixed-bottom">
      <div class="split-pane-component" style="bottom: 10em; margin-bottom: 5px; min-height: 5em;">
        <textarea data-id="node-code" data-type="code" data-runtime="node" data-console="node-console" data-language="javascript">var edge = require('edge'),
  path = require('path'),
  _ = require('lodash');

var dllPath = path.resolve('../../presentation/assets/NodeKinect2.dll');
var dllProperties = {
  assemblyFile: dllPath,
  typeName: 'NodeKinect2.Startup'
};

var kinect = {
  create: edge.func(_.assign({}, dllProperties)),
  open: edge.func(_.assign({ methodName: 'Open' }, dllProperties)),
  openBodyReader: edge.func(_.assign({ methodName: 'OpenBodyReader' }, dllProperties)),
  close: edge.func(_.assign({ methodName: 'Close' }, dllProperties))
};

kinect.create({
  logCallback: function(msg) {
    console.log('[Kinect2]', msg);
  }
}, true);

if(kinect.open(null, true)) {
  kinect.openBodyReader({
    bodyFrameCallback: function(bodies) {
      console.log(bodies);
    }
  }, true);

  setTimeout(function(){
    kinect.close(null, true);
  }, 5000);
}
</textarea>
        <button class="btn btn-default" data-type="run-button" data-target="node-code" style="position: absolute; top: 1em; right: 1em; z-index: 10">Run</button>
      </div>
      <div class="split-pane-divider" style="background: #aaa; bottom: 10em; height: 5px;"></div>
      <div class="split-pane-component" style="height: 10em; min-height: 10em;">
        <div data-id="node-console" style="height: 100%" data-type="console"></div>
      </div>
    </div>
  </div>
  <script>
  (function(){

    var LiveCode = require('slides/LiveCode');
    var $slideHolder = $(document.currentScript).closest('.slide-frame');

    function init() {
      var liveCode = new LiveCode($slideHolder);
      $slideHolder.find('div.split-pane').splitPane();
      $slideHolder.find('div.split-pane').on('resize', function(){
        liveCode.layout();
      });
    }

    init();

  })();
  </script>
</template>

{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/mobile/js/classes/shake-your-phones-slide/index.js","node_modules/isomorphic-fetch/fetch-npm-browserify.js","node_modules/whatwg-fetch/fetch.js","src/mobile/js/classes/Presentation.js","src/mobile/js/script.js","src/shared/js/Constants.js","src/shared/js/classes/ContentBase.js","src/shared/js/classes/MobileServerBridge.js","src/shared/js/classes/Presentation.js","src/shared/js/classes/SlideBridge.js"],"names":[],"mappings":"AAAA;;;;;;;;;ACAA;;AACA;;;;;;;;;;;;AAEA,IAAI,aAAa,CACf,SADe;AAEf;AAFe,CAAb;;IAKiB;;;AAEnB,WAFmB,oBAEnB,CAAY,YAAZ,EAA0B;0BAFP,sBAEO;;uEAFP,iCAGX,eADkB;;AAExB,UAAK,aAAL,GAAqB,CAArB,CAFwB;AAGxB,UAAK,MAAL,GAAc,CAAd,CAHwB;AAIxB,UAAK,IAAL,GAAY,CAAC,CAAD,CAJY;;AAMxB,UAAK,WAAL,GAAmB,MAAK,YAAL,CAAkB,IAAlB,CAAuB,aAAvB,CAAnB,CANwB;AAOxB,UAAK,WAAL,CAAiB,GAAjB,CAAqB,KAArB,EAA4B,MAA5B,EAPwB;AAQxB,UAAK,WAAL,CAAiB,GAAjB,CAAqB,kBAArB,EAAyC,0BAAzC,EARwB;;AAUxB,UAAK,oBAAL,GAA4B,MAAK,mBAAL,CAAyB,IAAzB,OAA5B,CAVwB;;GAA1B;;eAFmB;;qCAeF;AACf,UAAG,KAAK,KAAL,KAAe,qBAAU,YAAV,EAAwB;AACxC,YAAI,OAAO,iBAAP,EAA0B;AAC5B,iBAAO,gBAAP,CAAwB,cAAxB,EAAwC,KAAK,oBAAL,EAA2B,KAAnE,EAD4B;SAA9B,MAEO;AACL,eAAK,YAAL,CAAkB,IAAlB,CAAuB,eAAvB,EAAwC,IAAxC,CAA6C,kCAA7C,EADK;SAFP;OADF,MAMO;AACL,eAAO,mBAAP,CAA2B,cAA3B,EAA2C,KAAK,oBAAL,CAA3C,CADK;OANP;;;;yCAWmB,SAAS;AAC5B,UAAG,CAAC,QAAQ,OAAR,EAAiB;AACnB,eADmB;OAArB;AAGA,UAAG,QAAQ,OAAR,CAAgB,MAAhB,KAA2B,qBAAU,QAAV,EAAoB;AAChD,aAAK,OAAL,CAAa,SAAS,QAAQ,OAAR,CAAgB,IAAhB,CAAtB,EADgD;OAAlD;AAGA,UAAG,QAAQ,OAAR,CAAgB,MAAhB,KAA2B,qBAAU,YAAV,EAAwB;AACpD,aAAK,WAAL,CAAiB,QAAQ,OAAR,CAAgB,QAAhB,CAAjB,CADoD;OAAtD;AAGA,UAAG,QAAQ,OAAR,CAAgB,MAAhB,KAA2B,qBAAU,OAAV,EAAmB;AAC/C,aAAK,YAAL,CAAkB,IAAlB,CAAuB,uBAAvB,EAAgD,IAAhD,CAAqD,gBAArD,EAD+C;OAAjD;AAGA,UAAG,QAAQ,OAAR,CAAgB,MAAhB,KAA2B,qBAAU,QAAV,EAAoB;AAChD,aAAK,YAAL,CAAkB,IAAlB,CAAuB,uBAAvB,EAAgD,IAAhD,CAAqD,mBAArD,EADgD;OAAlD;;;;4BAKM,MAAM;AACZ,aAAO,OAAO,WAAW,MAAX,CADF;AAEZ,UAAG,SAAS,KAAK,IAAL,EAAW;AACrB,aAAK,IAAL,GAAY,IAAZ;;AADqB,YAGrB,CAAK,YAAL,CAAkB,IAAlB,CAAuB,QAAvB,EAAiC,GAAjC,CAAqC,kBAArC,EAAyD,WAAW,KAAK,IAAL,CAApE,EAHqB;OAAvB;;;;gCAOU,UAAU;AACpB,UAAG,KAAK,QAAL,KAAkB,QAAlB,EAA4B;AAC7B,aAAK,QAAL,GAAgB,QAAhB,CAD6B;AAE7B,aAAK,gBAAL,GAF6B;OAA/B;;;;wCAMkB,OAAO;AACzB,WAAK,aAAL,GAAqB,MAAM,QAAN,IAAkB,KAAK,GAAL,CAAS,MAAM,YAAN,CAAmB,CAAnB,CAAT,GAAiC,KAAK,GAAL,CAAS,MAAM,YAAN,CAAmB,CAAnB,CAA1C,GAAkE,KAAK,GAAL,CAAS,MAAM,YAAN,CAAmB,CAAnB,CAA3E,CAAlB,CADI;;;;+BAIhB;AACT,WAAK,MAAL,IAAe,KAAK,aAAL,CADN;AAET,WAAK,MAAL,IAAe,IAAf,CAFS;AAGT,WAAK,WAAL,CAAiB,GAAjB,CAAqB,KAArB,EAA4B,MAAM,KAAK,MAAL,GAAc,GAApB,CAA5B,CAHS;AAIT,UAAG,KAAK,YAAL,GAAoB,EAApB,KAA2B,CAA3B,EAA8B;AAC/B,aAAK,iBAAL,CAAuB;AACrB,kBAAQ;AACN,oBAAQ,cAAR;AACA,mBAAO,KAAK,IAAL;WAFT;AAIA,mBAAS;AACP,oBAAQ,qBAAU,aAAV;AACR,oBAAQ,KAAK,MAAL;WAFV;SALF,EAD+B;OAAjC;;;;uCAciB;AACjB,WAAK,YAAL,CAAkB,IAAlB,CAAuB,WAAvB,EAAoC,WAApC,CAAgD,QAAhD,EADiB;AAEjB,UAAG,KAAK,QAAL,KAAkB,qBAAU,sBAAV,EAAkC;AACrD,aAAK,YAAL,CAAkB,IAAlB,CAAuB,gBAAvB,EAAyC,QAAzC,CAAkD,QAAlD,EADqD;OAAvD,MAEO,IAAG,KAAK,QAAL,KAAkB,qBAAU,0BAAV,EAAsC;AAChE,aAAK,YAAL,CAAkB,IAAlB,CAAuB,oBAAvB,EAA6C,QAA7C,CAAsD,QAAtD,EADgE;OAA3D,MAEA;AACL,aAAK,YAAL,CAAkB,IAAlB,CAAuB,iBAAvB,EAA0C,QAA1C,CAAmD,QAAnD,EADK;OAFA;;;;SAvFU;;;;;;ACRrB;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrYA;;AACA;;;;AACA;;;;;;;;;;;;IAEqB;;;AAEnB,WAFmB,YAEnB,CAAY,IAAZ,EAAkB,IAAlB,EAAwB,QAAxB,EAAkC;0BAFf,cAEe;;uEAFf,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","file":"script.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import {Constants} from '../../../../shared/js/Constants';\r\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\r\n\r\nlet teamColors = [\r\n  '#c6363d', //red\r\n  '#0684AF'  //blue\r\n];\r\n\r\nexport default class ShakeYourPhonesSlide extends ContentBase{\r\n\r\n  constructor($slideHolder) {\r\n    super($slideHolder);\r\n    this.currentMotion = 0;\r\n    this.motion = 0;\r\n    this.team = -1;\r\n\r\n    this.$background = this.$slideHolder.find('.background');\r\n    this.$background.css('top', '100%');\r\n    this.$background.css('background-color', 'rgba(255, 255, 255, 0.5)');\r\n\r\n    this._motionUpdateHandler = this.motionUpdateHandler.bind(this);\r\n  }\r\n\r\n  onStateChanged() {\r\n    if(this.state === Constants.STATE_ACTIVE) {\r\n      if (window.DeviceMotionEvent) {\r\n        window.addEventListener('devicemotion', this._motionUpdateHandler, false);\r\n      } else {\r\n        this.$slideHolder.find('.acceleration').text('Not supported on your device :-(');\r\n      }\r\n    } else {\r\n      window.removeEventListener('devicemotion', this._motionUpdateHandler);\r\n    }\r\n  }\r\n\r\n  receiveSocketMessage(message) {\r\n    if(!message.content) {\r\n      return;\r\n    }\r\n    if(message.content.action === Constants.SET_TEAM) {\r\n      this.setTeam(parseInt(message.content.team));\r\n    }\r\n    if(message.content.action === Constants.SET_SUBSTATE) {\r\n      this.setSubstate(message.content.substate);\r\n    }\r\n    if(message.content.action === Constants.YOU_WIN) {\r\n      this.$slideHolder.find('.substate-finished h1').text('Your Team Won!');\r\n    }\r\n    if(message.content.action === Constants.YOU_LOSE) {\r\n      this.$slideHolder.find('.substate-finished h1').text('Your Team Lost...');\r\n    }\r\n  }\r\n\r\n  setTeam(team) {\r\n    team = team % teamColors.length;\r\n    if(team !== this.team) {\r\n      this.team = team;\r\n      //set body background color\r\n      this.$slideHolder.find('.slide').css('background-color', teamColors[this.team]);\r\n    }\r\n  }\r\n\r\n  setSubstate(substate) {\r\n    if(this.substate !== substate) {\r\n      this.substate = substate;\r\n      this.showCurrentState();\r\n    }\r\n  }\r\n\r\n  motionUpdateHandler(event) {\r\n    this.currentMotion = event.interval * (Math.abs(event.acceleration.x) + Math.abs(event.acceleration.y) + Math.abs(event.acceleration.z));\r\n  }\r\n\r\n  drawLoop() {\r\n    this.motion += this.currentMotion;\r\n    this.motion *= 0.97;\r\n    this.$background.css('top', 100 - this.motion + '%');\r\n    if(this.currentFrame % 10 === 0) {\r\n      this.postSocketMessage({\r\n        target: {\r\n          client: 'presentation',\r\n          slide: this.name\r\n        },\r\n        content: {\r\n          action: Constants.UPDATE_MOTION,\r\n          motion: this.motion\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  showCurrentState() {\r\n    this.$slideHolder.find('.substate').removeClass('active');\r\n    if(this.substate === Constants.SHAKE_YOUR_PHONES_GAME) {\r\n      this.$slideHolder.find('.substate-game').addClass('active');\r\n    } else if(this.substate === Constants.SHAKE_YOUR_PHONES_FINISHED) {\r\n      this.$slideHolder.find('.substate-finished').addClass('active');\r\n    } else {\r\n      this.$slideHolder.find('.substate-intro').addClass('active');\r\n    }\r\n  }\r\n\r\n}\r\n","// the whatwg-fetch polyfill installs the fetch() function\n// on the global object (window or self)\n//\n// Return that as the export for use in Webpack, Browserify etc.\nrequire('whatwg-fetch');\nmodule.exports = self.fetch.bind(self);\n","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var list = this.map[name]\n    if (!list) {\n      list = []\n      this.map[name] = list\n    }\n    list.push(value)\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    var values = this.map[normalizeName(name)]\n    return values ? values[0] : null\n  }\n\n  Headers.prototype.getAll = function(name) {\n    return this.map[normalizeName(name)] || []\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = [normalizeValue(value)]\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n      this.map[name].forEach(function(value) {\n        callback.call(thisArg, value, name, this)\n      }, this)\n    }, this)\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    reader.readAsArrayBuffer(blob)\n    return fileReaderReady(reader)\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    reader.readAsText(blob)\n    return fileReaderReady(reader)\n  }\n\n  var support = {\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob();\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (!body) {\n        this._bodyText = ''\n      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n        // Only support ArrayBuffers for POST method.\n        // Receiving ArrayBuffers happens via Blobs, instead.\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n\n      this.text = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return readBlobAsText(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as text')\n        } else {\n          return Promise.resolve(this._bodyText)\n        }\n      }\n    } else {\n      this.text = function() {\n        var rejected = consumed(this)\n        return rejected ? rejected : Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n    if (Request.prototype.isPrototypeOf(input)) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = input\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this)\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function headers(xhr) {\n    var head = new Headers()\n    var pairs = xhr.getAllResponseHeaders().trim().split('\\n')\n    pairs.forEach(function(header) {\n      var split = header.trim().split(':')\n      var key = split.shift().trim()\n      var value = split.join(':').trim()\n      head.append(key, value)\n    })\n    return head\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = options.statusText\n    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers;\n  self.Request = Request;\n  self.Response = Response;\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request\n      if (Request.prototype.isPrototypeOf(input) && !init) {\n        request = input\n      } else {\n        request = new Request(input, init)\n      }\n\n      var xhr = new XMLHttpRequest()\n\n      function responseURL() {\n        if ('responseURL' in xhr) {\n          return xhr.responseURL\n        }\n\n        // Avoid security warnings on getResponseHeader when not allowed by CORS\n        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n          return xhr.getResponseHeader('X-Request-URL')\n        }\n\n        return;\n      }\n\n      xhr.onload = function() {\n        var status = (xhr.status === 1223) ? 204 : xhr.status\n        if (status < 100 || status > 599) {\n          reject(new TypeError('Network request failed'))\n          return\n        }\n        var options = {\n          status: status,\n          statusText: xhr.statusText,\n          headers: headers(xhr),\n          url: responseURL()\n        }\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n","import {Constants} from '../../../shared/js/Constants';\r\nimport PresentationBase from '../../../shared/js/classes/Presentation';\r\nimport MobileServerBridge from '../../../shared/js/classes/MobileServerBridge';\r\n\r\nexport default class Presentation extends PresentationBase{\r\n\r\n  constructor(data, role, settings) {\r\n    super(data, role, settings);\r\n    this.$overlay = $('#overlay');\r\n  }\r\n\r\n  createMobileServerBridge() {\r\n    return new MobileServerBridge(this, this.settings);\r\n  }\r\n\r\n  handleMobileServerMessage(message) {\r\n    if(!message.content) {\r\n      return;\r\n    }\r\n    if(message.content.action == 'setCurrentSlideIndex') {\r\n      this.setCurrentSlideIndex(message.content.currentSlideIndex);\r\n    } else if(message.content.action == Constants.BLINK) {\r\n      this.blink(message.content.text, message.content.backgroundColor);\r\n    }\r\n  }\r\n\r\n  setCurrentSlideIndex(index) {\r\n    super.setCurrentSlideIndex(index);\r\n    if(this.$overlay) {\r\n      this.$overlay.removeClass('active');\r\n    }\r\n    if(this.blinkInterval) {\r\n      clearInterval(this.blinkInterval);\r\n    }\r\n  }\r\n\r\n  blink(text, backgroundColor) {\r\n    //overlay important, blinking text\r\n    this.$overlay.find('.content').html(text);\r\n    this.$overlay.addClass('active');\r\n    if(this.blinkInterval) {\r\n      clearInterval(this.blinkInterval);\r\n    }\r\n    this.blinkInterval = setInterval(this.blinkToggle.bind(this, backgroundColor), 500);\r\n  }\r\n\r\n  blinkToggle(backgroundColor) {\r\n    this.$overlay.toggleClass('blink-on');\r\n    if(this.$overlay.hasClass('blink-on')) {\r\n      this.$overlay.css('background-color', backgroundColor);\r\n    } else {\r\n      this.$overlay.css('background-color', false);\r\n    }\r\n  }\r\n\r\n}\r\n","import Presentation from './classes/Presentation';\r\nimport fetch from 'isomorphic-fetch';\r\n\r\n(() => {\r\n\r\n  const init = () => {\r\n    let settings = {\r\n      presentationPath: '/',\r\n      mobileServerUrl: ''\r\n    };\r\n    //get slides by xmlhttprequest\r\n    fetch('/data.json?t=' + Date.now())\r\n      .then(data => data.json())\r\n      .then(data => {\r\n        new Presentation(data, 'mobile', settings);\r\n      });\r\n  };\r\n\r\n  init();\r\n})();\r\n","export const Constants = {\r\n  GO_TO_PREVIOUS_SLIDE : 'goToPreviousSlide',\r\n  GO_TO_NEXT_SLIDE : 'goToNextSlide',\r\n  SET_SLIDES : 'setSlides',\r\n  SET_CURRENT_SLIDE_INDEX : 'setCurrentSlideIndex',\r\n\r\n  MESSAGE : 'message',\r\n  SOCKET_SEND : 'socketSend',\r\n  SOCKET_RECEIVE : 'socketReceive',\r\n  JOIN_SLIDE_ROOM : 'joinSlideRoom',\r\n  LEAVE_SLIDE_ROOM : 'leaveSlideRoom',\r\n\r\n  ROLE_PRESENTATION : 'presentation',\r\n  ROLE_MOBILE : 'mobile',\r\n\r\n  STATE_ACTIVE : 'active',\r\n  STATE_INACTIVE : 'inactive',\r\n\r\n  SET_SUBSTATE : 'setSubstate',\r\n\r\n  CHILD_APP_SAVE_CODE : 'childAppSaveCode',\r\n  CHILD_APP_RUN_CODE : 'childAppRunCode',\r\n  CHILD_APP_STDOUT_DATA : 'childAppStdoutData',\r\n  CHILD_APP_STDERR_DATA : 'childAppStderrData',\r\n\r\n  OPEN_COMMAND_LINE: 'openCommandLine',\r\n  OPEN_CAMERA: 'openCamera',\r\n\r\n  SET_TEAM : 'setTeam',\r\n  UPDATE_MOTION : 'updateMotion',\r\n\r\n  YOU_WIN : 'youWin',\r\n  YOU_LOSE : 'youLose',\r\n\r\n  SHAKE_YOUR_PHONES_INTRO : 'shakeYourPhonesIntro',\r\n  SHAKE_YOUR_PHONES_GAME : 'shakeYourPhonesGame',\r\n  SHAKE_YOUR_PHONES_FINISHED : 'shakeYourPhonesFinished',\r\n\r\n  SHAKE_YOUR_PHONES_CLIENT_ADDED : 'shakeYourPhonesClientAdded',\r\n  SHAKE_YOUR_PHONES_CLIENT_REMOVED : 'shakeYourPhonesClientRemoved',\r\n  SHAKE_YOUR_PHONES_CLIENT_LIST : 'shakeYourPhonesClientList',\r\n  SHAKE_YOUR_PHONES_CLIENT_UPDATE : 'shakeYourPhonesClientUpdate'\r\n};\r\n","import {Constants} from '../Constants';\r\n\r\nexport default class ContentBase{\r\n\r\n  constructor($slideHolder) {\r\n    this.$slideHolder = $slideHolder;\r\n    this.src = $slideHolder.attr('data-src');\r\n    this.name = $slideHolder.attr('data-name');\r\n    this.fps = 60;\r\n    this._animationFrameId = false;\r\n    this._currentTime = 0;\r\n    this._delta = 0;\r\n    this._interval = false;\r\n    this._lastTime = new Date().getTime();\r\n    this.currentFrame = 0;\r\n\r\n    this.startListeningForMessages();\r\n\r\n    this.__drawLoop = this._drawLoop.bind(this);\r\n    this._interval = 1000 / this.fps;\r\n\r\n    window.requestAnimationFrame(() => {\r\n      $slideHolder.trigger('load');\r\n    });\r\n  }\r\n\r\n  startListeningForMessages() {\r\n    this._slideHolderMessageToSlideHandler = this.slideHolderMessageToSlideHandler.bind(this);\r\n    this.$slideHolder.on('message-to-slide', this._slideHolderMessageToSlideHandler);\r\n  }\r\n\r\n  stopListeningForMessages() {\r\n    this.$slideHolder.off('message-to-slide', this._slideHolderMessageToSlideHandler);\r\n  }\r\n\r\n  slideHolderMessageToSlideHandler(event, message) {\r\n    this.receiveMessage({data: message});\r\n  }\r\n\r\n  receiveMessage(event) {\r\n    if(!event.data) {\r\n      return;\r\n    }\r\n    switch(event.data.action) {\r\n      case 'setState':\r\n        this.setState(event.data.state);\r\n        break;\r\n      case 'destroy':\r\n        this.destroy();\r\n        break;\r\n      case Constants.SOCKET_RECEIVE:\r\n        this.receiveSocketMessage(event.data.message);\r\n        break;\r\n      default:\r\n        this.handleMessage(event.data);\r\n        break;\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this.stopListeningForMessages();\r\n    window.cancelAnimationFrame(this._animationFrameId);\r\n  }\r\n\r\n  postMessage(data) {\r\n    this.$slideHolder.trigger('message-from-slide', data);\r\n  }\r\n\r\n  handleMessage(data) {\r\n  }\r\n\r\n  postSocketMessage(message) {\r\n    this.postMessage({\r\n      action: Constants.SOCKET_SEND,\r\n      message: message\r\n    });\r\n  }\r\n\r\n  receiveSocketMessage(message) {\r\n    //console.log('receiveSocketMessageame, message);\r\n  }\r\n\r\n  setState(state) {\r\n    if(state !== this.state) {\r\n      this.state = state;\r\n      this.onStateChanged();\r\n      if(this.state === Constants.STATE_ACTIVE) {\r\n        this.currentFrame = 0;\r\n        this._drawLoop();\r\n      } else {\r\n        window.cancelAnimationFrame(this._animationFrameId);\r\n      }\r\n    }\r\n  }\r\n\r\n  onStateChanged() {\r\n  }\r\n\r\n  _drawLoop() {\r\n    this._animationFrameId = window.requestAnimationFrame(this.__drawLoop);\r\n    this._currentTime = (new Date()).getTime();\r\n      this._delta = (this._currentTime - this._lastTime);\r\n      if(this._delta > this._interval) {\r\n        this.currentFrame++;\r\n        this.drawLoop(this._delta);\r\n        this._lastTime = this._currentTime - (this._delta % this._interval);\r\n      }\r\n  }\r\n\r\n  drawLoop(delta) {\r\n  }\r\n\r\n}\r\n","export default class MobileServerBridge {\r\n\r\n  constructor(presentation, settings) {\r\n    this.presentation = presentation;\r\n    this.settings = settings;\r\n    this.connect();\r\n  }\r\n\r\n  connect() {\r\n    console.log('MobileServerBridge.connect');\r\n    $.post(this.settings.mobileServerUrl + '/login', this.getLoginCredentials()).done(this.loginHandler.bind(this))\r\n    .fail((function() {\r\n      //retry after one second\r\n      setTimeout((function(){\r\n        this.connect();\r\n      }).bind(this), 1000);\r\n    }).bind(this));\r\n  }\r\n\r\n  getLoginCredentials() {\r\n    return {\r\n      email: this.settings.mobileServerUsername,\r\n      password: this.settings.mobileServerPassword,\r\n    };\r\n  }\r\n\r\n  loginHandler(result) {\r\n    this.token = result.token;\r\n    this.socket = io(this.settings.mobileServerUrl, {\r\n      query: 'token=' + this.token,\r\n      reconnection: false,\r\n      forceNew: true\r\n    });\r\n    this.socket.on('connect', this.socketConnectHandler.bind(this));\r\n    this.socket.on('disconnect', this.socketDisconnectHandler.bind(this));\r\n    this.socket.on('message', this.socketMessageHandler.bind(this));\r\n  }\r\n\r\n  socketConnectHandler() {\r\n    console.log('MobileServerBridge.socketConnectHandler');\r\n    this.presentation.mobileServerBridgeConnected();\r\n  }\r\n\r\n  socketDisconnectHandler() {\r\n    this.connect();\r\n  }\r\n\r\n  tryToSend() {\r\n    if(this.socket) {\r\n      this.socket.emit.apply(this.socket, arguments);\r\n    }\r\n  }\r\n\r\n  socketMessageHandler(message) {\r\n    this.presentation.mobileServerMessageHandler(message);\r\n  }\r\n}\r\n","import {Constants} from '../Constants';\r\nimport SlideBridge from './SlideBridge';\r\n\r\nexport default class Presentation {\r\n  /*\r\n   * data: json object with slides array property\r\n   * role: mobile or presentation\r\n   */\r\n  constructor(data, role, settings) {\r\n    this.data = data;\r\n    this.role = role;\r\n    this.settings = settings;\r\n    this.currentSlideIndex = -1;\r\n    this.slideHolders = [];\r\n    this.numSlideHolders = 3;\r\n    this.slideBridges = [];\r\n    this.slideBridgesBySlideName = {};\r\n\r\n    this.createSlideHolders();\r\n    this.createSlideBridges(this.data);\r\n\r\n    this.mobileServerBridge = this.createMobileServerBridge();\r\n    this.startListeningForMessages();\r\n\r\n    this.setCurrentSlideIndex(0);\r\n  }\r\n\r\n  startListeningForMessages() {\r\n    window.addEventListener(\"message\", this.slideMessageHandler.bind(this), false);\r\n  };\r\n\r\n  createSlideHolders() {\r\n    for(var i = 0; i < this.numSlideHolders; i++) {\r\n      var $slideHolder = $('<div class=\"slide-frame\" />');\r\n      this.slideHolders.push($slideHolder);\r\n      $('#presentation').append($slideHolder);\r\n    }\r\n  };\r\n\r\n  createSlideBridges(data) {\r\n    var that = this;\r\n    var numSlides = data.slides.length;\r\n    for(var i = 0; i < numSlides; i++) {\r\n      var slideBridge = this.createSlideBridge(data.slides[i]);\r\n      this.slideBridges.push(slideBridge);\r\n      this.slideBridgesBySlideName[slideBridge.name] = slideBridge;\r\n    }\r\n  };\r\n\r\n  createSlideBridge(slide) {\r\n    return new SlideBridge(slide);\r\n  };\r\n\r\n  slideMessageHandler(event) {\r\n    if(!event.data) {\r\n      return;\r\n    }\r\n    switch(event.data.action) {\r\n      case Constants.SOCKET_SEND:\r\n        if(this.mobileServerBridge) {\r\n          this.mobileServerBridge.tryToSend(Constants.MESSAGE, event.data.message);\r\n        }\r\n        break;\r\n    }\r\n  };\r\n\r\n  mobileServerBridgeConnected() {\r\n    //join the rooms of the slideHolders\r\n    for(var i = 0; i < this.numSlideHolders; i++) {\r\n      this.mobileServerBridge.tryToSend(Constants.JOIN_SLIDE_ROOM, $(this.slideHolders[i]).attr('data-name'));\r\n    }\r\n  };\r\n\r\n  mobileServerMessageHandler(message) {\r\n    if(message.target.slide) {\r\n      //slide has to handle the message\r\n      var slideBridge = this.getSlideBridgeByName(message.target.slide);\r\n      if(slideBridge) {\r\n        slideBridge.tryToPostMessage({\r\n          action: Constants.SOCKET_RECEIVE,\r\n          message: message\r\n        });\r\n      }\r\n    } else {\r\n      //presentation has to handle the message\r\n      this.handleMobileServerMessage(message);\r\n    }\r\n  };\r\n\r\n  handleMobileServerMessage(message) {\r\n    console.log('[shared/Presentation] handleMobileServerMessage', message);\r\n  };\r\n\r\n  getSlideBridgeByIndex(index) {\r\n    if(index >= 0 && index < this.slideBridges.length) {\r\n      return this.slideBridges[index];\r\n    }\r\n    return false;\r\n  };\r\n\r\n  getSlideBridgeByName(slideName) {\r\n    return this.slideBridgesBySlideName[slideName];\r\n  };\r\n\r\n  getSlideHolderForSlide(slide, slidesNotToClear) {\r\n    if(slide) {\r\n      var $slideHolder = $('.slide-frame[data-name=\"' + slide.name + '\"]');\r\n      if($slideHolder.length > 0) {\r\n        return $slideHolder[0];\r\n      }\r\n      //get a free slideHolder\r\n      var slideNamesNotToClear = [];\r\n      $(slidesNotToClear).each(function(index, obj){\r\n        slideNamesNotToClear.push(obj.name);\r\n      });\r\n      var $slideHolders = $('.slide-frame');\r\n      for (var i = $slideHolders.length - 1; i >= 0; i--) {\r\n        $slideHolder = $($slideHolders[i]);\r\n        var name = $slideHolder.attr('data-name');\r\n        if(!name || slideNamesNotToClear.indexOf(name) === -1) {\r\n          return $slideHolder[0];\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n\r\n  goToPreviousSlide() {\r\n    this.setCurrentSlideIndex(this.currentSlideIndex - 1);\r\n  };\r\n\r\n  goToNextSlide() {\r\n    this.setCurrentSlideIndex(this.currentSlideIndex + 1);\r\n  };\r\n\r\n  setCurrentSlideIndex(value) {\r\n    value = Math.max(0, Math.min(value, this.slideBridges.length - 1));\r\n    if(value !== this.currentSlideIndex) {\r\n      this.currentSlideIndex = value;\r\n\r\n      var currentSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex);\r\n      var previousSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex - 1);\r\n      var nextSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex + 1);\r\n\r\n      //remove \"used\" class from slide holders\r\n      $('.slide-frame').removeAttr('data-used', false);\r\n\r\n      var currentSlideHolder = this.getSlideHolderForSlide(currentSlideBridge, [previousSlideBridge, nextSlideBridge]);\r\n      this.setupSlideHolder(currentSlideHolder, currentSlideBridge, Constants.STATE_ACTIVE, 0);\r\n\r\n      var previousSlideHolder = this.getSlideHolderForSlide(previousSlideBridge, [currentSlideBridge, nextSlideBridge]);\r\n      this.setupSlideHolder(previousSlideHolder, previousSlideBridge, Constants.STATE_INACTIVE, '-100%');\r\n\r\n      var nextSlideHolder = this.getSlideHolderForSlide(nextSlideBridge, [previousSlideBridge, currentSlideBridge]);\r\n      this.setupSlideHolder(nextSlideHolder, nextSlideBridge, Constants.STATE_INACTIVE, '100%');\r\n\r\n      //clear attributes of unused slide frames\r\n      $('.slide-frame').each(function(index, slideHolder){\r\n        if(!$(slideHolder).attr('data-used')) {\r\n          $(slideHolder).removeAttr('data-used').removeAttr('data-name').removeAttr('data-src');\r\n        }\r\n      });\r\n\r\n      //all other slideHolder bridges should be unlinked from their slideHolder\r\n      this.slideBridges.forEach(function(slideBridge){\r\n        if(slideBridge === currentSlideBridge) {\r\n          return;\r\n        }\r\n        if(slideBridge === previousSlideBridge) {\r\n          return;\r\n        }\r\n        if(slideBridge === nextSlideBridge) {\r\n          return;\r\n        }\r\n        slideBridge.slideHolder = null;\r\n      });\r\n\r\n      bean.fire(this, Constants.SET_CURRENT_SLIDE_INDEX, [this.currentSlideIndex]);\r\n    }\r\n  };\r\n\r\n  setupSlideHolder(slideHolder, slideBridge, state, left) {\r\n    if(slideHolder) {\r\n      var src = \"slides/\" + slideBridge.name + '.html';\r\n      if(slideBridge.data[this.role] && slideBridge.data[this.role].url) {\r\n        src = slideBridge.data[this.role].url;\r\n      }\r\n      src = this.processSlideSrc(src);\r\n      if(slideBridge.isAlreadyCorrectlyAttached(slideHolder, src)) {\r\n        //console.log(slideBridge.name + ' already attached');\r\n      } else {\r\n        this.attachToSlideHolder(slideHolder, slideBridge, src);\r\n      }\r\n      slideBridge.setState(state);\r\n      $(slideHolder).css('left', left);\r\n      $(slideHolder).attr('data-used', 1);\r\n    }\r\n  };\r\n\r\n  attachToSlideHolder(slideHolder, slideBridge, src) {\r\n    //listen for events on this slideHolder\r\n    $(slideHolder).off('message-from-slide');\r\n    $(slideHolder).on('message-from-slide', (function(event, message) {\r\n      this.slideMessageHandler({data: message});\r\n    }).bind(this));\r\n    //leave previous channel of this slideHolder\r\n    if(this.mobileServerBridge) {\r\n      this.mobileServerBridge.tryToSend(Constants.LEAVE_SLIDE_ROOM, $(slideHolder).attr('data-name'));\r\n    }\r\n    //add the join as a callback for the onload event\r\n    slideBridge.attachToSlideHolder(slideHolder, src, this.slideLoaded.bind(this, slideHolder, slideBridge, src));\r\n  };\r\n\r\n  slideLoaded(slideHolder, slideBridge) {\r\n    //join new channel\r\n    if(this.mobileServerBridge) {\r\n      this.mobileServerBridge.tryToSend(Constants.JOIN_SLIDE_ROOM, $(slideHolder).attr('data-name'));\r\n    }\r\n  };\r\n\r\n  processSlideSrc(src) {\r\n    return src;\r\n  };\r\n\r\n  createMobileServerBridge() {\r\n    //to implement in extending classes\r\n  };\r\n}\r\n","import fetch from 'isomorphic-fetch';\r\n\r\nexport default class SlideBridge {\r\n  constructor(data) {\r\n    this.data = data;\r\n    this.name = this.data.name;\r\n  }\r\n\r\n  isAlreadyCorrectlyAttached(slideHolder, src) {\r\n    return (this.slideHolder === slideHolder && $(slideHolder).attr('data-name') === this.name && $(slideHolder).attr('data-src') === src);\r\n  };\r\n\r\n  attachToSlideHolder(slideHolder, src, cb) {\r\n    this.slideHolder = slideHolder;\r\n    //notify the content it is being cleared\r\n    this.tryToPostMessage({action: 'destroy'});\r\n    //clear the current content\r\n    this.slideHolder.innerHTML = '';\r\n    $(slideHolder).attr('data-name', this.name);\r\n    $(slideHolder).addClass('loading');\r\n\r\n    $(slideHolder).on('load', () => {\r\n      this.tryToPostMessage({\r\n        action: 'setState',\r\n        state: this.state\r\n      });\r\n      $(slideHolder).off('load');\r\n    });\r\n\r\n    if(src !== $(slideHolder).attr('data-src')) {\r\n      //fetch the html\r\n      fetch(src)\r\n        .then(result => result.text())\r\n        .then(result => $(result))\r\n        .then($result => {\r\n          $(slideHolder).html($result.html());\r\n          $(slideHolder).removeClass('loading');\r\n          cb();\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n          $(slideHolder).removeClass('loading');\r\n          cb();\r\n        });\r\n      $(slideHolder).attr('data-src', src);\r\n    }\r\n  };\r\n\r\n  tryToPostMessage(message) {\r\n    if(!this.slideHolder)\r\n    {\r\n      return;\r\n    }\r\n    //trigger with jquery\r\n    $(this.slideHolder).trigger('message-to-slide', message);\r\n  };\r\n\r\n  setState(state) {\r\n    this.state = state;\r\n    this.tryToPostMessage({\r\n      action: 'setState',\r\n      state: this.state\r\n    });\r\n  };\r\n}\r\n"]}